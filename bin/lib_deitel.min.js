/*! deitel 20151202 */
!function(){d3.hexbin=function(){function d(a){var b={};return a.forEach(function(a,c){var e=l.call(d,a,c)/h,f=Math.round(e),i=k.call(d,a,c)/g-(1&f?.5:0),j=Math.round(i),m=e-f;if(3*Math.abs(m)>1){var n=i-j,o=j+(j>i?-1:1)/2,p=f+(f>e?-1:1),q=i-o,r=e-p;n*n+m*m>q*q+r*r&&(j=o+(1&f?1:-1)/2,f=p)}var s=j+"-"+f,t=b[s];t?t.push(a):(t=b[s]=[a],t.i=j,t.j=f,t.x=(j+(1&f?.5:0))*g,t.y=f*h)}),d3.values(b)}function e(b){var c=0,d=0;return a.map(function(a){var e=Math.sin(a)*b,f=-Math.cos(a)*b,g=e-c,h=f-d;return c=e,d=f,[g,h]})}var f,g,h,i=1,j=1,k=b,l=c;return d.x=function(a){return arguments.length?(k=a,d):k},d.y=function(a){return arguments.length?(l=a,d):l},d.hexagon=function(a){return arguments.length<1&&(a=f),"m"+e(a).join("l")+"z"},d.centers=function(){for(var a=[],b=0,c=!1,d=0;j+f>b;b+=h,c=!c,++d)for(var e=c?g/2:0,k=0;i+g/2>e;e+=g,++k){var l=[e,b];l.i=k,l.j=d,a.push(l)}return a},d.mesh=function(){var a=e(f).slice(0,4).join("l");return d.centers().map(function(b){return"M"+b+"m"+a}).join("")},d.size=function(a){return arguments.length?(i=+a[0],j=+a[1],d):[i,j]},d.radius=function(a){return arguments.length?(f=+a,g=2*f*Math.sin(Math.PI/3),h=1.5*f,d):f},d.radius(1)};var a=d3.range(0,2*Math.PI,Math.PI/3),b=function(a){return a[0]},c=function(a){return a[1]}}(),function(a,b,c){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,polygonOptions:{}},initialize:function(a){L.Util.setOptions(this,a),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[]},addLayer:function(a){if(console.log("addLayer...."),a instanceof L.LayerGroup){var b=[];for(var c in a._layers)b.push(a._layers[c]);return this.addLayers(b)}if(!a.getLatLng)return this._nonPointGroup.addLayer(a),this;if(!this._map)return this._needsClustering.push(a),this;if(this.hasLayer(a))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(a,this._maxZoom);var d=a,e=this._map.getZoom();if(a.__parent)for(;d.__parent._zoom>=e;)d=d.__parent;return this._currentShownBounds.contains(d.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(a,d):this._animationAddLayerNonAnimated(a,d)),this},removeLayer:function(a){if(a instanceof L.LayerGroup){var b=[];for(var c in a._layers)b.push(a._layers[c]);return this.removeLayers(b)}return a.getLatLng?this._map?a.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(a)),this._removeLayer(a,!0),this._featureGroup.hasLayer(a)&&(this._featureGroup.removeLayer(a),a.setOpacity&&a.setOpacity(1)),this):this:(!this._arraySplice(this._needsClustering,a)&&this.hasLayer(a)&&this._needsRemoving.push(a),this):(this._nonPointGroup.removeLayer(a),this)},addLayers:function(a){var b,c,d,e=this._map,f=this._featureGroup,g=this._nonPointGroup;for(console.log(a.length),b=0,c=a.length;c>b;b++)if(d=a[b],d.getLatLng){if(!this.hasLayer(d))if(e){if(this._addLayer(d,this._maxZoom),d.__parent&&2===d.__parent.getChildCount()){var h=d.__parent.getAllChildMarkers(),i=h[0]===d?h[1]:h[0];f.removeLayer(i)}}else this._needsClustering.push(d)}else g.addLayer(d);return e&&(f.eachLayer(function(a){a instanceof L.MarkerCluster&&a._iconNeedsUpdate&&a._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)),this},removeLayers:function(a){var b,c,d,e=this._featureGroup,f=this._nonPointGroup;if(!this._map){for(b=0,c=a.length;c>b;b++)d=a[b],this._arraySplice(this._needsClustering,d),f.removeLayer(d);return this}for(b=0,c=a.length;c>b;b++)d=a[b],d.__parent?(this._removeLayer(d,!0,!0),e.hasLayer(d)&&(e.removeLayer(d),d.setOpacity&&d.setOpacity(1))):f.removeLayer(d);return this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),e.eachLayer(function(a){a instanceof L.MarkerCluster&&a._updateIcon()}),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(a){delete a.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var a=new L.LatLngBounds;if(this._topClusterLevel)a.extend(this._topClusterLevel._bounds);else for(var b=this._needsClustering.length-1;b>=0;b--)a.extend(this._needsClustering[b].getLatLng());return a.extend(this._nonPointGroup.getBounds()),a},eachLayer:function(a,b){var c,d=this._needsClustering.slice();for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(d),c=d.length-1;c>=0;c--)a.call(b,d[c]);this._nonPointGroup.eachLayer(a,b)},getLayers:function(){var a=[];return this.eachLayer(function(b){a.push(b)}),a},getLayer:function(a){var b=null;return this.eachLayer(function(c){L.stamp(c)===a&&(b=c)}),b},hasLayer:function(a){if(!a)return!1;var b,c=this._needsClustering;for(b=c.length-1;b>=0;b--)if(c[b]===a)return!0;for(c=this._needsRemoving,b=c.length-1;b>=0;b--)if(c[b]===a)return!1;return!(!a.__parent||a.__parent._group!==this)||this._nonPointGroup.hasLayer(a)},zoomToShowLayer:function(a,b){var c=function(){if((a._icon||a.__parent._icon)&&!this._inZoomAnimation)if(this._map.off("moveend",c,this),this.off("animationend",c,this),a._icon)b();else if(a.__parent._icon){var d=function(){this.off("spiderfied",d,this),b()};this.on("spiderfied",d,this),a.__parent.spiderfy()}};a._icon&&this._map.getBounds().contains(a.getLatLng())?b():a.__parent._zoom<this._map.getZoom()?(this._map.on("moveend",c,this),this._map.panTo(a.getLatLng())):(this._map.on("moveend",c,this),this.on("animationend",c,this),this._map.setView(a.getLatLng(),a.__parent._zoom+1),a.__parent.zoomToBounds())},onAdd:function(a){this._map=a;var b,c,d;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.onAdd(a),this._nonPointGroup.onAdd(a),this._gridClusters||this._generateInitialClusters(),b=0,c=this._needsRemoving.length;c>b;b++)d=this._needsRemoving[b],this._removeLayer(d,!0);for(this._needsRemoving=[],b=0,c=this._needsClustering.length;c>b;b++)d=this._needsClustering[b],d.getLatLng?d.__parent||this._addLayer(d,this._maxZoom):this._featureGroup.addLayer(d);this._needsClustering=[],this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)},onRemove:function(a){a.off("zoomend",this._zoomEnd,this),a.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),this._hideCoverage(),this._featureGroup.onRemove(a),this._nonPointGroup.onRemove(a),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(a){for(var b=a;b&&!b._icon;)b=b.__parent;return b||null},_arraySplice:function(a,b){for(var c=a.length-1;c>=0;c--)if(a[c]===b)return a.splice(c,1),!0},_removeLayer:function(a,b,c){var d=this._gridClusters,e=this._gridUnclustered,f=this._featureGroup,g=this._map;if(b)for(var h=this._maxZoom;h>=0&&e[h].removeObject(a,g.project(a.getLatLng(),h));h--);var i,j=a.__parent,k=j._markers;for(this._arraySplice(k,a);j&&(j._childCount--,!(j._zoom<0));)b&&j._childCount<=1?(i=j._markers[0]===a?j._markers[1]:j._markers[0],d[j._zoom].removeObject(j,g.project(j._cLatLng,j._zoom)),e[j._zoom].addObject(i,g.project(i.getLatLng(),j._zoom)),this._arraySplice(j.__parent._childClusters,j),j.__parent._markers.push(i),i.__parent=j.__parent,j._icon&&(f.removeLayer(j),c||f.addLayer(i))):(j._recalculateBounds(),c&&j._icon||j._updateIcon()),j=j.__parent;delete a.__parent},_isOrIsParent:function(a,b){for(;b;){if(a===b)return!0;b=b.parentNode}return!1},_propagateEvent:function(a){if(a.layer instanceof L.MarkerCluster){if(a.originalEvent&&this._isOrIsParent(a.layer._icon,a.originalEvent.relatedTarget))return;a.type="cluster"+a.type}this.fire(a.type,a)},_defaultIconCreateFunction:function(a){var b=a.getChildCount(),c=" marker-cluster-";return c+=10>b?"small":100>b?"medium":"large",new L.DivIcon({html:"<div><span>"+b+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(40,40)})},_bindEvents:function(){var a=this._map,b=this.options.spiderfyOnMaxZoom,c=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick;(b||d)&&this.on("clusterclick",this._zoomOrSpiderfy,this),c&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),a.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(a){var b=this._map;b.getMaxZoom()===b.getZoom()?this.options.spiderfyOnMaxZoom&&a.layer.spiderfy():this.options.zoomToBoundsOnClick&&a.layer.zoomToBounds(),a.originalEvent&&13===a.originalEvent.keyCode&&b._container.focus()},_showCoverage:function(a){var b=this._map;this._inZoomAnimation||(this._shownPolygon&&b.removeLayer(this._shownPolygon),a.layer.getChildCount()>2&&a.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(a.layer.getConvexHull(),this.options.polygonOptions),b.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var a=this.options.spiderfyOnMaxZoom,b=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick,d=this._map;(a||c)&&this.off("clusterclick",this._zoomOrSpiderfy,this),b&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),d.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=this._map._zoom,this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var a=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._map._zoom,a),this._currentShownBounds=a}},_generateInitialClusters:function(){var a=this._map.getMaxZoom(),b=this.options.maxClusterRadius;this.options.disableClusteringAtZoom&&(a=this.options.disableClusteringAtZoom-1),this._maxZoom=a,this._gridClusters={},this._gridUnclustered={};for(var c=a;c>=0;c--)this._gridClusters[c]=new L.DistanceGrid(b),this._gridUnclustered[c]=new L.DistanceGrid(b);this._topClusterLevel=new L.MarkerCluster(this,-1)},_addLayer:function(a,b){var c,d,e=this._gridClusters,f=this._gridUnclustered;for(this.options.singleMarkerMode&&(a.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[a]}}));b>=0;b--){c=this._map.project(a.getLatLng(),b);var g=e[b].getNearObject(c);if(g)return g._addChild(a),void(a.__parent=g);if(g=f[b].getNearObject(c)){var h=g.__parent;h&&this._removeLayer(g,!1);var i=new L.MarkerCluster(this,b,g,a);e[b].addObject(i,this._map.project(i._cLatLng,b)),g.__parent=i,a.__parent=i;var j=i;for(d=b-1;d>h._zoom;d--)j=new L.MarkerCluster(this,d,j),e[d].addObject(j,this._map.project(g.getLatLng(),d));for(h._addChild(j),d=b;d>=0&&f[d].removeObject(g,this._map.project(g.getLatLng(),d));d--);return}f[b].addObject(a,c)}this._topClusterLevel._addChild(a),a.__parent=this._topClusterLevel},_enqueue:function(a){this._queue.push(a),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var a=0;a<this._queue.length;a++)this._queue[a].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){this._processQueue(),this._zoom<this._map._zoom&&this._currentShownBounds.contains(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,this._map._zoom)):this._zoom>this._map._zoom?(this._animationStart(),this._animationZoomOut(this._zoom,this._map._zoom)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds)return this.getBounds();var a=this._map,b=a.getBounds(),c=b._southWest,d=b._northEast,e=L.Browser.mobile?0:Math.abs(c.lat-d.lat),f=L.Browser.mobile?0:Math.abs(c.lng-d.lng);return new L.LatLngBounds(new L.LatLng(c.lat-e,c.lng-f,!0),new L.LatLng(d.lat+e,d.lng+f,!0))},_animationAddLayerNonAnimated:function(a,b){if(b===a)this._featureGroup.addLayer(a);else if(2===b._childCount){b._addToMap();var c=b.getAllChildMarkers();this._featureGroup.removeLayer(c[0]),this._featureGroup.removeLayer(c[1])}else b._updateIcon()}}),L.MarkerClusterGroup.include(L.DomUtil.TRANSITION?{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_animationZoomIn:function(a,b){var c,d=this._getExpandedVisibleBounds(),e=this._featureGroup;this._topClusterLevel._recursively(d,a,0,function(f){var g,h=f._latlng,i=f._markers;for(d.contains(h)||(h=null),f._isSingleParent()&&a+1===b?(e.removeLayer(f),f._recursivelyAddChildrenToMap(null,b,d)):(f.setOpacity(0),f._recursivelyAddChildrenToMap(h,b,d)),c=i.length-1;c>=0;c--)g=i[c],d.contains(g._latlng)||e.removeLayer(g)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(d,b),e.eachLayer(function(a){a instanceof L.MarkerCluster||!a._icon||a.setOpacity(1)}),this._topClusterLevel._recursively(d,a,b,function(a){a._recursivelyRestoreChildPositions(b)}),this._enqueue(function(){this._topClusterLevel._recursively(d,a,0,function(a){e.removeLayer(a),a.setOpacity(1)}),this._animationEnd()})},_animationZoomOut:function(a,b){this._animationZoomOutSingle(this._topClusterLevel,a-1,b),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,a,this._getExpandedVisibleBounds())},_animationZoomOutSingle:function(a,b,c){var d=this._getExpandedVisibleBounds();a._recursivelyAnimateChildrenInAndAddSelfToMap(d,b+1,c);var e=this;this._forceLayout(),a._recursivelyBecomeVisible(d,c),this._enqueue(function(){if(1===a._childCount){var f=a._markers[0];f.setLatLng(f.getLatLng()),f.setOpacity(1)}else a._recursively(d,c,0,function(a){a._recursivelyRemoveChildrenFromMap(d,b+1)});e._animationEnd()})},_animationAddLayer:function(a,b){var c=this,d=this._featureGroup;d.addLayer(a),b!==a&&(b._childCount>2?(b._updateIcon(),this._forceLayout(),this._animationStart(),a._setPos(this._map.latLngToLayerPoint(b.getLatLng())),a.setOpacity(0),this._enqueue(function(){d.removeLayer(a),a.setOpacity(1),c._animationEnd()})):(this._forceLayout(),c._animationStart(),c._animationZoomOutSingle(b,this._map.getMaxZoom(),this._map.getZoom())))},_forceLayout:function(){L.Util.falseFn(b.body.offsetWidth)}}:{_animationStart:function(){},_animationZoomIn:function(a,b){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds())},_animationZoomOut:function(a,b){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds())},_animationAddLayer:function(a,b){this._animationAddLayerNonAnimated(a,b)}}),L.markerClusterGroup=function(a){return new L.MarkerClusterGroup(a)},L.MarkerCluster=L.Marker.extend({initialize:function(a,b,c,d){L.Marker.prototype.initialize.call(this,c?c._cLatLng||c.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=a,this._zoom=b,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._bounds=new L.LatLngBounds,c&&this._addChild(c),d&&this._addChild(d)},getAllChildMarkers:function(a){a=a||[];for(var b=this._childClusters.length-1;b>=0;b--)this._childClusters[b].getAllChildMarkers(a);for(var c=this._markers.length-1;c>=0;c--)a.push(this._markers[c]);return a},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var a,b=this._childClusters.slice(),c=this._group._map,d=c.getBoundsZoom(this._bounds),e=this._zoom+1,f=c.getZoom();b.length>0&&d>e;){e++;var g=[];for(a=0;a<b.length;a++)g=g.concat(b[a]._childClusters);b=g}d>e?this._group._map.setView(this._latlng,e):f>=d?this._group._map.setView(this._latlng,f+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var a=new L.LatLngBounds;return a.extend(this._bounds),a},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(a,b){this._iconNeedsUpdate=!0,this._expandBounds(a),a instanceof L.MarkerCluster?(b||(this._childClusters.push(a),a.__parent=this),this._childCount+=a._childCount):(b||this._markers.push(a),this._childCount++),this.__parent&&this.__parent._addChild(a,!0)},_expandBounds:function(a){var b,c=a._wLatLng||a._latlng;a instanceof L.MarkerCluster?(this._bounds.extend(a._bounds),b=a._childCount):(this._bounds.extend(c),b=1),this._cLatLng||(this._cLatLng=a._cLatLng||c);var d=this._childCount+b;this._wLatLng?(this._wLatLng.lat=(c.lat*b+this._wLatLng.lat*this._childCount)/d,this._wLatLng.lng=(c.lng*b+this._wLatLng.lng*this._childCount)/d):this._latlng=this._wLatLng=new L.LatLng(c.lat,c.lng)},_addToMap:function(a){a&&(this._backupLatlng=this._latlng,this.setLatLng(a)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(a,b,c){this._recursively(a,0,c-1,function(a){var c,d,e=a._markers;for(c=e.length-1;c>=0;c--)d=e[c],d._icon&&(d._setPos(b),d.setOpacity(0))},function(a){var c,d,e=a._childClusters;for(c=e.length-1;c>=0;c--)d=e[c],d._icon&&(d._setPos(b),d.setOpacity(0))})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(a,b,c){this._recursively(a,c,0,function(d){d._recursivelyAnimateChildrenIn(a,d._group._map.latLngToLayerPoint(d.getLatLng()).round(),b),d._isSingleParent()&&b-1===c?(d.setOpacity(1),d._recursivelyRemoveChildrenFromMap(a,b)):d.setOpacity(0),d._addToMap()})},_recursivelyBecomeVisible:function(a,b){this._recursively(a,0,b,null,function(a){a.setOpacity(1)})},_recursivelyAddChildrenToMap:function(a,b,c){this._recursively(c,-1,b,function(d){if(b!==d._zoom)for(var e=d._markers.length-1;e>=0;e--){var f=d._markers[e];c.contains(f._latlng)&&(a&&(f._backupLatlng=f.getLatLng(),f.setLatLng(a),f.setOpacity&&f.setOpacity(0)),d._group._featureGroup.addLayer(f))}},function(b){b._addToMap(a)})},_recursivelyRestoreChildPositions:function(a){for(var b=this._markers.length-1;b>=0;b--){var c=this._markers[b];c._backupLatlng&&(c.setLatLng(c._backupLatlng),delete c._backupLatlng)}if(a-1===this._zoom)for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._restorePosition();else for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e]._recursivelyRestoreChildPositions(a)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(a,b,c){var d,e;this._recursively(a,-1,b-1,function(a){for(e=a._markers.length-1;e>=0;e--)d=a._markers[e],c&&c.contains(d._latlng)||(a._group._featureGroup.removeLayer(d),d.setOpacity&&d.setOpacity(1))},function(a){for(e=a._childClusters.length-1;e>=0;e--)d=a._childClusters[e],c&&c.contains(d._latlng)||(a._group._featureGroup.removeLayer(d),d.setOpacity&&d.setOpacity(1))})},_recursively:function(a,b,c,d,e){var f,g,h=this._childClusters,i=this._zoom;if(b>i)for(f=h.length-1;f>=0;f--)g=h[f],a.intersects(g._bounds)&&g._recursively(a,b,c,d,e);else if(d&&d(this),e&&this._zoom===c&&e(this),c>i)for(f=h.length-1;f>=0;f--)g=h[f],a.intersects(g._bounds)&&g._recursively(a,b,c,d,e)},_recalculateBounds:function(){var a,b=this._markers,c=this._childClusters;for(this._bounds=new L.LatLngBounds,delete this._wLatLng,a=b.length-1;a>=0;a--)this._expandBounds(b[a]);for(a=c.length-1;a>=0;a--)this._expandBounds(c[a])},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.DistanceGrid=function(a){this._cellSize=a,this._sqCellSize=a*a,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(a,b){var c=this._getCoord(b.x),d=this._getCoord(b.y),e=this._grid,f=e[d]=e[d]||{},g=f[c]=f[c]||[],h=L.Util.stamp(a);this._objectPoint[h]=b,g.push(a)},updateObject:function(a,b){this.removeObject(a),this.addObject(a,b)},removeObject:function(a,b){var c,d,e=this._getCoord(b.x),f=this._getCoord(b.y),g=this._grid,h=g[f]=g[f]||{},i=h[e]=h[e]||[];for(delete this._objectPoint[L.Util.stamp(a)],c=0,d=i.length;d>c;c++)if(i[c]===a)return i.splice(c,1),1===d&&delete h[e],!0},eachObject:function(a,b){var c,d,e,f,g,h,i,j=this._grid;for(c in j){g=j[c];for(d in g)for(h=g[d],e=0,f=h.length;f>e;e++)i=a.call(b,h[e]),i&&(e--,f--)}},getNearObject:function(a){var b,c,d,e,f,g,h,i,j=this._getCoord(a.x),k=this._getCoord(a.y),l=this._objectPoint,m=this._sqCellSize,n=null;for(b=k-1;k+1>=b;b++)if(e=this._grid[b])for(c=j-1;j+1>=c;c++)if(f=e[c])for(d=0,g=f.length;g>d;d++)h=f[d],i=this._sqDist(l[L.Util.stamp(h)],a),m>i&&(m=i,n=h);return n},_getCoord:function(a){return Math.floor(a/this._cellSize)},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d}},function(){L.QuickHull={getDistant:function(a,b){var c=b[1].lat-b[0].lat,d=b[0].lng-b[1].lng;return d*(a.lat-b[0].lat)+c*(a.lng-b[0].lng)},findMostDistantPointFromBaseLine:function(a,b){var c,d,e,f=0,g=null,h=[];for(c=b.length-1;c>=0;c--)d=b[c],e=this.getDistant(d,a),e>0&&(h.push(d),e>f&&(f=e,g=d));return{maxPoint:g,newPoints:h}},buildConvexHull:function(a,b){var c=[],d=this.findMostDistantPointFromBaseLine(a,b);return d.maxPoint?(c=c.concat(this.buildConvexHull([a[0],d.maxPoint],d.newPoints)),c=c.concat(this.buildConvexHull([d.maxPoint,a[1]],d.newPoints))):[a[0]]},getConvexHull:function(a){var b,c=!1,d=!1,e=null,f=null;for(b=a.length-1;b>=0;b--){var g=a[b];(c===!1||g.lat>c)&&(e=g,c=g.lat),(d===!1||g.lat<d)&&(f=g,d=g.lat)}var h=[].concat(this.buildConvexHull([f,e],a),this.buildConvexHull([e,f],a));return h}}}(),L.MarkerCluster.include({getConvexHull:function(){var a,b,c=this.getAllChildMarkers(),d=[];for(b=c.length-1;b>=0;b--)a=c[b].getLatLng(),d.push(a);return L.QuickHull.getConvexHull(d)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var a,b=this.getAllChildMarkers(),c=this._group,d=c._map,e=d.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,b.length>=this._circleSpiralSwitchover?a=this._generatePointsSpiral(b.length,e):(e.y+=10,a=this._generatePointsCircle(b.length,e)),this._animationSpiderfy(b,a)}},unspiderfy:function(a){this._group._inZoomAnimation||(this._animationUnspiderfy(a),this._group._spiderfied=null)},_generatePointsCircle:function(a,b){var c,d,e=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+a),f=e/this._2PI,g=this._2PI/a,h=[];for(h.length=a,c=a-1;c>=0;c--)d=this._circleStartAngle+c*g,h[c]=new L.Point(b.x+f*Math.cos(d),b.y+f*Math.sin(d))._round();return h},_generatePointsSpiral:function(a,b){var c,d=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthStart,e=this._group.options.spiderfyDistanceMultiplier*this._spiralFootSeparation,f=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthFactor,g=0,h=[];for(h.length=a,c=a-1;c>=0;c--)g+=e/d+5e-4*c,h[c]=new L.Point(b.x+d*Math.cos(g),b.y+d*Math.sin(g))._round(),d+=this._2PI*f/g;return h},_noanimationUnspiderfy:function(){var a,b,c=this._group,d=c._map,e=c._featureGroup,f=this.getAllChildMarkers();for(this.setOpacity(1),b=f.length-1;b>=0;b--)a=f[b],e.removeLayer(a),a._preSpiderfyLatlng&&(a.setLatLng(a._preSpiderfyLatlng),delete a._preSpiderfyLatlng),a.setZIndexOffset&&a.setZIndexOffset(0),a._spiderLeg&&(d.removeLayer(a._spiderLeg),delete a._spiderLeg);c._spiderfied=null}}),L.MarkerCluster.include(L.DomUtil.TRANSITION?{SVG_ANIMATION:function(){return b.createElementNS("http://www.w3.org/2000/svg","animate").toString().indexOf("SVGAnimate")>-1}(),_animationSpiderfy:function(a,c){var d,e,f,g,h=this,i=this._group,j=i._map,k=i._featureGroup,l=j.latLngToLayerPoint(this._latlng);for(d=a.length-1;d>=0;d--)e=a[d],e.setOpacity?(e.setZIndexOffset(1e6),e.setOpacity(0),k.addLayer(e),e._setPos(l)):k.addLayer(e);i._forceLayout(),i._animationStart();var m=L.Path.SVG?0:.3,n=L.Path.SVG_NS;for(d=a.length-1;d>=0;d--)if(g=j.layerPointToLatLng(c[d]),e=a[d],e._preSpiderfyLatlng=e._latlng,e.setLatLng(g),e.setOpacity&&e.setOpacity(1),f=new L.Polyline([h._latlng,g],{weight:1.5,color:"#222",opacity:m}),j.addLayer(f),e._spiderLeg=f,L.Path.SVG&&this.SVG_ANIMATION){var o=f._path.getTotalLength();f._path.setAttribute("stroke-dasharray",o+","+o);var p=b.createElementNS(n,"animate");p.setAttribute("attributeName","stroke-dashoffset"),p.setAttribute("begin","indefinite"),p.setAttribute("from",o),p.setAttribute("to",0),p.setAttribute("dur",.25),f._path.appendChild(p),p.beginElement(),p=b.createElementNS(n,"animate"),p.setAttribute("attributeName","stroke-opacity"),p.setAttribute("attributeName","stroke-opacity"),p.setAttribute("begin","indefinite"),p.setAttribute("from",0),p.setAttribute("to",.5),p.setAttribute("dur",.25),f._path.appendChild(p),p.beginElement()}if(h.setOpacity(.3),L.Path.SVG)for(this._group._forceLayout(),d=a.length-1;d>=0;d--)e=a[d]._spiderLeg,e.options.opacity=.5,e._path.setAttribute("stroke-opacity",.5);setTimeout(function(){i._animationEnd(),i.fire("spiderfied")},200)},_animationUnspiderfy:function(a){var b,c,d,e=this._group,f=e._map,g=e._featureGroup,h=a?f._latLngToNewLayerPoint(this._latlng,a.zoom,a.center):f.latLngToLayerPoint(this._latlng),i=this.getAllChildMarkers(),j=L.Path.SVG&&this.SVG_ANIMATION;for(e._animationStart(),this.setOpacity(1),c=i.length-1;c>=0;c--)b=i[c],b._preSpiderfyLatlng&&(b.setLatLng(b._preSpiderfyLatlng),delete b._preSpiderfyLatlng,b.setOpacity?(b._setPos(h),b.setOpacity(0)):g.removeLayer(b),j&&(d=b._spiderLeg._path.childNodes[0],d.setAttribute("to",d.getAttribute("from")),d.setAttribute("from",0),d.beginElement(),d=b._spiderLeg._path.childNodes[1],d.setAttribute("from",.5),d.setAttribute("to",0),d.setAttribute("stroke-opacity",0),d.beginElement(),b._spiderLeg._path.setAttribute("stroke-opacity",0)));setTimeout(function(){var a=0;for(c=i.length-1;c>=0;c--)b=i[c],b._spiderLeg&&a++;for(c=i.length-1;c>=0;c--)b=i[c],b._spiderLeg&&(b.setOpacity&&(b.setOpacity(1),b.setZIndexOffset(0)),a>1&&g.removeLayer(b),f.removeLayer(b._spiderLeg),delete b._spiderLeg);e._animationEnd()},200)}}:{_animationSpiderfy:function(a,b){var c,d,e,f,g=this._group,h=g._map,i=g._featureGroup;for(c=a.length-1;c>=0;c--)f=h.layerPointToLatLng(b[c]),d=a[c],d._preSpiderfyLatlng=d._latlng,d.setLatLng(f),d.setZIndexOffset&&d.setZIndexOffset(1e6),i.addLayer(d),e=new L.Polyline([this._latlng,f],{weight:1.5,color:"#222"}),h.addLayer(e),d._spiderLeg=e;this.setOpacity(.3),g.fire("spiderfied")},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerClusterGroup.include({_spiderfied:null,_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Path.SVG&&!L.Browser.touch&&this._map._initPathRoot()},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(a){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(a))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(a){this._spiderfied&&this._spiderfied.unspiderfy(a)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(a){a._spiderLeg&&(this._featureGroup.removeLayer(a),a.setOpacity(1),a.setZIndexOffset(0),this._map.removeLayer(a._spiderLeg),delete a._spiderLeg)}})}(window,document),function(){"use strict";L.HexbinLayer=L.Class.extend({includes:[L.Mixin.Events],options:{radius:10,opacity:.5,duration:200,lng:function(a){return a[0]},lat:function(a){return a[1]},value:function(a){return a.length},valueFloor:void 0,valueCeil:void 0,colorRange:["#f7fbff","#08306b"],onmouseover:void 0,onmouseout:void 0,click:void 0},initialize:function(a){L.setOptions(this,a),this._hexLayout=d3.hexbin().radius(this.options.radius).x(function(a){return a.point[0]}).y(function(a){return a.point[1]}),this._data=[],this._colorScale=d3.scale.linear().range(this.options.colorRange).clamp(!0)},onAdd:function(a){this._map=a,this._container=this._initContainer(),a.on({moveend:this._redraw},this),this._redraw()},onRemove:function(a){this._destroyContainer(),a.off({moveend:this._redraw},this),this._container=null,this._map=null},addTo:function(a){return a.addLayer(this),this},_initContainer:function(){var a=null;if(null==this._container){var b=this._map.getPanes().overlayPane;a=d3.select(b).append("svg").attr("class","leaflet-layer leaflet-zoom-hide")}return a},_destroyContainer:function(){null!=this._container&&this._container.remove()},_redraw:function(){var a=this;if(a._map){var b=a._data.map(function(b){var c=a.options.lng(b),d=a.options.lat(b),e=a._project([c,d]);return{o:b,point:e}}),c=this._map.getZoom(),d=2*this.options.radius,e=this._getBounds(b),f=e.max[0]-e.min[0]+2*d,g=e.max[1]-e.min[1]+2*d,h=e.min[1]-d,i=e.min[0]-d;this._hexLayout.size([f,g]),this._container.attr("width",f).attr("height",g).style("margin-left",i+"px").style("margin-top",h+"px");var j=this._container.selectAll("g.hexbin").data([c],function(a){return a});j.enter().append("g").attr("class",function(a){return"hexbin zoom-"+a}),j.attr("transform","translate("+-i+","+-h+")"),j.exit().remove(),this._createHexagons(j,b)}},_createHexagons:function(a,b){var c=this,d=c._hexLayout(b),e=d3.extent(d,function(a){return c.options.value(a)});null==e[0]&&(e[0]=0),null==e[1]&&(e[1]=0),null!=c.options.valueFloor&&(e[0]=c.options.valueFloor),null!=c.options.valueCeil&&(e[1]=c.options.valueCeil);var f=c._linearlySpace(e[0],e[1],c._colorScale.range().length);c._colorScale.domain(f);var g=a.selectAll("path.hexbin-hexagon").data(d,function(a){return a.i+":"+a.j});g.transition().duration(c.options.duration).attr("fill",function(a){return c._colorScale(c.options.value(a))}).attr("fill-opacity",c.options.opacity).attr("stroke-opacity",c.options.opacity),g.enter().append("path").attr("class","hexbin-hexagon").attr("d",function(a){return"M"+a.x+","+a.y+c._hexLayout.hexagon()}).attr("fill",function(a){return c._colorScale(c.options.value(a))}).attr("fill-opacity",.01).attr("stroke","#ffffff").attr("stroke-width",1).on("mouseover",function(a,b){
null!=c.options.onmouseover&&c.options.onmouseover(a,this,c)}).on("mouseout",function(a,b){null!=c.options.onmouseout&&c.options.onmouseout(a,this,c)}).on("click",function(a,b){null!=c.options.onclick&&c.options.onclick(a,this,c)}).transition().duration(c.options.duration).attr("fill-opacity",c.options.opacity).attr("stroke-opacity",c.options.opacity),g.exit().transition().duration(c.options.duration).attr("fill-opacity",.01).attr("stroke-opacity",.01).remove()},_project:function(a){var b=this._map.latLngToLayerPoint([a[1],a[0]]);return[b.x,b.y]},_getBounds:function(a){if(null==a||a.length<1)return{min:[0,0],max:[0,0]};var b=[[999,999],[-999,-999]];return a.forEach(function(a){var c=a.point[0],d=a.point[1];b[0][0]=Math.min(b[0][0],c),b[0][1]=Math.min(b[0][1],d),b[1][0]=Math.max(b[1][0],c),b[1][1]=Math.max(b[1][1],d)}),{min:b[0],max:b[1]}},_linearlySpace:function(a,b,c){for(var d=new Array(c),e=(b-a)/Math.max(c-1,1),f=0;c>f;++f)d[f]=a+f*e;return d},data:function(a){return this._data=null!=a?a:[],this._redraw(),this},colorScale:function(a){return void 0===a?this._colorScale:(this._colorScale=a,this._redraw(),this)},value:function(a){return void 0===a?this.options.value:(this.options.value=a,this._redraw(),this)},onmouseover:function(a){return this.options.onmouseover=a,this._redraw(),this},onmouseout:function(a){return this.options.onmouseout=a,this._redraw(),this},onclick:function(a){return this.options.onclick=a,this._redraw(),this}}),L.hexbinLayer=function(a){return new L.HexbinLayer(a)}}(),function(){"use strict";L.PingLayer=L.Class.extend({includes:[L.Mixin.Events],options:{lng:function(a){return a[0]},lat:function(a){return a[1]},fps:32,duration:800},_lastUpdate:Date.now(),_fps:0,_mapBounds:void 0,radiusScale:function(a){return void 0===a?this._radiusScale:(this._radiusScale=a,this)},opacityScale:function(a){return void 0===a?this._opacityScale:(this._opacityScale=a,this)},initialize:function(a){L.setOptions(this,a),this._radiusScale=d3.scale.pow().exponent(.35).domain([0,this.options.duration]).range([3,15]).clamp(!0),this._opacityScale=d3.scale.linear().domain([0,this.options.duration]).range([1,0]).clamp(!0)},onAdd:function(a){this._map=a,this._running=!1,this._container=this._initContainer(),this._updateContainer(),a.on({move:this._move},this)},onRemove:function(a){this._destroyContainer(),a.off({move:this._move},this),this._container=null,this._map=null,this._data=null},addTo:function(a){return a.addLayer(this),this},ping:function(a,b){if(this._add(a,b),this._expire(),!this._running&&this._data.length>0){this._running=!0,this._lastUpdate=Date.now();var c=this;d3.timer(function(){return c._update.apply(c)})}return this},getFps:function(){return this._fps},getCount:function(){return this._data.length},_initContainer:function(){var a=null;if(null==this._container){var b=this._map.getPanes().overlayPane;a=d3.select(b).append("svg").attr("class","leaflet-layer leaflet-zoom-hide")}return a},_updateContainer:function(){var a=this._getMapBounds();this._mapBounds=a,this._container.attr("width",a.width).attr("height",a.height).style("margin-left",a.left+"px").style("margin-top",a.top+"px")},_destroyContainer:function(){null!=this._container&&this._container.remove()},_getMapBounds:function(){var a=this._map.getBounds(),b=this._map.latLngToLayerPoint(a.getNorthEast()),c=this._map.latLngToLayerPoint(a.getSouthWest()),d={width:b.x-c.x,height:c.y-b.y,left:c.x,top:b.y};return d},_move:function(){this._updateContainer()},_add:function(a,b){null==this._data&&(this._data=[]);var c=[this.options.lat(a),this.options.lng(a)],d=this._map.latLngToLayerPoint(c),e=this._mapBounds,f={geo:c,x:d.x-e.left,y:d.y-e.top,ts:Date.now(),nts:0};f.c=this._container.append("circle").attr("class",null!=b?"ping "+b:"ping").attr("cx",f.x).attr("cy",f.y).attr("r",this.radiusScale().range()[0]),this._data.push(f)},_update:function(){var a=Date.now();null==this._data&&(this._data=[]);for(var b=-1,c=0;c<this._data.length;c++){var d=this._data[c],e=a-d.ts;this.options.duration<e?(d.c.remove(),b=c):d.nts<a&&(d.c.attr("r",this.radiusScale()(e)).attr("fill-opacity",this.opacityScale()(e)).attr("stroke-opacity",this.opacityScale()(e)),d.nts=Math.round(a+1e3/this.options.fps))}return b>-1&&this._data.splice(0,b+1),this._running=this._data.length>0,this._running&&(this._fps=1e3/(a-this._lastUpdate),this._lastUpdate=a),!this._running},_expire:function(){for(var a=-1,b=Date.now(),c=0;c<this._data.length;c++){var d=this._data[c],e=b-d.ts;if(!(this.options.duration<e))break;d.c.remove(),a=c}a>-1&&this._data.splice(0,a+1)}}),L.pingLayer=function(a){return new L.PingLayer(a)}}(),function(){function a(a){var b=a.split(/\n/);b.shift(),b.splice(-1,1);var c=b[0].length-b[0].trim().length,d=new RegExp(" {"+c+"}");return b=b.map(function(a){return a.match(d)&&(a=a.substring(c)),a}),b=b.join("\n")}$(window).scroll(function(){var a=$(document).scrollTop();$(".splash").css({"background-position":"0px -"+(a/3).toFixed(2)+"px"}),a>50?$("#home > .navbar").removeClass("navbar-transparent"):$("#home > .navbar").addClass("navbar-transparent")}),$("a[href='#']").click(function(a){a.preventDefault()});var b=$("<div id='source-button' class='btn btn-primary btn-xs'>&lt; &gt;</div>").click(function(){var b=$(this).parent().html();b=a(b),$("#source-modal pre").text(b),$("#source-modal").modal()});$('.bs-component [data-toggle="popover"]').popover(),$('.bs-component [data-toggle="tooltip"]').tooltip(),$(".bs-component").hover(function(){$(this).append(b),b.show()},function(){b.hide()})}(),function(a){var b={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},c=function(){var a=function(a){this._coordinator={},this._data=[],this._radi=[],this._min=0,this._max=1,this._xField=a.xField||a.defaultXField,this._yField=a.yField||a.defaultYField,this._valueField=a.valueField||a.defaultValueField,a.radius&&(this._cfgRadius=a.radius)},c=b.defaultRadius;return a.prototype={_organiseData:function(a,b){var d=a[this._xField],e=a[this._yField],f=this._radi,g=this._data,h=this._max,i=this._min,j=a[this._valueField]||1,k=a.radius||this._cfgRadius||c;return g[d]||(g[d]=[],f[d]=[]),g[d][e]?g[d][e]+=j:(g[d][e]=j,f[d][e]=k),g[d][e]>h?(b?this.setDataMax(g[d][e]):this._max=g[d][e],!1):{x:d,y:e,value:j,radius:k,min:i,max:h}},_unOrganizeData:function(){var a=[],b=this._data,c=this._radi;for(var d in b)for(var e in b[d])a.push({x:d,y:e,radius:c[d][e],value:b[d][e]});return{min:this._min,max:this._max,data:a}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var a=arguments[0],b=a.length;b--;)this.addData.call(this,a[b]);else{var c=this._organiseData(arguments[0],!0);c&&this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[c]})}return this},setData:function(a){var b=a.data,c=b.length;this._data=[],this._radi=[];for(var d=0;c>d;d++)this._organiseData(b[d],!1);return this._max=a.max,this._min=a.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(a){return this._max=a,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(a){return this._min=a,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(a){this._coordinator=a},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},a}(),d=function(){function a(a){var c=a.container,d=this.shadowCanvas=document.createElement("canvas"),e=this.canvas=a.canvas||document.createElement("canvas"),f=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(a.container)||{});e.className="heatmap-canvas",this._width=e.width=d.width=+f.width.replace(/px/,""),this._height=e.height=d.height=+f.height.replace(/px/,""),this.shadowCtx=d.getContext("2d"),this.ctx=e.getContext("2d"),e.style.cssText=d.style.cssText="position:absolute;left:0;top:0;",c.style.position="relative",c.appendChild(e),this._palette=b(a),this._templates={},this._setStyles(a)}var b=function(a){var b=a.gradient||a.defaultGradient,c=document.createElement("canvas"),d=c.getContext("2d");c.width=256,c.height=1;var e=d.createLinearGradient(0,0,256,1);for(var f in b)e.addColorStop(f,b[f]);return d.fillStyle=e,d.fillRect(0,0,256,1),d.getImageData(0,0,256,1).data},c=function(a,b){var c=document.createElement("canvas"),d=c.getContext("2d"),e=a,f=a;if(c.width=c.height=2*a,1==b)d.beginPath(),d.arc(e,f,a,0,2*Math.PI,!1),d.fillStyle="rgba(0,0,0,1)",d.fill();else{var g=d.createRadialGradient(e,f,a*b,e,f,a);g.addColorStop(0,"rgba(0,0,0,1)"),g.addColorStop(1,"rgba(0,0,0,0)"),d.fillStyle=g,d.fillRect(0,0,2*a,2*a)}return c},d=function(a){for(var b=[],c=a.min,d=a.max,e=a.radi,a=a.data,f=Object.keys(a),g=f.length;g--;)for(var h=f[g],i=Object.keys(a[h]),j=i.length;j--;){var k=i[j],l=a[h][k],m=e[h][k];b.push({x:h,y:k,value:l,radius:m})}return{min:c,max:d,data:b}};return a.prototype={renderPartial:function(a){this._drawAlpha(a),this._colorize()},renderAll:function(a){this._clear(),this._drawAlpha(d(a)),this._colorize()},_updateGradient:function(a){this._palette=b(a)},updateConfig:function(a){a.gradient&&this._updateGradient(a),this._setStyles(a)},setDimensions:function(a,b){this._width=a,this._height=b,this.canvas.width=this.shadowCanvas.width=a,this.canvas.height=this.shadowCanvas.height=b},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(a){this._blur=0==a.blur?0:a.blur||a.defaultBlur,a.backgroundColor&&(this.canvas.style.backgroundColor=a.backgroundColor),this._opacity=255*(a.opacity||0),this._maxOpacity=255*(a.maxOpacity||a.defaultMaxOpacity),this._minOpacity=255*(a.minOpacity||a.defaultMinOpacity),this._useGradientOpacity=!!a.useGradientOpacity},_drawAlpha:function(a){for(var b=this._min=a.min,d=this._max=a.max,a=a.data||[],e=a.length,f=1-this._blur;e--;){var g,h=a[e],i=h.x,j=h.y,k=h.radius,l=Math.min(h.value,d),m=i-k,n=j-k,o=this.shadowCtx;this._templates[k]?g=this._templates[k]:this._templates[k]=g=c(k,f),o.globalAlpha=(l-b)/(d-b),o.drawImage(g,m,n),m<this._renderBoundaries[0]&&(this._renderBoundaries[0]=m),n<this._renderBoundaries[1]&&(this._renderBoundaries[1]=n),m+2*k>this._renderBoundaries[2]&&(this._renderBoundaries[2]=m+2*k),n+2*k>this._renderBoundaries[3]&&(this._renderBoundaries[3]=n+2*k)}},_colorize:function(){var a=this._renderBoundaries[0],b=this._renderBoundaries[1],c=this._renderBoundaries[2]-a,d=this._renderBoundaries[3]-b,e=this._width,f=this._height,g=this._opacity,h=this._maxOpacity,i=this._minOpacity,j=this._useGradientOpacity;0>a&&(a=0),0>b&&(b=0),a+c>e&&(c=e-a),b+d>f&&(d=f-b);for(var k=this.shadowCtx.getImageData(a,b,c,d),l=k.data,m=l.length,n=this._palette,o=3;m>o;o+=4){var p=l[o],q=4*p;if(q){var r;r=g>0?g:h>p?i>p?i:p:h,l[o-3]=n[q],l[o-2]=n[q+1],l[o-1]=n[q+2],l[o]=j?n[q+3]:r}}k.data=l,this.ctx.putImageData(k,a,b),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(a){var b,c=this.shadowCtx,d=c.getImageData(a.x,a.y,1,1),e=d.data[3],f=this._max,g=this._min;return b=Math.abs(f-g)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},a}(),e=function(){var a=!1;return"canvas2d"===b.defaultRenderer&&(a=d),a}(),f={merge:function(){for(var a={},b=arguments.length,c=0;b>c;c++){var d=arguments[c];for(var e in d)a[e]=d[e]}return a}},g=function(){function a(){var a=this._config=f.merge(b,arguments[0]||{});if(this._coordinator=new d,a.plugin){var h=a.plugin;if(!b.plugins[h])throw new Error("Plugin '"+h+"' not found. Maybe it was not registered.");var i=b.plugins[h];this._renderer=new i.renderer(a),this._store=new i.store(a)}else this._renderer=new e(a),this._store=new c(a);g(this)}var d=function(){function a(){this.cStore={}}return a.prototype={on:function(a,b,c){var d=this.cStore;d[a]||(d[a]=[]),d[a].push(function(a){return b.call(c,a)})},emit:function(a,b){var c=this.cStore;if(c[a])for(var d=c[a].length,e=0;d>e;e++){var f=c[a][e];f(b)}}},a}(),g=function(a){var b=a._renderer,c=a._coordinator,d=a._store;c.on("renderpartial",b.renderPartial,b),c.on("renderall",b.renderAll,b),c.on("extremachange",function(b){a._config.onExtremaChange&&a._config.onExtremaChange({min:b.min,max:b.max,gradient:a._config.gradient||a._config.defaultGradient})}),d.setCoordinator(c)};return a.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(a){return this._config=f.merge(this._config,a),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(a){return this._store.getValueAt?this._store.getValueAt(a):this._renderer.getValueAt?this._renderer.getValueAt(a):null}},a}(),h={create:function(a){return new g(a)},register:function(a,c){b.plugins[a]=c}};a.h337=h}(this||window);var HeatmapOverlay=L.Class.extend({initialize:function(a){this.cfg=a,this._el=L.DomUtil.create("div","leaflet-zoom-hide"),this._data=[],this._max=1,this.cfg.container=this._el},onAdd:function(a){var b=a.getSize();this._map=a,this._width=b.x,this._height=b.y,this._el.style.width=b.x+"px",this._el.style.height=b.y+"px",this._resetOrigin(),a.getPanes().overlayPane.appendChild(this._el),this._heatmap||(this._heatmap=h337.create(this.cfg)),a.on("viewreset",this._resetOrigin,this),a.on("dragend",this._draw,this),this._draw()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._el),a.off("viewreset",this._resetOrigin,this),a.off("dragend",this._draw,this)},_draw:function(){if(this._map){var a=this._map.latLngToContainerPoint(this._origin);this._el.style[HeatmapOverlay.CSS_TRANSFORM]="translate("+-Math.round(a.x)+"px,"+-Math.round(a.y)+"px)",this._update()}},_update:function(){var a,b,c;if(a=this._map.getBounds(),b=this._map.getZoom(),c=Math.pow(2,b),0!=this._data.length){for(var d={max:this._max},e=[],f=this.cfg.scaleRadius?c:1,g=0,h=this.cfg.valueField,i=this._data.length;i--;){var j=this._data[i],k=j[h],l=j.latlng;if(a.contains(l)){k>g&&(g=k);var m=this._map.latLngToContainerPoint(l),n={x:Math.round(m.x),y:Math.round(m.y)};n[h]=k;var o;o=j.radius?j.radius*f:(this.cfg.radius||2)*f,n.radius=o,e.push(n)}}this.cfg.useLocalExtrema&&(d.max=g),d.data=e,this._heatmap.setData(d)}},setData:function(a){this._max=a.max||this._max;for(var b=this.cfg.latField||"lat",c=this.cfg.lngField||"lng",d=this.cfg.valueField||"value",a=a.data,e=a.length,f=[];e--;){var g=a[e],h=new L.LatLng(g[b],g[c]),i={latlng:h};i[d]=g[d],g.radius&&(i.radius=g.radius),f.push(i)}this._data=f,this._draw()},addData:function(a){if(a.length>0)for(var b=a.length;b--;)this.addData(a[b]);else{var c=this.cfg.latField||"lat",d=this.cfg.lngField||"lng",e=this.cfg.valueField||"value",f=a,g=new L.LatLng(f[c],f[d]),h={latlng:g};h[e]=f[e],this._max=Math.max(this._max,h[e]),f.radius&&(h.radius=f.radius),this._data.push(h),this._draw()}},_resetOrigin:function(){this._origin=this._map.layerPointToLatLng(new L.Point(0,0)),this._draw()}});HeatmapOverlay.CSS_TRANSFORM=function(){for(var a=document.createElement("div"),b=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],c=0;c<b.length;c++){var d=b[c];if(void 0!==a.style[d])return d}return b[0]}(),function(){"use strict";L.TileLayer.Provider=L.TileLayer.extend({initialize:function(a,b){var c=L.TileLayer.Provider.providers,d=a.split("."),e=d[0],f=d[1];if(!c[e])throw"No such provider ("+e+")";var g={url:c[e].url,options:c[e].options};if(f&&"variants"in c[e]){if(!(f in c[e].variants))throw"No such variant of "+e+" ("+f+")";var h,i=c[e].variants[f];h="string"==typeof i?{variant:i}:i.options,g={url:i.url||g.url,options:L.Util.extend({},g.options,h)}}else"function"==typeof g.url&&(g.url=g.url(d.splice(1,d.length-1).join(".")));var j="file:"===window.location.protocol||g.options.forceHTTP;0===g.url.indexOf("//")&&j&&(g.url="http:"+g.url);var k=function(a){return-1===a.indexOf("{attribution.")?a:a.replace(/\{attribution.(\w*)\}/,function(a,b){return k(c[b].options.attribution)})};g.options.attribution=k(g.options.attribution);var l=L.Util.extend({},g.options,b);L.TileLayer.prototype.initialize.call(this,g.url,l)}}),L.TileLayer.Provider.providers={OpenStreetMap:{url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",options:{maxZoom:18}},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18}},France:{url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}}}},OpenSeaMap:{url:"http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'}},OpenTopoMap:{url:"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},Thunderforest:{url:"//{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, {attribution.OpenStreetMap}',variant:"cycle"},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport",maxZoom:19}},TransportDark:{options:{variant:"transport-dark",maxZoom:19}},Landscape:"landscape",Outdoors:"outdoors"}},OpenMapSurfer:{url:"http://openmapsurfer.uni-hd.de/tiles/{variant}/x={x}&y={y}&z={z}",options:{maxZoom:20,variant:"roads",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Roads:"roads",AdminBounds:{options:{variant:"adminb",maxZoom:19}},Grayscale:{options:{variant:"roadsg",maxZoom:19}}}},Hydda:{url:"http://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}",options:{type:"map",ext:"jpg",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"1234"},variants:{OSM:{},Aerial:{options:{type:"sat",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}},HybridOverlay:{options:{type:"hyb",ext:"png",opacity:.9}}}},MapBox:{url:function(a){return"//{s}.tiles.mapbox.com/v3/"+a+"/{z}/{x}/{y}.png"},options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd"}},Stamen:{url:"//stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.png",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{options:{variant:"watercolor",minZoom:1,maxZoom:16}},Terrain:{options:{variant:"terrain",minZoom:4,maxZoom:18,bounds:[[22,-132],[70,-56]]}},TerrainBackground:{options:{variant:"terrain-background",minZoom:4,maxZoom:18,bounds:[[22,-132],[70,-56]]}},TopOSMRelief:{options:{variant:"toposm-color-relief",ext:"jpg",bounds:[[22,-132],[51,-56]]}},TopOSMFeatures:{options:{variant:"toposm-features",bounds:[[22,-132],[51,-56]],opacity:.9}}}},Esri:{url:"//server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"//{s}.{base}.maps.cit.api.here.com/maptile/2.1/maptile/{mapID}/{variant}/{z}/{x}/{y}/256/png8?app_id={app_id}&app_code={app_code}",options:{attribution:'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},Acetate:{url:"http://a{s}.acetate.geoiq.com/tiles/{variant}/{z}/{x}/{y}.png",options:{attribution:"&copy;2012 Esri & Stamen, Data from OSM and Natural Earth",subdomains:"0123",minZoom:2,maxZoom:18,variant:"acetate-base"},variants:{basemap:"acetate-base",terrain:"terrain",all:"acetate-hillshading",foreground:"acetate-fg",roads:"acetate-roads",labels:"acetate-labels",hillshading:"hillshading"}},FreeMapSK:{url:"http://{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,subdomains:["t1","t2","t3","t4"],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"http://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels"}},HikeBike:{url:"http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"//maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,attribution:'Datenquelle: <a href="www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:"geolandbasemap",grau:"bmapgrau",overlay:"bmapoverlay",highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{variant:"bmaporthofoto30cm",format:"jpeg"}}}},NASAGIBS:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}",options:{attribution:'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{options:{variant:"VIIRS_CityLights_2012",maxZoom:8}},ModisTerraLSTDay:{options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,opacity:.75}},ModisTerraSnowCover:{options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,opacity:.75}},ModisTerraAOD:{options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,opacity:.75}},ModisTerraChlorophyll:{options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,opacity:.75}}}}},L.tileLayer.provider=function(a,b){return new L.TileLayer.Provider(a,b)}}(),function(a,b,c){var d=a.L;d.labelVersion="0.2.2-dev",d.Label=(d.Layer?d.Layer:d.Class).extend({includes:d.Mixin.Events,options:{className:"",clickable:!1,direction:"right",noHide:!1,offset:[12,-15],opacity:1,zoomAnimation:!0},initialize:function(a,b){d.setOptions(this,a),this._source=b,this._animated=d.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(a){this._map=a,this._pane=this.options.pane?a._panes[this.options.pane]:this._source instanceof d.Marker?a._panes.markerPane:a._panes.popupPane,this._container||this._initLayout(),this._pane.appendChild(this._container),this._initInteraction(),this._update(),this.setOpacity(this.options.opacity),a.on("moveend",this._onMoveEnd,this).on("viewreset",this._onViewReset,this),this._animated&&a.on("zoomanim",this._zoomAnimation,this),d.Browser.touch&&!this.options.noHide&&(d.DomEvent.on(this._container,"click",this.close,this),a.on("click",this.close,this))},onRemove:function(a){this._pane.removeChild(this._container),a.off({zoomanim:this._zoomAnimation,moveend:this._onMoveEnd,viewreset:this._onViewReset},this),this._removeInteraction(),this._map=null},setLatLng:function(a){return this._latlng=d.latLng(a),this._map&&this._updatePosition(),this},setContent:function(a){return this._previousContent=this._content,this._content=a,this._updateContent(),this},close:function(){var a=this._map;a&&(d.Browser.touch&&!this.options.noHide&&(d.DomEvent.off(this._container,"click",this.close),a.off("click",this.close,this)),a.removeLayer(this))},updateZIndex:function(a){this._zIndex=a,this._container&&this._zIndex&&(this._container.style.zIndex=a)},setOpacity:function(a){this.options.opacity=a,this._container&&d.DomUtil.setOpacity(this._container,a)},_initLayout:function(){this._container=d.DomUtil.create("div","leaflet-label "+this.options.className+" leaflet-zoom-animated"),this.updateZIndex(this._zIndex)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updatePosition(),this._container.style.visibility="")},_updateContent:function(){this._content&&this._map&&this._prevContent!==this._content&&"string"==typeof this._content&&(this._container.innerHTML=this._content,this._prevContent=this._content,this._labelWidth=this._container.offsetWidth)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},_setPosition:function(a){var b=this._map,c=this._container,e=b.latLngToContainerPoint(b.getCenter()),f=b.layerPointToContainerPoint(a),g=this.options.direction,h=this._labelWidth,i=d.point(this.options.offset);"right"===g||"auto"===g&&f.x<e.x?(d.DomUtil.addClass(c,"leaflet-label-right"),d.DomUtil.removeClass(c,"leaflet-label-left"),a=a.add(i)):(d.DomUtil.addClass(c,"leaflet-label-left"),d.DomUtil.removeClass(c,"leaflet-label-right"),a=a.add(d.point(-i.x-h,i.y))),d.DomUtil.setPosition(c,a)},_zoomAnimation:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPosition(b)},_onMoveEnd:function(){this._animated&&"auto"!==this.options.direction||this._updatePosition()},_onViewReset:function(a){a&&a.hard&&this._update()},_initInteraction:function(){if(this.options.clickable){var a=this._container,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];d.DomUtil.addClass(a,"leaflet-clickable"),d.DomEvent.on(a,"click",this._onMouseClick,this);for(var c=0;c<b.length;c++)d.DomEvent.on(a,b[c],this._fireMouseEvent,this)}},_removeInteraction:function(){if(this.options.clickable){var a=this._container,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];d.DomUtil.removeClass(a,"leaflet-clickable"),d.DomEvent.off(a,"click",this._onMouseClick,this);for(var c=0;c<b.length;c++)d.DomEvent.off(a,b[c],this._fireMouseEvent,this)}},_onMouseClick:function(a){this.hasEventListeners(a.type)&&d.DomEvent.stopPropagation(a),this.fire(a.type,{originalEvent:a})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a}),"contextmenu"===a.type&&this.hasEventListeners(a.type)&&d.DomEvent.preventDefault(a),"mousedown"!==a.type?d.DomEvent.stopPropagation(a):d.DomEvent.preventDefault(a);
}}),d.BaseMarkerMethods={showLabel:function(){return this.label&&this._map&&(this.label.setLatLng(this._latlng),this._map.showLabel(this.label)),this},hideLabel:function(){return this.label&&this.label.close(),this},setLabelNoHide:function(a){this._labelNoHide!==a&&(this._labelNoHide=a,a?(this._removeLabelRevealHandlers(),this.showLabel()):(this._addLabelRevealHandlers(),this.hideLabel()))},bindLabel:function(a,b){var c=this.options.icon?this.options.icon.options.labelAnchor:this.options.labelAnchor,e=d.point(c)||d.point(0,0);return e=e.add(d.Label.prototype.options.offset),b&&b.offset&&(e=e.add(b.offset)),b=d.Util.extend({offset:e},b),this._labelNoHide=b.noHide,this.label||(this._labelNoHide||this._addLabelRevealHandlers(),this.on("remove",this.hideLabel,this).on("move",this._moveLabel,this).on("add",this._onMarkerAdd,this),this._hasLabelHandlers=!0),this.label=new d.Label(b,this).setContent(a),this},unbindLabel:function(){return this.label&&(this.hideLabel(),this.label=null,this._hasLabelHandlers&&(this._labelNoHide||this._removeLabelRevealHandlers(),this.off("remove",this.hideLabel,this).off("move",this._moveLabel,this).off("add",this._onMarkerAdd,this)),this._hasLabelHandlers=!1),this},updateLabelContent:function(a){this.label&&this.label.setContent(a)},getLabel:function(){return this.label},_onMarkerAdd:function(){this._labelNoHide&&this.showLabel()},_addLabelRevealHandlers:function(){this.on("mouseover",this.showLabel,this).on("mouseout",this.hideLabel,this),d.Browser.touch&&this.on("click",this.showLabel,this)},_removeLabelRevealHandlers:function(){this.off("mouseover",this.showLabel,this).off("mouseout",this.hideLabel,this),d.Browser.touch&&this.off("click",this.showLabel,this)},_moveLabel:function(a){this.label.setLatLng(a.latlng)}},d.Icon.Default.mergeOptions({labelAnchor:new d.Point(9,-20)}),d.Marker.mergeOptions({icon:new d.Icon.Default}),d.Marker.include(d.BaseMarkerMethods),d.Marker.include({_originalUpdateZIndex:d.Marker.prototype._updateZIndex,_updateZIndex:function(a){var b=this._zIndex+a;this._originalUpdateZIndex(a),this.label&&this.label.updateZIndex(b)},_originalSetOpacity:d.Marker.prototype.setOpacity,setOpacity:function(a,b){this.options.labelHasSemiTransparency=b,this._originalSetOpacity(a)},_originalUpdateOpacity:d.Marker.prototype._updateOpacity,_updateOpacity:function(){var a=0===this.options.opacity?0:1;this._originalUpdateOpacity(),this.label&&this.label.setOpacity(this.options.labelHasSemiTransparency?this.options.opacity:a)},_originalSetLatLng:d.Marker.prototype.setLatLng,setLatLng:function(a){return this.label&&!this._labelNoHide&&this.hideLabel(),this._originalSetLatLng(a)}}),d.CircleMarker.mergeOptions({labelAnchor:new d.Point(0,0)}),d.CircleMarker.include(d.BaseMarkerMethods),d.Path.include({bindLabel:function(a,b){return this.label&&this.label.options===b||(this.label=new d.Label(b,this)),this.label.setContent(a),this._showLabelAdded||(this.on("mouseover",this._showLabel,this).on("mousemove",this._moveLabel,this).on("mouseout remove",this._hideLabel,this),d.Browser.touch&&this.on("click",this._showLabel,this),this._showLabelAdded=!0),this},unbindLabel:function(){return this.label&&(this._hideLabel(),this.label=null,this._showLabelAdded=!1,this.off("mouseover",this._showLabel,this).off("mousemove",this._moveLabel,this).off("mouseout remove",this._hideLabel,this)),this},updateLabelContent:function(a){this.label&&this.label.setContent(a)},_showLabel:function(a){this.label.setLatLng(a.latlng),this._map.showLabel(this.label)},_moveLabel:function(a){this.label.setLatLng(a.latlng)},_hideLabel:function(){this.label.close()}}),d.Map.include({showLabel:function(a){return this.addLayer(a)}}),d.FeatureGroup.include({clearLayers:function(){return this.unbindLabel(),this.eachLayer(this.removeLayer,this),this},bindLabel:function(a,b){return this.invoke("bindLabel",a,b)},unbindLabel:function(){return this.invoke("unbindLabel")},updateLabelContent:function(a){this.invoke("updateLabelContent",a)}})}(window,document),L.Icon.Label=L.Icon.extend({options:{labelClassName:""},initialize:function(a){L.Util.setOptions(this,a),L.Icon.prototype.initialize.call(this,this.options)},setLabelAsHidden:function(){this._labelHidden=!0},createIcon:function(){return this._createLabel(L.Icon.prototype.createIcon.call(this))},createShadow:function(){if(!this.options.shadowUrl)return null;var a=L.Icon.prototype.createShadow.call(this);return a&&(a.style.marginLeft=-this.options.wrapperAnchor.x+"px",a.style.marginTop=-this.options.wrapperAnchor.y+"px"),a},updateLabel:function(a,b){"DIV"===a.nodeName.toUpperCase()&&(a.childNodes[1].innerHTML=b,this.options.labelText=b)},showLabel:function(a){this._labelTextIsSet()&&(a.childNodes[1].style.display="block")},hideLabel:function(a){this._labelTextIsSet()&&(a.childNodes[1].style.display="none")},_createLabel:function(a){if(!this._labelTextIsSet())return a;var b=document.createElement("div"),c=document.createElement("span");return b.style.marginLeft=-this.options.wrapperAnchor.x+"px",b.style.marginTop=-this.options.wrapperAnchor.y+"px",b.className="leaflet-marker-icon-wrapper leaflet-zoom-animated",c.className="leaflet-marker-iconlabel "+this.options.labelClassName,c.innerHTML=this.options.labelText,c.style.marginLeft=this.options.labelAnchor.x+"px",c.style.marginTop=this.options.labelAnchor.y+"px",this._labelHidden&&(c.style.display="none",a.style.cursor="pointer"),a.style.marginLeft=this.options.iconAnchor.x+"px",a.style.marginTop=this.options.iconAnchor.y+"px",b.appendChild(a),b.appendChild(c),b},_labelTextIsSet:function(){return"undefined"!=typeof this.options.labelText&&null!==this.options.labelText}}),L.Icon.Label.Default=L.Icon.Label.extend({options:{labelAnchor:new L.Point(29,8),wrapperAnchor:new L.Point(13,41),iconAnchor:new L.Point(0,0),labelText:null,iconUrl:L.Icon.Default.imagePath+"/marker-icon.png",iconSize:new L.Point(25,41),popupAnchor:new L.Point(0,-33),shadowUrl:L.Icon.Default.imagePath+"/marker-shadow.png",shadowSize:new L.Point(41,41)}}),L.Marker.Label=L.Marker.extend({updateLabel:function(a){this.options.icon.updateLabel(this._icon,a)},_initIcon:function(){if(!(this.options.icon instanceof L.Icon.Label))throw new Error("Icon must be an instance of L.Icon.Label.");this.options.revealing&&this.options.icon.setLabelAsHidden(),L.Marker.prototype._initIcon.call(this)},_removeIcon:function(){this.options.revealing&&L.DomEvent.off(this._icon,"mouseover",this._showLabel).off(this._icon,"mouseout",this._hideLabel),L.Marker.prototype._removeIcon.call(this)},_initInteraction:function(){L.Marker.prototype._initInteraction.call(this),this.options.revealing&&L.DomEvent.on(this._icon,"mouseover",this._showLabel,this).on(this._icon,"mouseout",this._hideLabel,this)},_showLabel:function(){this.options.icon.showLabel(this._icon)},_hideLabel:function(){this.options.icon.hideLabel(this._icon)}}),function(){"use strict";angular.module("nvd3",[]).directive("nvd3",["nvd3Utils",function(a){return{restrict:"AE",scope:{data:"=",options:"=",api:"=?",events:"=?",config:"=?"},link:function(b,c,d){function e(a,c,d){a&&c&&angular.forEach(a,function(g,h){"_"===h[0]||("dispatch"===h?((void 0===c[h]||null===c[h])&&b._config.extended&&(c[h]={}),f(g,c[h])):"tooltip"===h?((void 0===c[h]||null===c[h])&&b._config.extended&&(c[h]={}),e(a[h],c[h],d)):"contentGenerator"===h?c[h]&&a[h](c[h]):-1===["axis","clearHighlights","defined","highlightPoint","nvPointerEventsClass","options","rangeBand","rangeBands","scatter","open","close"].indexOf(h)&&(void 0===c[h]||null===c[h]?b._config.extended&&(c[h]=g()):a[h](c[h])))})}function f(a,c){a&&c&&angular.forEach(a,function(d,e){void 0===c[e]||null===c[e]?b._config.extended&&(c[e]=d.on):a.on(e+"._",c[e])})}function g(d){var e=a.deepExtend(i(d),b.options[d]||{});b._config.extended&&(b.options[d]=e);var f=angular.element("<div></div>").html(e.html||"").addClass(d).addClass(e.className).removeAttr("style").css(e.css);e.html||f.text(e.text),e.enable&&("title"===d?c.prepend(f):"subtitle"===d?angular.element(c[0].querySelector(".title")).after(f):"caption"===d&&c.append(f))}function h(){var d=a.deepExtend(j(),b.options.styles||{});b._config.extended&&(b.options.styles=d),angular.forEach(d.classes,function(a,b){a?c.addClass(b):c.removeClass(b)}),c.removeAttr("style").css(d.css)}function i(a){switch(a){case"title":return{enable:!1,text:"Write Your Title",className:"h4",css:{width:b.options.chart.width+"px",textAlign:"center"}};case"subtitle":return{enable:!1,text:"Write Your Subtitle",css:{width:b.options.chart.width+"px",textAlign:"center"}};case"caption":return{enable:!1,text:"Figure 1. Write Your Caption text.",css:{width:b.options.chart.width+"px",textAlign:"center"}}}}function j(){return{classes:{"with-3d-shadow":!0,"with-transitions":!0,gallery:!1},css:{}}}var k={extended:!1,visible:!0,disabled:!1,autorefresh:!0,refreshDataOnly:!0,deepWatchOptions:!0,deepWatchData:!1,deepWatchConfig:!0,debounce:10};b._config=angular.extend(k,b.config),b.api={refresh:function(){b.api.updateWithOptions(b.options)},update:function(){b.chart&&b.chart.update()},updateWithOptions:function(c){b.api.clearElement(),angular.isDefined(c)!==!1&&b._config.visible&&(b.chart=nv.models[c.chart.type](),b.chart.id=Math.random().toString(36).substr(2,15),angular.forEach(b.chart,function(a,d){"_"===d[0]||["clearHighlights","highlightPoint","id","options","resizeHandler","state","open","close","tooltipContent"].indexOf(d)>=0||("dispatch"===d?((void 0===c.chart[d]||null===c.chart[d])&&b._config.extended&&(c.chart[d]={}),f(b.chart[d],c.chart[d])):["bars","bars1","bars2","boxplot","bullet","controls","discretebar","distX","distY","interactiveLayer","legend","lines","lines1","lines2","multibar","pie","scatter","sparkline","stack1","stack2","sunburst","tooltip","x2Axis","xAxis","y1Axis","y2Axis","y3Axis","y4Axis","yAxis","yAxis1","yAxis2"].indexOf(d)>=0||"stacked"===d&&"stackedAreaChart"===c.chart.type?((void 0===c.chart[d]||null===c.chart[d])&&b._config.extended&&(c.chart[d]={}),e(b.chart[d],c.chart[d],c.chart.type)):("xTickFormat"!==d&&"yTickFormat"!==d||"lineWithFocusChart"!==c.chart.type)&&("tooltips"===d&&"boxPlotChart"===c.chart.type||("tooltipXContent"!==d&&"tooltipYContent"!==d||"scatterChart"!==c.chart.type)&&(void 0===c.chart[d]||null===c.chart[d]?b._config.extended&&(c.chart[d]=a()):b.chart[d](c.chart[d]))))}),"sunburstChart"===c.chart.type?b.api.updateWithData(angular.copy(b.data)):b.api.updateWithData(b.data),(c.title||b._config.extended)&&g("title"),(c.subtitle||b._config.extended)&&g("subtitle"),(c.caption||b._config.extended)&&g("caption"),(c.styles||b._config.extended)&&h(),nv.addGraph(function(){return b.chart?(b.chart.resizeHandler&&b.chart.resizeHandler.clear(),b.chart.resizeHandler=nv.utils.windowResize(function(){b.chart&&b.chart.update&&b.chart.update()}),void 0!==c.chart.zoom&&["scatterChart","lineChart","candlestickBarChart","cumulativeLineChart","historicalBarChart","ohlcBarChart","stackedAreaChart"].indexOf(c.chart.type)>-1&&a.zoom(b,c),b.chart):void 0},c.chart.callback))},updateWithData:function(a){if(a){d3.select(c[0]).select("svg").remove();var d,e;b.svg=d3.select(c[0]).append("svg"),(d=b.options.chart.height)&&(isNaN(+d)||(d+="px"),b.svg.attr("height",d).style({height:d})),(e=b.options.chart.width)?(isNaN(+e)||(e+="px"),b.svg.attr("width",e).style({width:e})):b.svg.attr("width","100%").style({width:"100%"}),b.svg.datum(a).call(b.chart)}},clearElement:function(){if(c.find(".title").remove(),c.find(".subtitle").remove(),c.find(".caption").remove(),c.empty(),b.chart&&b.chart.tooltip&&b.chart.tooltip.id&&d3.select("#"+b.chart.tooltip.id()).remove(),nv.graphs&&b.chart)for(var a=nv.graphs.length-1;a>=0;a--)nv.graphs[a]&&nv.graphs[a].id===b.chart.id&&nv.graphs.splice(a,1);nv.tooltip&&nv.tooltip.cleanup&&nv.tooltip.cleanup(),b.chart&&b.chart.resizeHandler&&b.chart.resizeHandler.clear(),b.chart=null},getScope:function(){return b}},b.$watch("options",a.debounce(function(a){!b._config.disabled&&b._config.autorefresh&&b.api.refresh()},b._config.debounce,!0),b._config.deepWatchOptions),b.$watch("data",function(a,c){a!==c&&b.chart&&!b._config.disabled&&b._config.autorefresh&&(b._config.refreshDataOnly&&b.chart.update?b.chart.update():b.api.refresh())},b._config.deepWatchData),b.$watch("config",function(a,c){a!==c&&(b._config=angular.extend(k,a),b.api.refresh())},b._config.deepWatchConfig),angular.forEach(b.events,function(a,c){b.$on(c,function(c){return a(c,b)})}),c.on("$destroy",function(){b.api.clearElement()})}}}]).factory("nvd3Utils",function(){return{debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},deepExtend:function(a){var b=this;return angular.forEach(arguments,function(c){c!==a&&angular.forEach(c,function(c,d){a[d]&&a[d].constructor&&a[d].constructor===Object?b.deepExtend(a[d],c):a[d]=c})}),a},zoom:function(a,b){var c=b.chart.zoom,d="undefined"==typeof c.enabled||null===c.enabled?!0:c.enabled;if(d){var e,f,g,h,i=a.chart.xAxis.scale(),j=a.chart.yAxis.scale(),k=a.chart.xDomain||i.domain,l=a.chart.yDomain||j.domain,m=i.domain().slice(),n=j.domain().slice(),o=c.scale||1,p=c.translate||[0,0],q=c.scaleExtent||[1,10],r=c.useFixedDomain||!1,s=c.useNiceScale||!1,t=c.horizontalOff||!1,u=c.verticalOff||!1,v=c.unzoomEventType||"dblclick.zoom";s&&(i.nice(),j.nice()),e=function(a,b){return a[0]=Math.min(Math.max(a[0],b[0]),b[1]-b[1]/q[1]),a[1]=Math.max(b[0]+b[1]/q[1],Math.min(a[1],b[1])),a},g=function(){if(void 0!==c.zoomed){var b=c.zoomed(i.domain(),j.domain());t||k([b.x1,b.x2]),u||l([b.y1,b.y2])}else t||k(r?e(i.domain(),m):i.domain()),u||l(r?e(j.domain(),n):j.domain());a.chart.update()},h=function(){if(void 0!==c.unzoomed){var b=c.unzoomed(i.domain(),j.domain());t||k([b.x1,b.x2]),u||l([b.y1,b.y2])}else t||k(m),u||l(n);f.scale(o).translate(p),a.chart.update()},f=d3.behavior.zoom().x(i).y(j).scaleExtent(q).on("zoom",g),a.svg.call(f),f.scale(o).translate(p).event(a.svg),"none"!==v&&a.svg.on(v,h)}}}})}(),!function(a,b){"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module?module.exports=b():a.proj4=b()}(this,function(){var a,b,c;return function(d){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m=b&&b.split("/"),n=s.map,o=n&&n["*"]||{};if(a&&"."===a.charAt(0))if(b){for(m=m.slice(0,m.length-1),a=m.concat(a.split("/")),j=0;j<a.length;j+=1)if(l=a[j],"."===l)a.splice(j,1),j-=1;else if(".."===l){if(1===j&&(".."===a[2]||".."===a[0]))break;j>0&&(a.splice(j-1,2),j-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((m||o)&&n){for(c=a.split("/"),j=c.length;j>0;j-=1){if(d=c.slice(0,j).join("/"),m)for(k=m.length;k>0;k-=1)if(e=n[m.slice(0,k).join("/")],e&&(e=e[d])){f=e,g=j;break}if(f)break;!h&&o&&o[d]&&(h=o[d],i=j)}!f&&h&&(f=h,g=i),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function g(a,b){return function(){return n.apply(d,v.call(arguments,0).concat([a,b]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var b=r[a];delete r[a],t[a]=!0,m.apply(d,b)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(a,b,c,f){var h,k,l,m,n,s,u=[];if(f=f||a,"function"==typeof c){for(b=!b.length&&c.length?["require","exports","module"]:b,n=0;n<b.length;n+=1)if(m=o(b[n],f),k=m.f,"require"===k)u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=c.apply(q[a],u),a&&(h&&h.exports!==d&&h.exports!==q[a]?q[a]=h.exports:l===d&&s||(q[a]=l))}else a&&(q[a]=c)},a=b=n=function(a,b,c,e,f){return"string"==typeof a?p[a]?p[a](b):j(o(a,b).f):(a.splice||(s=a,b.splice?(a=b,b=c,c=null):a=d),b=b||function(){},"function"==typeof c&&(c=e,e=f),e?m(d,a,b,c):setTimeout(function(){m(d,a,b,c)},4),n)},n.config=function(a){return s=a,s.deps&&n(s.deps,s.callback),n},a._defined=q,c=function(a,b,c){b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},c.amd={jQuery:!0}}(),c("node_modules/almond/almond",function(){}),c("proj4/mgrs",["require","exports","module"],function(a,b){function c(a){return a*(Math.PI/180)}function d(a){return 180*(a/Math.PI)}function e(a){var b,d,e,f,h,i,j,k,l,m=a.lat,n=a.lon,o=6378137,p=.00669438,q=.9996,r=c(m),s=c(n);l=Math.floor((n+180)/6)+1,180===n&&(l=60),m>=56&&64>m&&n>=3&&12>n&&(l=32),m>=72&&84>m&&(n>=0&&9>n?l=31:n>=9&&21>n?l=33:n>=21&&33>n?l=35:n>=33&&42>n&&(l=37)),b=6*(l-1)-180+3,k=c(b),d=p/(1-p),e=o/Math.sqrt(1-p*Math.sin(r)*Math.sin(r)),f=Math.tan(r)*Math.tan(r),h=d*Math.cos(r)*Math.cos(r),i=Math.cos(r)*(s-k),j=o*((1-p/4-3*p*p/64-5*p*p*p/256)*r-(3*p/8+3*p*p/32+45*p*p*p/1024)*Math.sin(2*r)+(15*p*p/256+45*p*p*p/1024)*Math.sin(4*r)-35*p*p*p/3072*Math.sin(6*r));var t=q*e*(i+(1-f+h)*i*i*i/6+(5-18*f+f*f+72*h-58*d)*i*i*i*i*i/120)+5e5,u=q*(j+e*Math.tan(r)*(i*i/2+(5-f+9*h+4*h*h)*i*i*i*i/24+(61-58*f+f*f+600*h-330*d)*i*i*i*i*i*i/720));return 0>m&&(u+=1e7),{northing:Math.round(u),easting:Math.round(t),zoneNumber:l,zoneLetter:g(m)}}function f(a){var b=a.northing,c=a.easting,e=a.zoneLetter,g=a.zoneNumber;if(0>g||g>60)return null;var h,i,j,k,l,m,n,o,p,q,r=.9996,s=6378137,t=.00669438,u=(1-Math.sqrt(1-t))/(1+Math.sqrt(1-t)),v=c-5e5,w=b;"N">e&&(w-=1e7),o=6*(g-1)-180+3,h=t/(1-t),n=w/r,p=n/(s*(1-t/4-3*t*t/64-5*t*t*t/256)),q=p+(3*u/2-27*u*u*u/32)*Math.sin(2*p)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*p)+151*u*u*u/96*Math.sin(6*p),i=s/Math.sqrt(1-t*Math.sin(q)*Math.sin(q)),j=Math.tan(q)*Math.tan(q),k=h*Math.cos(q)*Math.cos(q),l=s*(1-t)/Math.pow(1-t*Math.sin(q)*Math.sin(q),1.5),m=v/(i*r);var x=q-i*Math.tan(q)/l*(m*m/2-(5+3*j+10*k-4*k*k-9*h)*m*m*m*m/24+(61+90*j+298*k+45*j*j-252*h-3*k*k)*m*m*m*m*m*m/720);x=d(x);var y=(m-(1+2*j+k)*m*m*m/6+(5-2*k+28*j-3*k*k+8*h+24*j*j)*m*m*m*m*m/120)/Math.cos(q);y=o+d(y);var z;if(a.accuracy){var A=f({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});z={top:A.lat,right:A.lon,bottom:x,left:y}}else z={lat:x,lon:y};return z}function g(a){var b="Z";return 84>=a&&a>=72?b="X":72>a&&a>=64?b="W":64>a&&a>=56?b="V":56>a&&a>=48?b="U":48>a&&a>=40?b="T":40>a&&a>=32?b="S":32>a&&a>=24?b="R":24>a&&a>=16?b="Q":16>a&&a>=8?b="P":8>a&&a>=0?b="N":0>a&&a>=-8?b="M":-8>a&&a>=-16?b="L":-16>a&&a>=-24?b="K":-24>a&&a>=-32?b="J":-32>a&&a>=-40?b="H":-40>a&&a>=-48?b="G":-48>a&&a>=-56?b="F":-56>a&&a>=-64?b="E":-64>a&&a>=-72?b="D":-72>a&&a>=-80&&(b="C"),b}function h(a,b){var c=""+a.easting,d=""+a.northing;return a.zoneNumber+a.zoneLetter+i(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function i(a,b,c){var d=j(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return k(e,f,d)}function j(a){var b=a%p;return 0===b&&(b=p),b}function k(a,b,c){var d=c-1,e=q.charCodeAt(d),f=r.charCodeAt(d),g=e+a-1,h=f+b,i=!1;g>w&&(g=g-w+s-1,i=!0),(g===t||t>e&&g>t||(g>t||t>e)&&i)&&g++,(g===u||u>e&&g>u||(g>u||u>e)&&i)&&(g++,g===t&&g++),g>w&&(g=g-w+s-1),h>v?(h=h-v+s-1,i=!0):i=!1,(h===t||t>f&&h>t||(h>t||t>f)&&i)&&h++,(h===u||u>f&&h>u||(h>u||u>f)&&i)&&(h++,h===t&&h++),h>v&&(h=h-v+s-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function l(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var b,c=a.length,d=null,e="",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3>c)throw"MGRSPoint bad conversion from: "+a;var h=a.charAt(f++);if("A">=h||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+a;d=a.substring(f,f+=2);for(var i=j(g),k=m(d.charAt(0),i),l=n(d.charAt(1),i);l<o(h);)l+=2e6;var p=c-f;if(0!==p%2)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var q,r,s,t,u,v=p/2,w=0,x=0;return v>0&&(q=1e5/Math.pow(10,v),r=a.substring(f,f+v),w=parseFloat(r)*q,s=a.substring(f+v),x=parseFloat(s)*q),t=w+k,u=x+l,{easting:t,northing:u,zoneLetter:h,zoneNumber:g,accuracy:q}}function m(a,b){for(var c=q.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===t&&c++,c===u&&c++,c>w){if(e)throw"Bad character: "+a;c=s,e=!0}d+=1e5}return d}function n(a,b){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var c=r.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===t&&c++,c===u&&c++,c>v){if(e)throw"Bad character: "+a;c=s,e=!0}d+=1e5}return d}function o(a){var b;switch(a){case"C":b=11e5;break;case"D":b=2e6;break;case"E":b=28e5;break;case"F":b=37e5;break;case"G":b=46e5;break;case"H":b=55e5;break;case"J":b=64e5;break;case"K":b=73e5;break;case"L":b=82e5;break;case"M":b=91e5;break;case"N":b=0;break;case"P":b=8e5;break;case"Q":b=17e5;break;case"R":b=26e5;break;case"S":b=35e5;break;case"T":b=44e5;break;case"U":b=53e5;break;case"V":b=62e5;break;case"W":b=7e6;break;case"X":b=79e5;break;default:b=-1}if(b>=0)return b;throw"Invalid zone letter: "+a}var p=6,q="AJSAJS",r="AFAFAF",s=65,t=73,u=79,v=86,w=90;b.forward=function(a,b){return b=b||5,h(e({lat:a.lat,lon:a.lon}),b)},b.inverse=function(a){var b=f(l(a.toUpperCase()));return[b.left,b.bottom,b.right,b.top]}}),c("proj4/Point",["./mgrs"],function(a){function b(a,c,d){if(!(this instanceof b))return new b(a,c,d);if("object"==typeof a)this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("string"==typeof a&&"undefined"==typeof c){var e=a.split(",");this.x=parseFloat(e[0]),this.y=parseFloat(e[1]),this.z=parseFloat(e[2])||0}else this.x=a,this.y=c,this.z=d||0;this.clone=function(){return new b(this.x,this.y,this.z)},this.toString=function(){return"x="+this.x+",y="+this.y},this.toShortString=function(){return this.x+", "+this.y}}return b.fromMGRS=function(c){var d=a.inverse(c);return new b((d[2]+d[0])/2,(d[3]+d[1])/2)},b.prototype.toMGRS=function(b){return a.forward({lon:this.x,lat:this.y},b)},b}),c("proj4/extend",[],function(){return function(a,b){a=a||{};var c,d;if(!b)return a;for(d in b)c=b[d],void 0!==c&&(a[d]=c);return a}}),c("proj4/common",[],function(){var a={PI:3.141592653589793,HALF_PI:1.5707963267948966,TWO_PI:6.283185307179586,FORTPI:.7853981633974483,R2D:57.29577951308232,D2R:.017453292519943295,SEC_TO_RAD:484813681109536e-20,EPSLN:1e-10,MAX_ITER:20,COS_67P5:.3826834323650898,AD_C:1.0026,PJD_UNKNOWN:0,PJD_3PARAM:1,PJD_7PARAM:2,PJD_GRIDSHIFT:3,PJD_WGS84:4,PJD_NODATUM:5,SRS_WGS84_SEMIMAJOR:6378137,SRS_WGS84_ESQUARED:.006694379990141316,SIXTH:.16666666666666666,RA4:.04722222222222222,RA6:.022156084656084655,RV4:.06944444444444445,RV6:.04243827160493827,msfnz:function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)},tsfnz:function(a,b,c){var d=a*c,e=.5*a;return d=Math.pow((1-d)/(1+d),e),Math.tan(.5*(this.HALF_PI-b))/d},phi2z:function(a,b){for(var c,d,e=.5*a,f=this.HALF_PI-2*Math.atan(b),g=0;15>=g;g++)if(c=a*Math.sin(f),d=this.HALF_PI-2*Math.atan(b*Math.pow((1-c)/(1+c),e))-f,f+=d,Math.abs(d)<=1e-10)return f;return-9999},qsfnz:function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b},iqsfnz:function(b,c){var d=1-(1-b*b)/(2*b)*Math.log((1-b)/(1+b));if(Math.abs(Math.abs(c)-d)<1e-6)return 0>c?-1*a.HALF_PI:a.HALF_PI;for(var e,f,g,h,i=Math.asin(.5*c),j=0;30>j;j++)if(f=Math.sin(i),g=Math.cos(i),h=b*f,e=Math.pow(1-h*h,2)/(2*g)*(c/(1-b*b)-f/(1-h*h)+.5/b*Math.log((1-h)/(1+h))),i+=e,Math.abs(e)<=1e-10)return i;return NaN},asinz:function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)},e0fn:function(a){return 1-.25*a*(1+a/16*(3+1.25*a))},e1fn:function(a){return.375*a*(1+.25*a*(1+.46875*a))},e2fn:function(a){return.05859375*a*a*(1+.75*a)},e3fn:function(a){return a*a*a*(35/3072)},mlfn:function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)},imlfn:function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;15>h;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return NaN},srat:function(a,b){return Math.pow((1-a)/(1+a),b)},sign:function(a){return 0>a?-1:1},adjust_lon:function(a){return a=Math.abs(a)<this.PI?a:a-this.sign(a)*this.TWO_PI},adjust_lat:function(a){return a=Math.abs(a)<this.HALF_PI?a:a-this.sign(a)*this.PI},latiso:function(a,b,c){if(Math.abs(b)>this.HALF_PI)return Number.NaN;if(b===this.HALF_PI)return Number.POSITIVE_INFINITY;if(b===-1*this.HALF_PI)return Number.NEGATIVE_INFINITY;var d=a*c;return Math.log(Math.tan((this.HALF_PI+b)/2))+a*Math.log((1-d)/(1+d))/2},fL:function(a,b){return 2*Math.atan(a*Math.exp(b))-this.HALF_PI},invlatiso:function(a,b){var c=this.fL(1,b),d=0,e=0;do d=c,e=a*Math.sin(d),c=this.fL(Math.exp(a*Math.log((1+e)/(1-e))/2),b);while(Math.abs(c-d)>1e-12);return c},sinh:function(a){var b=Math.exp(a);return b=(b-1/b)/2},cosh:function(a){var b=Math.exp(a);return b=(b+1/b)/2},tanh:function(a){var b=Math.exp(a);return b=(b-1/b)/(b+1/b)},asinh:function(a){var b=a>=0?1:-1;return b*Math.log(Math.abs(a)+Math.sqrt(a*a+1))},acosh:function(a){return 2*Math.log(Math.sqrt((a+1)/2)+Math.sqrt((a-1)/2))},atanh:function(a){return Math.log((a-1)/(a+1))/2},gN:function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)},pj_enfn:function(a){var b=[];b[0]=this.C00-a*(this.C02+a*(this.C04+a*(this.C06+a*this.C08))),b[1]=a*(this.C22-a*(this.C04+a*(this.C06+a*this.C08)));var c=a*a;return b[2]=c*(this.C44-a*(this.C46+a*this.C48)),c*=a,b[3]=c*(this.C66-a*this.C68),b[4]=c*a*this.C88,b},pj_mlfn:function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))},pj_inv_mlfn:function(b,c,d){for(var e=1/(1-c),f=b,g=a.MAX_ITER;g;--g){var h=Math.sin(f),i=1-c*h*h;if(i=(this.pj_mlfn(f,h,Math.cos(f),d)-b)*i*Math.sqrt(i)*e,f-=i,Math.abs(i)<a.EPSLN)return f}return f},nad_intr:function(a,b){var c,d={x:(a.x-1e-7)/b.del[0],y:(a.y-1e-7)/b.del[1]},e={x:Math.floor(d.x),y:Math.floor(d.y)},f={x:d.x-1*e.x,y:d.y-1*e.y},g={x:Number.NaN,y:Number.NaN};if(e.x<0){if(!(-1===e.x&&f.x>.99999999999))return g;e.x++,f.x=0}else if(c=e.x+1,c>=b.lim[0]){if(!(c===b.lim[0]&&f.x<1e-11))return g;e.x--,f.x=1}if(e.y<0){if(!(-1===e.y&&f.y>.99999999999))return g;e.y++,f.y=0}else if(c=e.y+1,c>=b.lim[1]){if(!(c===b.lim[1]&&f.y<1e-11))return g;e.y++,f.y=1}c=e.y*b.lim[0]+e.x;var h={x:b.cvs[c][0],y:b.cvs[c][1]};c++;var i={x:b.cvs[c][0],y:b.cvs[c][1]};c+=b.lim[0];var j={x:b.cvs[c][0],y:b.cvs[c][1]};c--;var k={x:b.cvs[c][0],y:b.cvs[c][1]},l=f.x*f.y,m=f.x*(1-f.y),n=(1-f.x)*(1-f.y),o=(1-f.x)*f.y;return g.x=n*h.x+m*i.x+o*k.x+l*j.x,g.y=n*h.y+m*i.y+o*k.y+l*j.y,g},nad_cvt:function(b,c,d){var e={x:Number.NaN,y:Number.NaN};if(isNaN(b.x))return e;var f={x:b.x,y:b.y};f.x-=d.ll[0],f.y-=d.ll[1],f.x=a.adjust_lon(f.x-a.PI)+a.PI;var g=a.nad_intr(f,d);if(c){if(isNaN(g.x))return e;g.x=f.x+g.x,g.y=f.y-g.y;var h,i,j=9,k=1e-12;do{if(i=a.nad_intr(g,d),isNaN(i.x)){this.reportError("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:g.x-i.x-f.x,y:g.y+i.y-f.y},g.x-=h.x,g.y-=h.y}while(j--&&Math.abs(h.x)>k&&Math.abs(h.y)>k);if(0>j)return this.reportError("Inverse grid shift iterator failed to converge."),e;e.x=a.adjust_lon(g.x+d.ll[0]),e.y=g.y+d.ll[1]}else isNaN(g.x)||(e.x=b.x-g.x,e.y=b.y+g.y);return e},C00:1,C02:.25,C04:.046875,C06:.01953125,C08:.01068115234375,C22:.75,C44:.46875,C46:.013020833333333334,C48:.007120768229166667,C66:.3645833333333333,C68:.005696614583333333,C88:.3076171875};return a}),c("proj4/constants",[],function(){var a={};return a.PrimeMeridian={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},a.Ellipsoid={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},"APL4.":{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS72:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},a.Datum={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",
ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"}},a.Datum.OSB36=a.Datum.OSGB36,a.wktProjections={"Lambert Tangential Conformal Conic Projection":"lcc",Lambert_Conformal_Conic:"lcc",Lambert_Conformal_Conic_2SP:"lcc",Mercator:"merc","Popular Visualisation Pseudo Mercator":"merc",Mercator_1SP:"merc",Transverse_Mercator:"tmerc","Transverse Mercator":"tmerc","Lambert Azimuthal Equal Area":"laea","Universal Transverse Mercator System":"utm",Hotine_Oblique_Mercator:"omerc","Hotine Oblique Mercator":"omerc",Hotine_Oblique_Mercator_Azimuth_Natural_Origin:"omerc",Hotine_Oblique_Mercator_Azimuth_Center:"omerc",Van_der_Grinten_I:"vandg",VanDerGrinten:"vandg",Stereographic_North_Pole:"sterea",Oblique_Stereographic:"sterea",Polar_Stereographic:"sterea",Polyconic:"poly",New_Zealand_Map_Grid:"nzmg",Miller_Cylindrical:"mill",Krovak:"krovak",Equirectangular:"eqc",Equidistant_Cylindrical:"eqc",Cassini:"cass",Cassini_Soldner:"cass",Azimuthal_Equidistant:"aeqd",Albers_Conic_Equal_Area:"aea",Albers:"aea",Mollweide:"moll",Lambert_Azimuthal_Equal_Area:"laea",Sinusoidal:"sinu",Equidistant_Conic:"eqdc",Mercator_Auxiliary_Sphere:"merc"},a.grids={"null":{ll:[-3.14159265,-1.57079633],del:[3.14159265,1.57079633],lim:[3,3],count:9,cvs:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]}},a}),c("proj4/global",[],function(){return function(a){a("WGS84","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]}}),c("proj4/projString",["./common","./constants"],function(a,b){return function(c){var d={},e={};c.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).forEach(function(a){var b=a.split("=");"@null"!==b[1]&&(b.push(!0),e[b[0].toLowerCase()]=b[1])});var f,g,h,i={proj:"projName",datum:"datumCode",rf:function(a){d.rf=parseFloat(a,10)},lat_0:function(b){d.lat0=b*a.D2R},lat_1:function(b){d.lat1=b*a.D2R},lat_2:function(b){d.lat2=b*a.D2R},lat_ts:function(b){d.lat_ts=b*a.D2R},lon_0:function(b){d.long0=b*a.D2R},lon_1:function(b){d.long1=b*a.D2R},lon_2:function(b){d.long2=b*a.D2R},alpha:function(b){d.alpha=parseFloat(b)*a.D2R},lonc:function(b){d.longc=b*a.D2R},x_0:function(a){d.x0=parseFloat(a,10)},y_0:function(a){d.y0=parseFloat(a,10)},k_0:function(a){d.k0=parseFloat(a,10)},k:function(a){d.k0=parseFloat(a,10)},r_a:function(){d.R_A=!0},zone:function(a){d.zone=parseInt(a,10)},south:function(){d.utmSouth=!0},towgs84:function(a){d.datum_params=a.split(",").map(function(a){return parseFloat(a,10)})},to_meter:function(a){d.to_meter=parseFloat(a,10)},from_greenwich:function(b){d.from_greenwich=b*a.D2R},pm:function(c){d.from_greenwich=(b.PrimeMeridian[c]?b.PrimeMeridian[c]:parseFloat(c,10))*a.D2R},axis:function(a){var b="ewnsud";3===a.length&&-1!==b.indexOf(a.substr(0,1))&&-1!==b.indexOf(a.substr(1,1))&&-1!==b.indexOf(a.substr(2,1))&&(d.axis=a)}};for(f in e)g=e[f],f in i?(h=i[f],"function"==typeof h?h(g):d[h]=g):d[f]=g;return d}}),c("proj4/wkt",["./extend","./constants","./common"],function(a,b,c){function d(b,c,d){b[c]=d.map(function(a){var b={};return e(a,b),b}).reduce(function(b,c){return a(b,c)},{})}function e(a,b){var c;return Array.isArray(a)?(c=a.shift(),"PARAMETER"===c&&(c=a.shift()),void(1===a.length?Array.isArray(a[0])?(b[c]={},e(a[0],b[c])):b[c]=a[0]:a.length?"TOWGS84"===c?b[c]=a:(b[c]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(c)>-1?(b[c]={name:a[0].toLowerCase(),convert:a[1]},3===a.length&&(b[c].auth=a[2])):"SPHEROID"===c?(b[c]={name:a[0],a:a[1],rf:a[2]},4===a.length&&(b[c].auth=a[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(c)>-1?(a[0]=["name",a[0]],d(b,c,a)):a.every(function(a){return Array.isArray(a)})?d(b,c,a):e(a,b[c])):b[c]=!0)):void(b[a]=!0)}function f(a,b){var c=b[0],d=b[1];!(c in a)&&d in a&&(a[c]=a[d],3===b.length&&(a[c]=b[2](a[c])))}function g(a){return a*c.D2R}function h(a){function c(b){var c=a.to_meter||1;return parseFloat(b,10)*c}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):a.projName=b.wktProjections[a.PROJECTION],a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&(a.to_meter=parseFloat(a.UNIT.convert,10))),a.GEOGCS&&(a.datumCode=a.GEOGCS.DATUM?a.GEOGCS.DATUM.name.toLowerCase():a.GEOGCS.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===a.datumCode||"new_zealand_1949"===a.datumCode)&&(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),a.GEOGCS.DATUM&&a.GEOGCS.DATUM.SPHEROID&&(a.ellps=a.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=a.GEOGCS.DATUM.SPHEROID.a,a.rf=parseFloat(a.GEOGCS.DATUM.SPHEROID.rf,10))),a.b&&!isFinite(a.b)&&(a.b=a.a);var d=function(b){return f(a,b)},e=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",g],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",g],["x0","false_easting",c],["y0","false_northing",c],["long0","central_meridian",g],["lat0","latitude_of_origin",g],["lat0","standard_parallel_1",g],["lat1","standard_parallel_1",g],["lat2","standard_parallel_2",g],["alpha","azimuth",g],["srsCode","name"]];e.forEach(d),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.PROJECTION&&"Lambert_Azimuthal_Equal_Area"!==a.PROJECTION||(a.long0=a.longc)}return function(b,c){var d=JSON.parse((","+b).replace(/\,([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\,([A-Z_0-9]+?)\]/g,',"$1"]')),f=d.shift(),g=d.shift();d.unshift(["name",g]),d.unshift(["type",f]),d.unshift("output");var i={};return e(d,i),h(i.output),a(c,i.output)}}),c("proj4/defs",["./common","./constants","./global","./projString","./wkt"],function(a,b,c,d,e){function f(a){var b=this;if(2===arguments.length)f[a]="+"===arguments[1][0]?d(arguments[1]):e(arguments[1]);else if(1===arguments.length)return Array.isArray(a)?a.map(function(a){Array.isArray(a)?f.apply(b,a):f(a)}):void("string"==typeof a||("EPSG"in a?f["EPSG:"+a.EPSG]=a:"ESRI"in a?f["ESRI:"+a.ESRI]=a:"IAU2000"in a?f["IAU2000:"+a.IAU2000]=a:console.log(a)))}return c(f),f}),c("proj4/datum",["./common"],function(a){var b=function(c){if(!(this instanceof b))return new b(c);if(this.datum_type=a.PJD_WGS84,c){if(c.datumCode&&"none"===c.datumCode&&(this.datum_type=a.PJD_NODATUM),c.datum_params){for(var d=0;d<c.datum_params.length;d++)c.datum_params[d]=parseFloat(c.datum_params[d]);(0!==c.datum_params[0]||0!==c.datum_params[1]||0!==c.datum_params[2])&&(this.datum_type=a.PJD_3PARAM),c.datum_params.length>3&&(0!==c.datum_params[3]||0!==c.datum_params[4]||0!==c.datum_params[5]||0!==c.datum_params[6])&&(this.datum_type=a.PJD_7PARAM,c.datum_params[3]*=a.SEC_TO_RAD,c.datum_params[4]*=a.SEC_TO_RAD,c.datum_params[5]*=a.SEC_TO_RAD,c.datum_params[6]=c.datum_params[6]/1e6+1)}this.datum_type=c.grids?a.PJD_GRIDSHIFT:this.datum_type,this.a=c.a,this.b=c.b,this.es=c.es,this.ep2=c.ep2,this.datum_params=c.datum_params,this.datum_type===a.PJD_GRIDSHIFT&&(this.grids=c.grids)}};return b.prototype={compare_datums:function(b){return this.datum_type!==b.datum_type?!1:this.a!==b.a||Math.abs(this.es-b.es)>5e-11?!1:this.datum_type===a.PJD_3PARAM?this.datum_params[0]===b.datum_params[0]&&this.datum_params[1]===b.datum_params[1]&&this.datum_params[2]===b.datum_params[2]:this.datum_type===a.PJD_7PARAM?this.datum_params[0]===b.datum_params[0]&&this.datum_params[1]===b.datum_params[1]&&this.datum_params[2]===b.datum_params[2]&&this.datum_params[3]===b.datum_params[3]&&this.datum_params[4]===b.datum_params[4]&&this.datum_params[5]===b.datum_params[5]&&this.datum_params[6]===b.datum_params[6]:this.datum_type===a.PJD_GRIDSHIFT||b.datum_type===a.PJD_GRIDSHIFT?this.nadgrids===b.nadgrids:!0},geodetic_to_geocentric:function(b){var c,d,e,f,g,h,i,j=b.x,k=b.y,l=b.z?b.z:0,m=0;if(k<-a.HALF_PI&&k>-1.001*a.HALF_PI)k=-a.HALF_PI;else if(k>a.HALF_PI&&k<1.001*a.HALF_PI)k=a.HALF_PI;else if(k<-a.HALF_PI||k>a.HALF_PI)return null;return j>a.PI&&(j-=2*a.PI),g=Math.sin(k),i=Math.cos(k),h=g*g,f=this.a/Math.sqrt(1-this.es*h),c=(f+l)*i*Math.cos(j),d=(f+l)*i*Math.sin(j),e=(f*(1-this.es)+l)*g,b.x=c,b.y=d,b.z=e,m},geocentric_to_geodetic:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=1e-12,u=t*t,v=30,w=b.x,x=b.y,y=b.z?b.z:0;if(o=!1,c=Math.sqrt(w*w+x*x),d=Math.sqrt(w*w+x*x+y*y),c/this.a<t){if(o=!0,q=0,d/this.a<t)return r=a.HALF_PI,void(s=-this.b)}else q=Math.atan2(x,w);e=y/d,f=c/d,g=1/Math.sqrt(1-this.es*(2-this.es)*f*f),j=f*(1-this.es)*g,k=e*g,p=0;do p++,i=this.a/Math.sqrt(1-this.es*k*k),s=c*j+y*k-i*(1-this.es*k*k),h=this.es*i/(i+s),g=1/Math.sqrt(1-h*(2-h)*f*f),l=f*(1-h)*g,m=e*g,n=m*j-l*k,j=l,k=m;while(n*n>u&&v>p);return r=Math.atan(m/Math.abs(l)),b.x=q,b.y=r,b.z=s,b},geocentric_to_geodetic_noniter:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=b.x,u=b.y,v=b.z?b.z:0;if(t=parseFloat(t),u=parseFloat(u),v=parseFloat(v),s=!1,0!==t)c=Math.atan2(u,t);else if(u>0)c=a.HALF_PI;else if(0>u)c=-a.HALF_PI;else if(s=!0,c=0,v>0)d=a.HALF_PI;else{if(!(0>v))return d=a.HALF_PI,void(e=-this.b);d=-a.HALF_PI}return g=t*t+u*u,f=Math.sqrt(g),h=v*a.AD_C,j=Math.sqrt(h*h+g),l=h/j,n=f/j,m=l*l*l,i=v+this.b*this.ep2*m,r=f-this.a*this.es*n*n*n,k=Math.sqrt(i*i+r*r),o=i/k,p=r/k,q=this.a/Math.sqrt(1-this.es*o*o),e=p>=a.COS_67P5?f/p-q:p<=-a.COS_67P5?f/-p-q:v/o+q*(this.es-1),s===!1&&(d=Math.atan(o/p)),b.x=c,b.y=d,b.z=e,b},geocentric_to_wgs84:function(b){if(this.datum_type===a.PJD_3PARAM)b.x+=this.datum_params[0],b.y+=this.datum_params[1],b.z+=this.datum_params[2];else if(this.datum_type===a.PJD_7PARAM){var c=this.datum_params[0],d=this.datum_params[1],e=this.datum_params[2],f=this.datum_params[3],g=this.datum_params[4],h=this.datum_params[5],i=this.datum_params[6],j=i*(b.x-h*b.y+g*b.z)+c,k=i*(h*b.x+b.y-f*b.z)+d,l=i*(-g*b.x+f*b.y+b.z)+e;b.x=j,b.y=k,b.z=l}},geocentric_from_wgs84:function(b){if(this.datum_type===a.PJD_3PARAM)b.x-=this.datum_params[0],b.y-=this.datum_params[1],b.z-=this.datum_params[2];else if(this.datum_type===a.PJD_7PARAM){var c=this.datum_params[0],d=this.datum_params[1],e=this.datum_params[2],f=this.datum_params[3],g=this.datum_params[4],h=this.datum_params[5],i=this.datum_params[6],j=(b.x-c)/i,k=(b.y-d)/i,l=(b.z-e)/i;b.x=j+h*k-g*l,b.y=-h*j+k+f*l,b.z=g*j-f*k+l}}},b}),c("proj4/projCode/longlat",["require","exports","module"],function(a,b){function c(a){return a}b.init=function(){},b.forward=c,b.inverse=c}),c("proj4/projCode/tmerc",["../common"],function(a){return{init:function(){this.e0=a.e0fn(this.es),this.e1=a.e1fn(this.es),this.e2=a.e2fn(this.es),this.e3=a.e3fn(this.es),this.ml0=this.a*a.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(b){var c,d,e,f=b.x,g=b.y,h=a.adjust_lon(f-this.long0),i=Math.sin(g),j=Math.cos(g);if(this.sphere){var k=j*Math.sin(h);if(Math.abs(Math.abs(k)-1)<1e-10)return 93;d=.5*this.a*this.k0*Math.log((1+k)/(1-k)),c=Math.acos(j*Math.cos(h)/Math.sqrt(1-k*k)),0>g&&(c=-c),e=this.a*this.k0*(c-this.lat0)}else{var l=j*h,m=Math.pow(l,2),n=this.ep2*Math.pow(j,2),o=Math.tan(g),p=Math.pow(o,2);c=1-this.es*Math.pow(i,2);var q=this.a/Math.sqrt(c),r=this.a*a.mlfn(this.e0,this.e1,this.e2,this.e3,g);d=this.k0*q*l*(1+m/6*(1-p+n+m/20*(5-18*p+Math.pow(p,2)+72*n-58*this.ep2)))+this.x0,e=this.k0*(r-this.ml0+q*o*m*(.5+m/24*(5-p+9*n+4*Math.pow(n,2)+m/30*(61-58*p+Math.pow(p,2)+600*n-330*this.ep2))))+this.y0}return b.x=d,b.y=e,b},inverse:function(b){var c,d,e,f,g,h,i=6;if(this.sphere){var j=Math.exp(b.x/(this.a*this.k0)),k=.5*(j-1/j),l=this.lat0+b.y/(this.a*this.k0),m=Math.cos(l);c=Math.sqrt((1-m*m)/(1+k*k)),g=a.asinz(c),0>l&&(g=-g),h=0===k&&0===m?this.long0:a.adjust_lon(Math.atan2(k,m)+this.long0)}else{var n=b.x-this.x0,o=b.y-this.y0;for(c=(this.ml0+o/this.k0)/this.a,d=c,f=0;e=(c+this.e1*Math.sin(2*d)-this.e2*Math.sin(4*d)+this.e3*Math.sin(6*d))/this.e0-d,d+=e,!(Math.abs(e)<=a.EPSLN);f++)if(f>=i)return 95;if(Math.abs(d)<a.HALF_PI){var p=Math.sin(d),q=Math.cos(d),r=Math.tan(d),s=this.ep2*Math.pow(q,2),t=Math.pow(s,2),u=Math.pow(r,2),v=Math.pow(u,2);c=1-this.es*Math.pow(p,2);var w=this.a/Math.sqrt(c),x=w*(1-this.es)/c,y=n/(w*this.k0),z=Math.pow(y,2);g=d-w*r*z/x*(.5-z/24*(5+3*u+10*s-4*t-9*this.ep2-z/30*(61+90*u+298*s+45*v-252*this.ep2-3*t))),h=a.adjust_lon(this.long0+y*(1-z/6*(1+2*u+s-z/20*(5-2*s+28*u-3*t+8*this.ep2+24*v)))/q)}else g=a.HALF_PI*a.sign(o),h=this.long0}return b.x=h,b.y=g,b}}}),c("proj4/projCode/utm",["../common","./tmerc"],function(a,b){return{dependsOn:"tmerc",init:function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*a.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,b.init.apply(this),this.forward=b.forward,this.inverse=b.inverse)}}}),c("proj4/projCode/gauss",["../common"],function(a){return{init:function(){var b=Math.sin(this.lat0),c=Math.cos(this.lat0);c*=c,this.rc=Math.sqrt(1-this.es)/(1-this.es*b*b),this.C=Math.sqrt(1+this.es*c*c/(1-this.es)),this.phic0=Math.asin(b/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+a.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+a.FORTPI),this.C)*a.srat(this.e*b,this.ratexp))},forward:function(b){var c=b.x,d=b.y;return b.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*d+a.FORTPI),this.C)*a.srat(this.e*Math.sin(d),this.ratexp))-a.HALF_PI,b.x=this.C*c,b},inverse:function(b){for(var c=1e-14,d=b.x/this.C,e=b.y,f=Math.pow(Math.tan(.5*e+a.FORTPI)/this.K,1/this.C),g=a.MAX_ITER;g>0&&(e=2*Math.atan(f*a.srat(this.e*Math.sin(b.y),-.5*this.e))-a.HALF_PI,!(Math.abs(e-b.y)<c));--g)b.y=e;return g?(b.x=d,b.y=e,b):null}}}),c("proj4/projCode/sterea",["../common","./gauss"],function(a,b){return{init:function(){b.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(c){var d,e,f,g;return c.x=a.adjust_lon(c.x-this.long0),b.forward.apply(this,[c]),d=Math.sin(c.y),e=Math.cos(c.y),f=Math.cos(c.x),g=this.k0*this.R2/(1+this.sinc0*d+this.cosc0*e*f),c.x=g*e*Math.sin(c.x),c.y=g*(this.cosc0*d-this.sinc0*e*f),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function(c){var d,e,f,g,h;if(c.x=(c.x-this.x0)/this.a,c.y=(c.y-this.y0)/this.a,c.x/=this.k0,c.y/=this.k0,h=Math.sqrt(c.x*c.x+c.y*c.y)){var i=2*Math.atan2(h,this.R2);d=Math.sin(i),e=Math.cos(i),g=Math.asin(e*this.sinc0+c.y*d*this.cosc0/h),f=Math.atan2(c.x*d,h*this.cosc0*e-c.y*this.sinc0*d)}else g=this.phic0,f=0;return c.x=f,c.y=g,b.inverse.apply(this,[c]),c.x=a.adjust_lon(c.x+this.long0),c}}}),c("proj4/projCode/somerc",[],function(){return{init:function(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j},forward:function(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a},inverse:function(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a}}}),c("proj4/projCode/omerc",["../common"],function(a){return{init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var b=Math.sin(this.lat0),c=Math.cos(this.lat0),d=this.e*b;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(c,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-d*d);var e=a.tsfnz(this.e,this.lat0,b),f=this.bl/c*Math.sqrt((1-this.es)/(1-d*d));1>f*f&&(f=1);var g,h;if(isNaN(this.longc)){var i=a.tsfnz(this.e,this.lat1,Math.sin(this.lat1)),j=a.tsfnz(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(f+Math.sqrt(f*f-1))*Math.pow(e,this.bl):(f-Math.sqrt(f*f-1))*Math.pow(e,this.bl);var k=Math.pow(i,this.bl),l=Math.pow(j,this.bl);g=this.el/k,h=.5*(g-1/g);var m=(this.el*this.el-l*k)/(this.el*this.el+l*k),n=(l-k)/(l+k),o=a.adjust_lon(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(m*Math.tan(.5*this.bl*o)/n)/this.bl,this.long0=a.adjust_lon(this.long0);var p=a.adjust_lon(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/h),this.alpha=Math.asin(f*Math.sin(this.gamma0))}else g=this.lat0>=0?f+Math.sqrt(f*f-1):f-Math.sqrt(f*f-1),this.el=g*Math.pow(e,this.bl),h=.5*(g-1/g),this.gamma0=Math.asin(Math.sin(this.alpha)/f),this.long0=this.longc-Math.asin(h*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(f*f-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(f*f-1),Math.cos(this.alpha))},forward:function(b){var c,d,e,f=b.x,g=b.y,h=a.adjust_lon(f-this.long0);if(Math.abs(Math.abs(g)-a.HALF_PI)<=a.EPSLN)e=g>0?-1:1,d=this.al/this.bl*Math.log(Math.tan(a.FORTPI+.5*e*this.gamma0)),c=-1*e*a.HALF_PI*this.al/this.bl;else{var i=a.tsfnz(this.e,g,Math.sin(g)),j=this.el/Math.pow(i,this.bl),k=.5*(j-1/j),l=.5*(j+1/j),m=Math.sin(this.bl*h),n=(k*Math.sin(this.gamma0)-m*Math.cos(this.gamma0))/l;d=Math.abs(Math.abs(n)-1)<=a.EPSLN?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-n)/(1+n))/this.bl,c=Math.abs(Math.cos(this.bl*h))<=a.EPSLN?this.al*this.bl*h:this.al*Math.atan2(k*Math.cos(this.gamma0)+m*Math.sin(this.gamma0),Math.cos(this.bl*h))/this.bl}return this.no_rot?(b.x=this.x0+c,b.y=this.y0+d):(c-=this.uc,b.x=this.x0+d*Math.cos(this.alpha)+c*Math.sin(this.alpha),b.y=this.y0+c*Math.cos(this.alpha)-d*Math.sin(this.alpha)),b},inverse:function(b){var c,d;this.no_rot?(d=b.y-this.y0,c=b.x-this.x0):(d=(b.x-this.x0)*Math.cos(this.alpha)-(b.y-this.y0)*Math.sin(this.alpha),c=(b.y-this.y0)*Math.cos(this.alpha)+(b.x-this.x0)*Math.sin(this.alpha),c+=this.uc);var e=Math.exp(-1*this.bl*d/this.al),f=.5*(e-1/e),g=.5*(e+1/e),h=Math.sin(this.bl*c/this.al),i=(h*Math.cos(this.gamma0)+f*Math.sin(this.gamma0))/g,j=Math.pow(this.el/Math.sqrt((1+i)/(1-i)),1/this.bl);return Math.abs(i-1)<a.EPSLN?(b.x=this.long0,b.y=a.HALF_PI):Math.abs(i+1)<a.EPSLN?(b.x=this.long0,b.y=-1*a.HALF_PI):(b.y=a.phi2z(this.e,j),b.x=a.adjust_lon(this.long0-Math.atan2(f*Math.cos(this.gamma0)-h*Math.sin(this.gamma0),Math.cos(this.bl*c/this.al))/this.bl)),b}}}),c("proj4/projCode/lcc",["../common"],function(a){return{init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),!(Math.abs(this.lat1+this.lat2)<a.EPSLN)){var b=this.b/this.a;this.e=Math.sqrt(1-b*b);var c=Math.sin(this.lat1),d=Math.cos(this.lat1),e=a.msfnz(this.e,c,d),f=a.tsfnz(this.e,this.lat1,c),g=Math.sin(this.lat2),h=Math.cos(this.lat2),i=a.msfnz(this.e,g,h),j=a.tsfnz(this.e,this.lat2,g),k=a.tsfnz(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>a.EPSLN?Math.log(e/i)/Math.log(f/j):c,isNaN(this.ns)&&(this.ns=c),this.f0=e/(this.ns*Math.pow(f,this.ns)),this.rh=this.a*this.f0*Math.pow(k,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(b){var c=b.x,d=b.y;Math.abs(2*Math.abs(d)-a.PI)<=a.EPSLN&&(d=a.sign(d)*(a.HALF_PI-2*a.EPSLN));var e,f,g=Math.abs(Math.abs(d)-a.HALF_PI);if(g>a.EPSLN)e=a.tsfnz(this.e,d,Math.sin(d)),f=this.a*this.f0*Math.pow(e,this.ns);else{if(g=d*this.ns,0>=g)return null;f=0}var h=this.ns*a.adjust_lon(c-this.long0);return b.x=this.k0*f*Math.sin(h)+this.x0,b.y=this.k0*(this.rh-f*Math.cos(h))+this.y0,b},inverse:function(b){var c,d,e,f,g,h=(b.x-this.x0)/this.k0,i=this.rh-(b.y-this.y0)/this.k0;this.ns>0?(c=Math.sqrt(h*h+i*i),d=1):(c=-Math.sqrt(h*h+i*i),d=-1);var j=0;if(0!==c&&(j=Math.atan2(d*h,d*i)),0!==c||this.ns>0){if(d=1/this.ns,e=Math.pow(c/(this.a*this.f0),d),f=a.phi2z(this.e,e),-9999===f)return null}else f=-a.HALF_PI;return g=a.adjust_lon(j/this.ns+this.long0),b.x=g,b.y=f,b}}}),c("proj4/projCode/krovak",["../common"],function(a){return{init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(b){var c,d,e,f,g,h,i,j=b.x,k=b.y,l=a.adjust_lon(j-this.long0);return c=Math.pow((1+this.e*Math.sin(k))/(1-this.e*Math.sin(k)),this.alfa*this.e/2),d=2*(Math.atan(this.k*Math.pow(Math.tan(k/2+this.s45),this.alfa)/c)-this.s45),e=-l*this.alfa,f=Math.asin(Math.cos(this.ad)*Math.sin(d)+Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),g=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(f)),h=this.n*g,i=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(f/2+this.s45),this.n),b.y=i*Math.cos(h)/1,b.x=i*Math.sin(h)/1,this.czech||(b.y*=-1,b.x*=-1),b},inverse:function(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0===i&&15>k);return k>=15?null:a}}}),c("proj4/projCode/cass",["../common"],function(a){return{init:function(){this.sphere||(this.e0=a.e0fn(this.es),this.e1=a.e1fn(this.es),this.e2=a.e2fn(this.es),this.e3=a.e3fn(this.es),this.ml0=this.a*a.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(b){var c,d,e=b.x,f=b.y;if(e=a.adjust_lon(e-this.long0),this.sphere)c=this.a*Math.asin(Math.cos(f)*Math.sin(e)),d=this.a*(Math.atan2(Math.tan(f),Math.cos(e))-this.lat0);else{var g=Math.sin(f),h=Math.cos(f),i=a.gN(this.a,this.e,g),j=Math.tan(f)*Math.tan(f),k=e*Math.cos(f),l=k*k,m=this.es*h*h/(1-this.es),n=this.a*a.mlfn(this.e0,this.e1,this.e2,this.e3,f);c=i*k*(1-l*j*(1/6-(8-j+8*m)*l/120)),d=n-this.ml0+i*g/h*l*(.5+(5-j+6*m)*l/24)}return b.x=c+this.x0,b.y=d+this.y0,b},inverse:function(b){b.x-=this.x0,b.y-=this.y0;var c,d,e=b.x/this.a,f=b.y/this.a;if(this.sphere){var g=f+this.lat0;c=Math.asin(Math.sin(g)*Math.cos(e)),d=Math.atan2(Math.tan(e),Math.cos(g))}else{var h=this.ml0/this.a+f,i=a.imlfn(h,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(i)-a.HALF_PI)<=a.EPSLN)return b.x=this.long0,b.y=a.HALF_PI,0>f&&(b.y*=-1),b;var j=a.gN(this.a,this.e,Math.sin(i)),k=j*j*j/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(i),2),m=e*this.a/j,n=m*m;c=i-j*Math.tan(i)/k*m*m*(.5-(1+3*l)*m*m/24),d=m*(1-n*(l/3+(1+3*l)*l*n/15))/Math.cos(i)}return b.x=a.adjust_lon(d+this.long0),b.y=a.adjust_lat(c),b}}}),c("proj4/projCode/laea",["../common"],function(a){return{S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4,init:function(){var b=Math.abs(this.lat0);if(this.mode=Math.abs(b-a.HALF_PI)<a.EPSLN?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(b)<a.EPSLN?this.EQUIT:this.OBLIQ,this.es>0){var c;switch(this.qp=a.qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),c=Math.sin(this.lat0),this.sinb1=a.qsfnz(this.e,c)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*c*c)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(b){var c,d,e,f,g,h,i,j,k,l,m=b.x,n=b.y;if(m=a.adjust_lon(m-this.long0),this.sphere){if(g=Math.sin(n),l=Math.cos(n),e=Math.cos(m),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(d=this.mode===this.EQUIT?1+l*e:1+this.sinph0*g+this.cosph0*l*e,d<=a.EPSLN)return null;d=Math.sqrt(2/d),c=d*l*Math.sin(m),d*=this.mode===this.EQUIT?g:this.cosph0*g-this.sinph0*l*e}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),Math.abs(n+this.phi0)<a.EPSLN)return null;d=a.FORTPI-.5*n,d=2*(this.mode===this.S_POLE?Math.cos(d):Math.sin(d)),c=d*Math.sin(m),d*=e}}else{switch(i=0,j=0,k=0,e=Math.cos(m),f=Math.sin(m),g=Math.sin(n),h=a.qsfnz(this.e,g),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(i=h/this.qp,j=Math.sqrt(1-i*i)),this.mode){case this.OBLIQ:k=1+this.sinb1*i+this.cosb1*j*e;break;case this.EQUIT:k=1+j*e;break;case this.N_POLE:k=a.HALF_PI+n,h=this.qp-h;break;case this.S_POLE:k=n-a.HALF_PI,h=this.qp+h}if(Math.abs(k)<a.EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:k=Math.sqrt(2/k),d=this.mode===this.OBLIQ?this.ymf*k*(this.cosb1*i-this.sinb1*j*e):(k=Math.sqrt(2/(1+j*e)))*i*this.ymf,c=this.xmf*k*j*f;break;case this.N_POLE:case this.S_POLE:h>=0?(c=(k=Math.sqrt(h))*f,d=e*(this.mode===this.S_POLE?k:-k)):c=d=0}}return b.x=this.a*c+this.x0,b.y=this.a*d+this.y0,b},inverse:function(b){b.x-=this.x0,b.y-=this.y0;var c,d,e,f,g,h,i,j=b.x/this.a,k=b.y/this.a;if(this.sphere){var l,m=0,n=0;if(l=Math.sqrt(j*j+k*k),d=.5*l,d>1)return null;switch(d=2*Math.asin(d),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(n=Math.sin(d),m=Math.cos(d)),this.mode){case this.EQUIT:d=Math.abs(l)<=a.EPSLN?0:Math.asin(k*n/l),j*=n,k=m*l;break;case this.OBLIQ:d=Math.abs(l)<=a.EPSLN?this.phi0:Math.asin(m*this.sinph0+k*n*this.cosph0/l),j*=n*this.cosph0,k=(m-Math.sin(d)*this.sinph0)*l;break;case this.N_POLE:k=-k,d=a.HALF_PI-d;break;case this.S_POLE:d-=a.HALF_PI}c=0!==k||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(j,k):0}else{if(i=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(j/=this.dd,k*=this.dd,h=Math.sqrt(j*j+k*k),h<a.EPSLN)return b.x=0,b.y=this.phi0,b;f=2*Math.asin(.5*h/this.rq),e=Math.cos(f),j*=f=Math.sin(f),this.mode===this.OBLIQ?(i=e*this.sinb1+k*f*this.cosb1/h,g=this.qp*i,k=h*this.cosb1*e-k*this.sinb1*f):(i=k*f/h,g=this.qp*i,k=h*e)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(k=-k),g=j*j+k*k,!g)return b.x=0,b.y=this.phi0,b;i=1-g/this.qp,this.mode===this.S_POLE&&(i=-i)}c=Math.atan2(j,k),d=this.authlat(Math.asin(i),this.apa)}return b.x=a.adjust_lon(this.long0+c),b.y=d,b},P00:.3333333333333333,P01:.17222222222222222,P02:.10257936507936508,P10:.06388888888888888,P11:.0664021164021164,P20:.016415012942191543,authset:function(a){var b,c=[];return c[0]=a*this.P00,b=a*a,c[0]+=b*this.P01,c[1]=b*this.P10,b*=a,c[0]+=b*this.P02,c[1]+=b*this.P11,c[2]=b*this.P20,c},authlat:function(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)}}}),c("proj4/projCode/merc",["../common"],function(a){return{init:function(){var b=this.b/this.a;this.es=1-b*b,this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):a.msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function(b){var c=b.x,d=b.y;if(d*a.R2D>90&&d*a.R2D<-90&&c*a.R2D>180&&c*a.R2D<-180)return null;var e,f;if(Math.abs(Math.abs(d)-a.HALF_PI)<=a.EPSLN)return null;if(this.sphere)e=this.x0+this.a*this.k0*a.adjust_lon(c-this.long0),f=this.y0+this.a*this.k0*Math.log(Math.tan(a.FORTPI+.5*d));else{var g=Math.sin(d),h=a.tsfnz(this.e,d,g);e=this.x0+this.a*this.k0*a.adjust_lon(c-this.long0),f=this.y0-this.a*this.k0*Math.log(h)}return b.x=e,b.y=f,b},inverse:function(b){var c,d,e=b.x-this.x0,f=b.y-this.y0;if(this.sphere)d=a.HALF_PI-2*Math.atan(Math.exp(-f/(this.a*this.k0)));else{var g=Math.exp(-f/(this.a*this.k0));if(d=a.phi2z(this.e,g),-9999===d)return null}return c=a.adjust_lon(this.long0+e/(this.a*this.k0)),b.x=c,b.y=d,b}}}),c("proj4/projCode/aea",["../common"],function(a){return{init:function(){Math.abs(this.lat1+this.lat2)<a.EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=a.msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=a.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=a.msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=a.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=a.qsfnz(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>a.EPSLN?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(b){var c=b.x,d=b.y;this.sin_phi=Math.sin(d),this.cos_phi=Math.cos(d);var e=a.qsfnz(this.e3,this.sin_phi,this.cos_phi),f=this.a*Math.sqrt(this.c-this.ns0*e)/this.ns0,g=this.ns0*a.adjust_lon(c-this.long0),h=f*Math.sin(g)+this.x0,i=this.rh-f*Math.cos(g)+this.y0;return b.x=h,b.y=i,b},inverse:function(b){var c,d,e,f,g,h;return b.x-=this.x0,b.y=this.rh-b.y+this.y0,this.ns0>=0?(c=Math.sqrt(b.x*b.x+b.y*b.y),e=1):(c=-Math.sqrt(b.x*b.x+b.y*b.y),e=-1),f=0,0!==c&&(f=Math.atan2(e*b.x,e*b.y)),e=c*this.ns0/this.a,this.sphere?h=Math.asin((this.c-e*e)/(2*this.ns0)):(d=(this.c-e*e)/this.ns0,h=this.phi1z(this.e3,d)),g=a.adjust_lon(f/this.ns0+this.long0),b.x=g,b.y=h,b},phi1z:function(b,c){var d,e,f,g,h,i=a.asinz(.5*c);if(b<a.EPSLN)return i;for(var j=b*b,k=1;25>=k;k++)if(d=Math.sin(i),e=Math.cos(i),f=b*d,g=1-f*f,h=.5*g*g/e*(c/(1-j)-d/g+.5/b*Math.log((1-f)/(1+f))),i+=h,Math.abs(h)<=1e-7)return i;return null}}}),c("proj4/projCode/gnom",["../common"],function(a){
return{init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(b){var c,d,e,f,g,h,i,j,k=b.x,l=b.y;return e=a.adjust_lon(k-this.long0),c=Math.sin(l),d=Math.cos(l),f=Math.cos(e),h=this.sin_p14*c+this.cos_p14*d*f,g=1,h>0||Math.abs(h)<=a.EPSLN?(i=this.x0+this.a*g*d*Math.sin(e)/h,j=this.y0+this.a*g*(this.cos_p14*c-this.sin_p14*d*f)/h):(i=this.x0+this.infinity_dist*d*Math.sin(e),j=this.y0+this.infinity_dist*(this.cos_p14*c-this.sin_p14*d*f)),b.x=i,b.y=j,b},inverse:function(b){var c,d,e,f,g,h;return b.x=(b.x-this.x0)/this.a,b.y=(b.y-this.y0)/this.a,b.x/=this.k0,b.y/=this.k0,(c=Math.sqrt(b.x*b.x+b.y*b.y))?(f=Math.atan2(c,this.rc),d=Math.sin(f),e=Math.cos(f),h=a.asinz(e*this.sin_p14+b.y*d*this.cos_p14/c),g=Math.atan2(b.x*d,c*this.cos_p14*e-b.y*this.sin_p14*d),g=a.adjust_lon(this.long0+g)):(h=this.phic0,g=0),b.x=g,b.y=h,b}}}),c("proj4/projCode/cea",["../common"],function(a){return{init:function(){this.sphere||(this.k0=a.msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(b){var c,d,e=b.x,f=b.y,g=a.adjust_lon(e-this.long0);if(this.sphere)c=this.x0+this.a*g*Math.cos(this.lat_ts),d=this.y0+this.a*Math.sin(f)/Math.cos(this.lat_ts);else{var h=a.qsfnz(this.e,Math.sin(f));c=this.x0+this.a*this.k0*g,d=this.y0+.5*this.a*h/this.k0}return b.x=c,b.y=d,b},inverse:function(b){b.x-=this.x0,b.y-=this.y0;var c,d;return this.sphere?(c=a.adjust_lon(this.long0+b.x/this.a/Math.cos(this.lat_ts)),d=Math.asin(b.y/this.a*Math.cos(this.lat_ts))):(d=a.iqsfnz(this.e,2*b.y*this.k0/this.a),c=a.adjust_lon(this.long0+b.x/(this.a*this.k0))),b.x=c,b.y=d,b}}}),c("proj4/projCode/eqc",["../common"],function(a){return{init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_t||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(b){var c=b.x,d=b.y,e=a.adjust_lon(c-this.long0),f=a.adjust_lat(d-this.lat0);return b.x=this.x0+this.a*e*this.rc,b.y=this.y0+this.a*f,b},inverse:function(b){var c=b.x,d=b.y;return b.x=a.adjust_lon(this.long0+(c-this.x0)/(this.a*this.rc)),b.y=a.adjust_lat(this.lat0+(d-this.y0)/this.a),b}}}),c("proj4/projCode/poly",["../common"],function(a){return{init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=a.e0fn(this.es),this.e1=a.e1fn(this.es),this.e2=a.e2fn(this.es),this.e3=a.e3fn(this.es),this.ml0=this.a*a.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(b){var c,d,e,f=b.x,g=b.y,h=a.adjust_lon(f-this.long0);if(e=h*Math.sin(g),this.sphere)Math.abs(g)<=a.EPSLN?(c=this.a*h,d=-1*this.a*this.lat0):(c=this.a*Math.sin(e)/Math.tan(g),d=this.a*(a.adjust_lat(g-this.lat0)+(1-Math.cos(e))/Math.tan(g)));else if(Math.abs(g)<=a.EPSLN)c=this.a*h,d=-1*this.ml0;else{var i=a.gN(this.a,this.e,Math.sin(g))/Math.tan(g);c=i*Math.sin(e),d=this.a*a.mlfn(this.e0,this.e1,this.e2,this.e3,g)-this.ml0+i*(1-Math.cos(e))}return b.x=c+this.x0,b.y=d+this.y0,b},inverse:function(b){var c,d,e,f,g,h,i,j,k;if(e=b.x-this.x0,f=b.y-this.y0,this.sphere)if(Math.abs(f+this.a*this.lat0)<=a.EPSLN)c=a.adjust_lon(e/this.a+this.long0),d=0;else{h=this.lat0+f/this.a,i=e*e/this.a/this.a+h*h,j=h;var l;for(g=a.MAX_ITER;g;--g)if(l=Math.tan(j),k=-1*(h*(j*l+1)-j-.5*(j*j+i)*l)/((j-h)/l-1),j+=k,Math.abs(k)<=a.EPSLN){d=j;break}c=a.adjust_lon(this.long0+Math.asin(e*Math.tan(j)/this.a)/Math.sin(d))}else if(Math.abs(f+this.ml0)<=a.EPSLN)d=0,c=a.adjust_lon(this.long0+e/this.a);else{h=(this.ml0+f)/this.a,i=e*e/this.a/this.a+h*h,j=h;var m,n,o,p,q;for(g=a.MAX_ITER;g;--g)if(q=this.e*Math.sin(j),m=Math.sqrt(1-q*q)*Math.tan(j),n=this.a*a.mlfn(this.e0,this.e1,this.e2,this.e3,j),o=this.e0-2*this.e1*Math.cos(2*j)+4*this.e2*Math.cos(4*j)-6*this.e3*Math.cos(6*j),p=n/this.a,k=(h*(m*p+1)-p-.5*m*(p*p+i))/(this.es*Math.sin(2*j)*(p*p+i-2*h*p)/(4*m)+(h-p)*(m*o-2/Math.sin(2*j))-o),j-=k,Math.abs(k)<=a.EPSLN){d=j;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(d),2))*Math.tan(d),c=a.adjust_lon(this.long0+Math.asin(e*m/this.a)/Math.sin(d))}return b.x=c,b.y=d,b}}}),c("proj4/projCode/nzmg",["../common"],function(a){return{iterations:1,init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(b){var c,d=b.x,e=b.y,f=e-this.lat0,g=d-this.long0,h=1e-5*(f/a.SEC_TO_RAD),i=g,j=1,k=0;for(c=1;10>=c;c++)j*=h,k+=this.A[c]*j;var l,m,n=k,o=i,p=1,q=0,r=0,s=0;for(c=1;6>=c;c++)l=p*n-q*o,m=q*n+p*o,p=l,q=m,r=r+this.B_re[c]*p-this.B_im[c]*q,s=s+this.B_im[c]*p+this.B_re[c]*q;return b.x=s*this.a+this.x0,b.y=r*this.a+this.y0,b},inverse:function(b){var c,d,e,f=b.x,g=b.y,h=f-this.x0,i=g-this.y0,j=i/this.a,k=h/this.a,l=1,m=0,n=0,o=0;for(c=1;6>=c;c++)d=l*j-m*k,e=m*j+l*k,l=d,m=e,n=n+this.C_re[c]*l-this.C_im[c]*m,o=o+this.C_im[c]*l+this.C_re[c]*m;for(var p=0;p<this.iterations;p++){var q,r,s=n,t=o,u=j,v=k;for(c=2;6>=c;c++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,u+=(c-1)*(this.B_re[c]*s-this.B_im[c]*t),v+=(c-1)*(this.B_im[c]*s+this.B_re[c]*t);s=1,t=0;var w=this.B_re[1],x=this.B_im[1];for(c=2;6>=c;c++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,w+=c*(this.B_re[c]*s-this.B_im[c]*t),x+=c*(this.B_im[c]*s+this.B_re[c]*t);var y=w*w+x*x;n=(u*w+v*x)/y,o=(v*w-u*x)/y}var z=n,A=o,B=1,C=0;for(c=1;9>=c;c++)B*=z,C+=this.D[c]*B;var D=this.lat0+1e5*C*a.SEC_TO_RAD,E=this.long0+A;return b.x=E,b.y=D,b}}}),c("proj4/projCode/mill",["../common"],function(a){return{init:function(){},forward:function(b){var c=b.x,d=b.y,e=a.adjust_lon(c-this.long0),f=this.x0+this.a*e,g=this.y0+1.25*this.a*Math.log(Math.tan(a.PI/4+d/2.5));return b.x=f,b.y=g,b},inverse:function(b){b.x-=this.x0,b.y-=this.y0;var c=a.adjust_lon(this.long0+b.x/this.a),d=2.5*(Math.atan(Math.exp(.8*b.y/this.a))-a.PI/4);return b.x=c,b.y=d,b}}}),c("proj4/projCode/sinu",["../common"],function(a){return{init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=a.pj_enfn(this.es)},forward:function(b){var c,d,e=b.x,f=b.y;if(e=a.adjust_lon(e-this.long0),this.sphere){if(this.m)for(var g=this.n*Math.sin(f),h=a.MAX_ITER;h;--h){var i=(this.m*f+Math.sin(f)-g)/(this.m+Math.cos(f));if(f-=i,Math.abs(i)<a.EPSLN)break}else f=1!==this.n?Math.asin(this.n*Math.sin(f)):f;c=this.a*this.C_x*e*(this.m+Math.cos(f)),d=this.a*this.C_y*f}else{var j=Math.sin(f),k=Math.cos(f);d=this.a*a.pj_mlfn(f,j,k,this.en),c=this.a*e*k/Math.sqrt(1-this.es*j*j)}return b.x=c,b.y=d,b},inverse:function(b){var c,d,e;if(b.x-=this.x0,b.y-=this.y0,c=b.y/this.a,this.sphere)b.y/=this.C_y,c=this.m?Math.asin((this.m*b.y+Math.sin(b.y))/this.n):1!==this.n?Math.asin(Math.sin(b.y)/this.n):b.y,e=b.x/(this.C_x*(this.m+Math.cos(b.y)));else{c=a.pj_inv_mlfn(b.y/this.a,this.es,this.en);var f=Math.abs(c);f<a.HALF_PI?(f=Math.sin(c),d=this.long0+b.x*Math.sqrt(1-this.es*f*f)/(this.a*Math.cos(c)),e=a.adjust_lon(d)):f-a.EPSLN<a.HALF_PI&&(e=this.long0)}return b.x=e,b.y=c,b}}}),c("proj4/projCode/moll",["../common"],function(a){return{init:function(){},forward:function(b){for(var c=b.x,d=b.y,e=a.adjust_lon(c-this.long0),f=d,g=a.PI*Math.sin(d),h=0;!0;h++){var i=-(f+Math.sin(f)-g)/(1+Math.cos(f));if(f+=i,Math.abs(i)<a.EPSLN)break}f/=2,a.PI/2-Math.abs(d)<a.EPSLN&&(e=0);var j=.900316316158*this.a*e*Math.cos(f)+this.x0,k=1.4142135623731*this.a*Math.sin(f)+this.y0;return b.x=j,b.y=k,b},inverse:function(b){var c,d;b.x-=this.x0,b.y-=this.y0,d=b.y/(1.4142135623731*this.a),Math.abs(d)>.999999999999&&(d=.999999999999),c=Math.asin(d);var e=a.adjust_lon(this.long0+b.x/(.900316316158*this.a*Math.cos(c)));e<-a.PI&&(e=-a.PI),e>a.PI&&(e=a.PI),d=(2*c+Math.sin(2*c))/a.PI,Math.abs(d)>1&&(d=1);var f=Math.asin(d);return b.x=e,b.y=f,b}}}),c("proj4/projCode/eqdc",["../common"],function(a){return{init:function(){return Math.abs(this.lat1+this.lat2)<a.EPSLN?void a.reportError("eqdc:init: Equal Latitudes"):(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=a.e0fn(this.es),this.e1=a.e1fn(this.es),this.e2=a.e2fn(this.es),this.e3=a.e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=a.msfnz(this.e,this.sinphi,this.cosphi),this.ml1=a.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<a.EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=a.msfnz(this.e,this.sinphi,this.cosphi),this.ml2=a.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=a.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),void(this.rh=this.a*(this.g-this.ml0)))},forward:function(b){var c,d=b.x,e=b.y;if(this.sphere)c=this.a*(this.g-e);else{var f=a.mlfn(this.e0,this.e1,this.e2,this.e3,e);c=this.a*(this.g-f)}var g=this.ns*a.adjust_lon(d-this.long0),h=this.x0+c*Math.sin(g),i=this.y0+this.rh-c*Math.cos(g);return b.x=h,b.y=i,b},inverse:function(b){b.x-=this.x0,b.y=this.rh-b.y+this.y0;var c,d,e,f;this.ns>=0?(d=Math.sqrt(b.x*b.x+b.y*b.y),c=1):(d=-Math.sqrt(b.x*b.x+b.y*b.y),c=-1);var g=0;if(0!==d&&(g=Math.atan2(c*b.x,c*b.y)),this.sphere)return f=a.adjust_lon(this.long0+g/this.ns),e=a.adjust_lat(this.g-d/this.a),b.x=f,b.y=e,b;var h=this.g-d/this.a;return e=a.imlfn(h,this.e0,this.e1,this.e2,this.e3),f=a.adjust_lon(this.long0+g/this.ns),b.x=f,b.y=e,b}}}),c("proj4/projCode/vandg",["../common"],function(a){return{init:function(){this.R=this.a},forward:function(b){var c,d,e=b.x,f=b.y,g=a.adjust_lon(e-this.long0);Math.abs(f)<=a.EPSLN&&(c=this.x0+this.R*g,d=this.y0);var h=a.asinz(2*Math.abs(f/a.PI));(Math.abs(g)<=a.EPSLN||Math.abs(Math.abs(f)-a.HALF_PI)<=a.EPSLN)&&(c=this.x0,d=f>=0?this.y0+a.PI*this.R*Math.tan(.5*h):this.y0+a.PI*this.R*-Math.tan(.5*h));var i=.5*Math.abs(a.PI/g-g/a.PI),j=i*i,k=Math.sin(h),l=Math.cos(h),m=l/(k+l-1),n=m*m,o=m*(2/k-1),p=o*o,q=a.PI*this.R*(i*(m-p)+Math.sqrt(j*(m-p)*(m-p)-(p+j)*(n-p)))/(p+j);0>g&&(q=-q),c=this.x0+q;var r=j+m;return q=a.PI*this.R*(o*r-i*Math.sqrt((p+j)*(j+1)-r*r))/(p+j),d=f>=0?this.y0+q:this.y0-q,b.x=c,b.y=d,b},inverse:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o;return b.x-=this.x0,b.y-=this.y0,m=a.PI*this.R,e=b.x/m,f=b.y/m,g=e*e+f*f,h=-Math.abs(f)*(1+g),i=h-2*f*f+e*e,j=-2*h+1+2*f*f+g*g,o=f*f/j+(2*i*i*i/j/j/j-9*h*i/j/j)/27,k=(h-i*i/3/j)/j,l=2*Math.sqrt(-k/3),m=3*o/k/l,Math.abs(m)>1&&(m=m>=0?1:-1),n=Math.acos(m)/3,d=b.y>=0?(-l*Math.cos(n+a.PI/3)-i/3/j)*a.PI:-(-l*Math.cos(n+a.PI/3)-i/3/j)*a.PI,c=Math.abs(e)<a.EPSLN?this.long0:a.adjust_lon(this.long0+a.PI*(g-1+Math.sqrt(1+2*(e*e-f*f)+g*g))/2/e),b.x=c,b.y=d,b}}}),c("proj4/projCode/aeqd",["../common"],function(a){return{init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=b.x,A=b.y,B=Math.sin(b.y),C=Math.cos(b.y),D=a.adjust_lon(z-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=a.EPSLN?(b.x=this.x0+this.a*(a.HALF_PI-A)*Math.sin(D),b.y=this.y0-this.a*(a.HALF_PI-A)*Math.cos(D),b):Math.abs(this.sin_p12+1)<=a.EPSLN?(b.x=this.x0+this.a*(a.HALF_PI+A)*Math.sin(D),b.y=this.y0+this.a*(a.HALF_PI+A)*Math.cos(D),b):(t=this.sin_p12*B+this.cos_p12*C*Math.cos(D),r=Math.acos(t),s=r/Math.sin(r),b.x=this.x0+this.a*s*C*Math.sin(D),b.y=this.y0+this.a*s*(this.cos_p12*B-this.sin_p12*C*Math.cos(D)),b):(c=a.e0fn(this.es),d=a.e1fn(this.es),e=a.e2fn(this.es),f=a.e3fn(this.es),Math.abs(this.sin_p12-1)<=a.EPSLN?(g=this.a*a.mlfn(c,d,e,f,a.HALF_PI),h=this.a*a.mlfn(c,d,e,f,A),b.x=this.x0+(g-h)*Math.sin(D),b.y=this.y0-(g-h)*Math.cos(D),b):Math.abs(this.sin_p12+1)<=a.EPSLN?(g=this.a*a.mlfn(c,d,e,f,a.HALF_PI),h=this.a*a.mlfn(c,d,e,f,A),b.x=this.x0+(g+h)*Math.sin(D),b.y=this.y0+(g+h)*Math.cos(D),b):(i=B/C,j=a.gN(this.a,this.e,this.sin_p12),k=a.gN(this.a,this.e,B),l=Math.atan((1-this.es)*i+this.es*j*this.sin_p12/(k*C)),m=Math.atan2(Math.sin(D),this.cos_p12*Math.tan(l)-this.sin_p12*Math.cos(D)),u=0===m?Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.abs(Math.abs(m)-a.PI)<=a.EPSLN?-Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.asin(Math.sin(D)*Math.cos(l)/Math.sin(m)),n=this.e*this.sin_p12/Math.sqrt(1-this.es),o=this.e*this.cos_p12*Math.cos(m)/Math.sqrt(1-this.es),p=n*o,q=o*o,v=u*u,w=v*u,x=w*u,y=x*u,r=j*u*(1-v*q*(1-q)/6+w/8*p*(1-2*q)+x/120*(q*(4-7*q)-3*n*n*(1-7*q))-y/48*p),b.x=this.x0+r*Math.sin(m),b.y=this.y0+r*Math.cos(m),b))},inverse:function(b){b.x-=this.x0,b.y-=this.y0;var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;if(this.sphere){if(c=Math.sqrt(b.x*b.x+b.y*b.y),c>2*a.HALF_PI*this.a)return;return d=c/this.a,e=Math.sin(d),f=Math.cos(d),g=this.long0,Math.abs(c)<=a.EPSLN?h=this.lat0:(h=a.asinz(f*this.sin_p12+b.y*e*this.cos_p12/c),i=Math.abs(this.lat0)-a.HALF_PI,g=Math.abs(i)<=a.EPSLN?this.lat0>=0?a.adjust_lon(this.long0+Math.atan2(b.x,-b.y)):a.adjust_lon(this.long0-Math.atan2(-b.x,b.y)):a.adjust_lon(this.long0+Math.atan2(b.x*e,c*this.cos_p12*f-b.y*this.sin_p12*e))),b.x=g,b.y=h,b}return j=a.e0fn(this.es),k=a.e1fn(this.es),l=a.e2fn(this.es),m=a.e3fn(this.es),Math.abs(this.sin_p12-1)<=a.EPSLN?(n=this.a*a.mlfn(j,k,l,m,a.HALF_PI),c=Math.sqrt(b.x*b.x+b.y*b.y),o=n-c,h=a.imlfn(o/this.a,j,k,l,m),g=a.adjust_lon(this.long0+Math.atan2(b.x,-1*b.y)),b.x=g,b.y=h,b):Math.abs(this.sin_p12+1)<=a.EPSLN?(n=this.a*a.mlfn(j,k,l,m,a.HALF_PI),c=Math.sqrt(b.x*b.x+b.y*b.y),o=c-n,h=a.imlfn(o/this.a,j,k,l,m),g=a.adjust_lon(this.long0+Math.atan2(b.x,b.y)),b.x=g,b.y=h,b):(c=Math.sqrt(b.x*b.x+b.y*b.y),r=Math.atan2(b.x,b.y),p=a.gN(this.a,this.e,this.sin_p12),s=Math.cos(r),t=this.e*this.cos_p12*s,u=-t*t/(1-this.es),v=3*this.es*(1-u)*this.sin_p12*this.cos_p12*s/(1-this.es),w=c/p,x=w-u*(1+u)*Math.pow(w,3)/6-v*(1+3*u)*Math.pow(w,4)/24,y=1-u*x*x/2-w*x*x*x/6,q=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*s),g=a.adjust_lon(this.long0+Math.asin(Math.sin(r)*Math.sin(x)/Math.cos(q))),h=Math.atan((1-this.es*y*this.sin_p12/Math.sin(q))*Math.tan(q)/(1-this.es)),b.x=g,b.y=h,b)}}}),c("proj4/projections",["require","exports","module","./projCode/longlat","./projCode/tmerc","./projCode/utm","./projCode/sterea","./projCode/somerc","./projCode/omerc","./projCode/lcc","./projCode/krovak","./projCode/cass","./projCode/laea","./projCode/merc","./projCode/aea","./projCode/gnom","./projCode/cea","./projCode/eqc","./projCode/poly","./projCode/nzmg","./projCode/mill","./projCode/sinu","./projCode/moll","./projCode/eqdc","./projCode/vandg","./projCode/aeqd","./projCode/longlat"],function(a,b){b.longlat=a("./projCode/longlat"),b.identity=b.longlat,b.tmerc=a("./projCode/tmerc"),b.utm=a("./projCode/utm"),b.sterea=a("./projCode/sterea"),b.somerc=a("./projCode/somerc"),b.omerc=a("./projCode/omerc"),b.lcc=a("./projCode/lcc"),b.krovak=a("./projCode/krovak"),b.cass=a("./projCode/cass"),b.laea=a("./projCode/laea"),b.merc=a("./projCode/merc"),b.aea=a("./projCode/aea"),b.gnom=a("./projCode/gnom"),b.cea=a("./projCode/cea"),b.eqc=a("./projCode/eqc"),b.poly=a("./projCode/poly"),b.nzmg=a("./projCode/nzmg"),b.mill=a("./projCode/mill"),b.sinu=a("./projCode/sinu"),b.moll=a("./projCode/moll"),b.eqdc=a("./projCode/eqdc"),b.vandg=a("./projCode/vandg"),b.aeqd=a("./projCode/aeqd"),b.longlat=a("./projCode/longlat"),b.identity=b.longlat}),c("proj4/Proj",["./extend","./common","./defs","./constants","./datum","./projections","./wkt","./projString"],function(a,b,c,d,e,f,g,h){var i=function j(b){if(!(this instanceof j))return new j(b);this.srsCodeInput=b;var d;"string"==typeof b?b in c?(this.deriveConstants(c[b]),a(this,c[b])):b.indexOf("GEOGCS")>=0||b.indexOf("GEOCCS")>=0||b.indexOf("PROJCS")>=0||b.indexOf("LOCAL_CS")>=0?(d=g(b),this.deriveConstants(d),a(this,d)):"+"===b[0]&&(d=h(b),this.deriveConstants(d),a(this,d)):(this.deriveConstants(b),a(this,b)),this.initTransforms(this.projName)};return i.prototype={initTransforms:function(b){if(!(b in i.projections))throw"unknown projection "+b;a(this,i.projections[b]),this.init()},deriveConstants:function(c){if(c.nadgrids&&0===c.nadgrids.length&&(c.nadgrids=null),c.nadgrids){c.grids=c.nadgrids.split(",");var f=null,g=c.grids.length;if(g>0)for(var h=0;g>h;h++){f=c.grids[h];var i=f.split("@");""!==i[i.length-1]&&(c.grids[h]={mandatory:1===i.length,name:i[i.length-1],grid:d.grids[i[i.length-1]]},c.grids[h].mandatory&&!c.grids[h].grid)}}if(c.datumCode&&"none"!==c.datumCode){var j=d.Datum[c.datumCode];j&&(c.datum_params=j.towgs84?j.towgs84.split(","):null,c.ellps=j.ellipse,c.datumName=j.datumName?j.datumName:c.datumCode)}if(!c.a){var k=d.Ellipsoid[c.ellps]?d.Ellipsoid[c.ellps]:d.Ellipsoid.WGS84;a(c,k)}c.rf&&!c.b&&(c.b=(1-1/c.rf)*c.a),(0===c.rf||Math.abs(c.a-c.b)<b.EPSLN)&&(c.sphere=!0,c.b=c.a),c.a2=c.a*c.a,c.b2=c.b*c.b,c.es=(c.a2-c.b2)/c.a2,c.e=Math.sqrt(c.es),c.R_A&&(c.a*=1-c.es*(b.SIXTH+c.es*(b.RA4+c.es*b.RA6)),c.a2=c.a*c.a,c.b2=c.b*c.b,c.es=0),c.ep2=(c.a2-c.b2)/c.b2,c.k0||(c.k0=1),c.axis||(c.axis="enu"),c.datum=e(c)}},i.projections=f,i}),c("proj4/datum_transform",["./common"],function(a){return function(b,c,d){function e(b){return b===a.PJD_3PARAM||b===a.PJD_7PARAM}var f,g,h;if(b.compare_datums(c))return d;if(b.datum_type===a.PJD_NODATUM||c.datum_type===a.PJD_NODATUM)return d;var i=b.a,j=b.es,k=c.a,l=c.es,m=b.datum_type;if(m===a.PJD_GRIDSHIFT)if(0===this.apply_gridshift(b,0,d))b.a=a.SRS_WGS84_SEMIMAJOR,b.es=a.SRS_WGS84_ESQUARED;else{if(!b.datum_params)return b.a=i,b.es=b.es,d;for(f=1,g=0,h=b.datum_params.length;h>g;g++)f*=b.datum_params[g];if(0===f)return b.a=i,b.es=b.es,d;m=b.datum_params.length>3?a.PJD_7PARAM:a.PJD_3PARAM}return c.datum_type===a.PJD_GRIDSHIFT&&(c.a=a.SRS_WGS84_SEMIMAJOR,c.es=a.SRS_WGS84_ESQUARED),(b.es!==c.es||b.a!==c.a||e(m)||e(c.datum_type))&&(b.geodetic_to_geocentric(d),e(b.datum_type)&&b.geocentric_to_wgs84(d),e(c.datum_type)&&c.geocentric_from_wgs84(d),c.geocentric_to_geodetic(d)),c.datum_type===a.PJD_GRIDSHIFT&&this.apply_gridshift(c,1,d),b.a=i,b.es=j,c.a=k,c.es=l,d}}),c("proj4/adjust_axis",[],function(){return function(a,b,c){var d,e,f,g=c.x,h=c.y,i=c.z||0;for(f=0;3>f;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e="x"):1===f?(d=h,e="y"):(d=i,e="z"),a.axis[f]){case"e":c[e]=d;break;case"w":c[e]=-d;break;case"n":c[e]=d;break;case"s":c[e]=-d;break;case"u":void 0!==c[e]&&(c.z=d);break;case"d":void 0!==c[e]&&(c.z=-d);break;default:return null}return c}}),c("proj4/transform",["./common","./datum_transform","./adjust_axis","./Proj"],function(a,b,c,d){return function(e,f,g){function h(b,c){return(b.datum.datum_type===a.PJD_3PARAM||b.datum.datum_type===a.PJD_7PARAM)&&"WGS84"!==c.datumCode}var i;return e.datum&&f.datum&&(h(e,f)||h(f,e))&&(i=new d("WGS84"),this.transform(e,i,g),e=i),"enu"!==e.axis&&c(e,!1,g),"longlat"===e.projName?(g.x*=a.D2R,g.y*=a.D2R):(e.to_meter&&(g.x*=e.to_meter,g.y*=e.to_meter),e.inverse(g)),e.from_greenwich&&(g.x+=e.from_greenwich),g=b(e.datum,f.datum,g),f.from_greenwich&&(g.x-=f.from_greenwich),"longlat"===f.projName?(g.x*=a.R2D,g.y*=a.R2D):(f.forward(g),f.to_meter&&(g.x/=f.to_meter,g.y/=f.to_meter)),"enu"!==f.axis&&c(f,!0,g),g}}),c("proj4/core",["./Point","./Proj","./transform"],function(a,b,c){var d=b("WGS84");return function(e,f,g){var h=function(b,d,g){var h;return Array.isArray(g)?(h=c(b,d,a(g)),3===g.length?[h.x,h.y,h.z]:[h.x,h.y]):c(e,f,g)};return e=e instanceof b?e:b(e),"undefined"==typeof f?(f=e,e=d):"string"==typeof f?f=b(f):"x"in f||Array.isArray(f)?(g=f,f=e,e=d):f=f instanceof b?f:b(f),g?h(e,f,g):{forward:function(a){return h(e,f,a)},inverse:function(a){return h(f,e,a)}}}}),c("proj4",["proj4/core","proj4/Proj","proj4/Point","proj4/defs","proj4/transform","proj4/mgrs"],function(a,b,c,d,e,f){return a.defaultDatum="WGS84",a.Proj=b,a.WGS84=new a.Proj("WGS84"),a.Point=c,a.defs=d,a.transform=e,a.mgrs=f,a}),b("proj4")}),function(a){var b,c;if("function"==typeof define&&define.amd)define(["leaflet","proj4"],a);else if("undefined"!=typeof module)b=require("leaflet"),c=require("proj4"),module.exports=a(b,c);else{if("undefined"==typeof window.L||"undefined"==typeof window.proj4)throw"Leaflet and proj4 must be loaded first";a(window.L,window.proj4)}}(function(a,b){return a.Proj={},a.Proj._isProj4Obj=function(a){return"undefined"!=typeof a.inverse&&"undefined"!=typeof a.forward},a.Proj.ScaleDependantTransformation=function(a){this.scaleTransforms=a},a.Proj.ScaleDependantTransformation.prototype.transform=function(a,b){return this.scaleTransforms[b].transform(a,b)},a.Proj.ScaleDependantTransformation.prototype.untransform=function(a,b){return this.scaleTransforms[b].untransform(a,b)},a.Proj.Projection=a.Class.extend({initialize:function(c,d){if(a.Proj._isProj4Obj(c))this._proj=c;else{var e=c;if(d)b.defs(e,d);else if(void 0===b.defs[e]){var f=e.split(":");if(f.length>3&&(e=f[f.length-3]+":"+f[f.length-1]),void 0===b.defs[e])throw"No projection definition for code "+e}this._proj=b(e)}},project:function(b){var c=this._proj.forward([b.lng,b.lat]);return new a.Point(c[0],c[1])},unproject:function(b,c){var d=this._proj.inverse([b.x,b.y]);return new a.LatLng(d[1],d[0],c)}}),a.Proj.CRS=a.Class.extend({includes:a.CRS,options:{transformation:new a.Transformation(1,0,-1,0)},initialize:function(b,c,d){var e,f,g,h;if(a.Proj._isProj4Obj(b)?(f=b,e=f.srsCode,h=c||{},this.projection=new a.Proj.Projection(f)):(e=b,g=c,h=d||{},this.projection=new a.Proj.Projection(e,g)),a.Util.setOptions(this,h),this.code=e,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new a.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var i=this.options.resolutions.length-1;i>=0;i--)this.options.resolutions[i]&&(this._scales[i]=1/this.options.resolutions[i])}this.scale=function(a){return this._scales[a]}}}),a.Proj.CRS.TMS=a.Proj.CRS.extend({options:{tileSize:256},initialize:function(b,c,d,e){var f,g,h,i,j;a.Proj._isProj4Obj(b)?(h=b,i=c,j=d||{},j.origin=[i[0],i[3]],a.Proj.CRS.prototype.initialize.call(this,h,j)):(f=b,g=c,i=d,j=e||{},j.origin=[i[0],i[3]],a.Proj.CRS.prototype.initialize.call(this,f,g,j)),this.projectedBounds=i,this._sizes=this._calculateSizes()},_calculateSizes:function(){var b,c,d,e=[],f=this.projectedBounds;for(d=this._scales.length-1;d>=0;d--)this._scales[d]&&(b=this.options.tileSize/this._scales[d],c=f[1]+Math.ceil((f[3]-f[1])/b)*b,e[d]=a.point((f[2]-f[0])/this._scales[d],(c-f[1])*this._scales[d]));return e},getSize:function(a){return this._sizes[a]}}),a.Proj.TileLayer={},a.Proj.TileLayer.TMS=a.TileLayer.extend({options:{continuousWorld:!0},initialize:function(b,c,d){var e,f,g,h,i=!0;if(!(c instanceof a.Proj.CRS.TMS))throw"CRS is not L.Proj.CRS.TMS.";for(a.TileLayer.prototype.initialize.call(this,b,d),this.crs=c,g=this.crs.projectedBounds,h=this.options.minZoom;h<this.options.maxZoom&&i;h++){var j=(g[3]-g[1])/this._projectedTileSize(h);i=Math.abs(j-Math.round(j))>.001}if(!i){for(e={},h=this.options.minZoom;h<this.options.maxZoom;h++)f=g[1]+Math.ceil((g[3]-g[1])/this._projectedTileSize(h))*this._projectedTileSize(h),e[this.crs.scale(h)]=new a.Transformation(1,-g[0],-1,f);this.crs=new a.Proj.CRS.TMS(this.crs.projection._proj,g,this.crs.options),this.crs.transformation=new a.Proj.ScaleDependantTransformation(e)}},getTileUrl:function(b){var c=this._map.getZoom(),d=Math.ceil((this.crs.projectedBounds[3]-this.crs.projectedBounds[1])/this._projectedTileSize(c));return a.Util.template(this._url,a.Util.extend({s:this._getSubdomain(b),z:this._getZoomForUrl(),x:b.x,y:d-b.y-1},this.options))},_projectedTileSize:function(a){return this.options.tileSize/this.crs.scale(a)}}),a.Proj.GeoJSON=a.GeoJSON.extend({initialize:function(b,c){if(b.crs&&"name"===b.crs.type){var d=new a.Proj.CRS(b.crs.properties.name);c=c||{},c.coordsToLatLng=function(b){var c=a.point(b[0],b[1]);return d.projection.unproject(c)}}a.GeoJSON.prototype.initialize.call(this,b,c)}}),a.Proj.geoJson=function(b,c){return new a.Proj.GeoJSON(b,c)},"undefined"!=typeof a.CRS&&(a.CRS.proj4js=function(){return function(b,c,d,e){return e=e||{},d&&(e.transformation=d),new a.Proj.CRS(b,c,e)}}()),a.Proj}),function(){"use strict";L.Proj.CRS.TMS.Daum=new L.Proj.CRS.TMS("EPSG:5181","+proj=tmerc +lat_0=38 +lon_0=127 +k=1 +x_0=200000 +y_0=500000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",[-3e4,-6e4,494288,988576],{resolutions:[2048,1024,512,256,128,64,32,16,8,4,2,1,.5,.25]}),L.Proj.CRS.TMS.Naver=new L.Proj.CRS.TMS("EPSG:5179","+proj=tmerc +lat_0=38 +lon_0=127.5 +k=0.9996 +x_0=1000000 +y_0=2000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",[90112,1192896,614400,1717184],{resolutions:[2048,1024,512,256,128,64,32,16,8,4,2,1,.5,.25]}),L.Proj.CRS.TMS.VWorld=new L.Proj.CRS.TMS("EPSG:900913","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs",[-20037508.34,-20037508.34,20037508.34,20037508.34],{resolutions:[156543.0339,78271.517,39135.7585,19567.8793,9783.93965,4891.96983,2445.98492,1222.99246,611.49623,305.748115,152.874058,76.437029,38.2185145,19.1092573,9.55462865,4.77731433,2.38865717,1.19432859,.5971643,.29858215,.14929108]}),L.Proj.TileLayer.TMS.Provider=L.Proj.TileLayer.TMS.extend({initialize:function(a,b,c){var d=L.Proj.TileLayer.TMS.Provider.providers,e=a.split("."),f=e[0],g=e[1];if(!d[f])throw"No such provider ("+f+")";var h={url:d[f].url,crs:d[f].crs,options:d[f].options};if(g&&"variants"in d[f]){if(!(g in d[f].variants))throw"No such name in provider ("+g+")";var i=d[f].variants[g];h={url:i.url||h.url,crs:i.crs||h.crs,options:L.Util.extend({},h.options,i.options)}}else"function"==typeof h.url&&(h.url=h.url(e.splice(1).join(".")));var j=function(a){return-1===a.indexOf("{attribution.")?a:a.replace(/\{attribution.(\w*)\}/,function(a,b){return j(d[b].options.attribution)})};h.options.attribution=j(h.options.attribution);var k=L.Util.extend({},h.options,c);L.Proj.TileLayer.TMS.prototype.initialize.call(this,h.url,h.crs,k)}}),L.Proj.TileLayer.TMS.Provider.providers={DaumMap:{url:"http://i{s}.maps.daum-img.net/map/image/G03/i/1.20/L{z}/{y}/{x}.png",crs:L.Proj.CRS.TMS.Daum,options:{maxZoom:13,minZoom:0,zoomReverse:!0,zoomOffset:1,subdomains:"0123",continuousWorld:!0,attribution:'Map data &copy; <a href="http://map.daum.net/">DaumMap</a>'},variants:{Street:{},Satellite:{url:"http://s{s}.maps.daum-img.net/L{z}/{y}/{x}.jpg"},Physical:{url:"http://sr{s}.maps.daum-img.net/map/image/G03/sr/1.00/L{z}/{y}/{x}.png",options:{opacity:.75}},Hybrid:{url:"http://h{s}.maps.daum-img.net/map/image/G03/h/1.20/L{z}/{y}/{x}.png"}}},NaverMap:{url:"http://onetile{s}.map.naver.net/get/29/0/0/{z}/{x}/{y}/bl_vc_bg/ol_vc_an",crs:L.Proj.CRS.TMS.Naver,options:{maxZoom:13,minZoom:0,zoomOffset:1,subdomains:"1234",continuousWorld:!0,attribution:'Map data &copy; <a href="http://map.naver.com">NaverMap</a>'},variants:{Street:{},Satellite:{url:"http://onetile{s}.map.naver.net/get/29/0/0/{z}/{x}/{y}/bl_st_bg/ol_st_an"},Cadastral:{url:"http://onetile{s}.map.naver.net/get/29/0/0/{z}/{x}/{y}/bl_vc_bg/ol_lp_cn",options:{opacity:.75}},Hybrid:{url:"http://onetile{s}.map.naver.net/get/29/0/0/{z}/{x}/{y}/bl_st_bg/ol_st_rd/ol_st_an"}}},VWorld:{url:"http://xdworld.vworld.kr:8080/2d/Base/201310/{z}/{x}/{y}.png",crs:L.Proj.CRS.TMS.VWorld,options:{maxZoom:18,minZoom:6,tms:!0,subdomains:"abc",continuousWorld:!0,attribution:'Map data &copy; <a href="http://map.vworld.kr">VWorld</a>'},variants:{Street:{},Satellite:{url:"http://xdworld.vworld.kr:8080/2d/Satellite/201301/{z}/{x}/{y}.jpeg"},Hybrid:{url:"http://xdworld.vworld.kr:8080/2d/Hybrid/201310/{z}/{x}/{y}.png"}}}},L.Proj.TileLayer.TMS.provider=function(a,b,c){return new L.Proj.TileLayer.TMS.Provider(a,b,c)},L.Control.Layers.Provided=L.Control.Layers.extend({initialize:function(a,b,c){var d,e=function(a){return a.replace(/\./g,": ").replace(/([a-z])([A-Z])/g,"$1 $2")};a.length&&(!function(){for(var b={},c=a.length,f=0;c>f;)"string"==typeof a[f]&&(0===f?(d=L.tileLayer.provider(a[0]),b[e(a[f])]=d):b[e(a[f])]=L.tileLayer.provider(a[f])),f++;a=b}(),this._first=d),b&&b.length&&!function(){for(var c={},d=b.length,f=0;d>f;)"string"==typeof a[f]&&(c[e(b[f])]=L.tileLayer.provider(b[f])),f++;b=c}(),L.Control.Layers.prototype.initialize.call(this,a,b,c)},onAdd:function(a){return this._first.addTo(a),L.Control.Layers.prototype.onAdd.call(this,a)}}),L.control.layers.provided=function(a,b,c){return new L.Control.Layers.Provided(a,b,c)}}(),function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){console.log(a),a.classList.add(b)},f=function(a,b){console.log(a),a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define(g):a.classie=g}(window),function(a){function b(a){return new RegExp("^"+a+"$")}function c(a,b){for(var c=Array.prototype.slice.call(arguments).splice(2),d=a.split("."),e=d.pop(),f=0;f<d.length;f++)b=b[d[f]];return b[e].apply(this,c)}var d=[],e={options:{prependExistingHelpBlock:!1,sniffHtml:!0,preventSubmit:!0,submitError:!1,submitSuccess:!1,semanticallyStrict:!1,autoAdd:{helpBlocks:!0},filter:function(){return!0}},methods:{init:function(b){var c=a.extend(!0,{},e);c.options=a.extend(!0,c.options,b);var h=this,i=a.unique(h.map(function(){return a(this).parents("form")[0]}).toArray());return a(i).bind("submit",function(b){var d=a(this),e=0,f=d.find("input,textarea,select").not("[type=submit],[type=image]").filter(c.options.filter);f.trigger("submit.validation").trigger("validationLostFocus.validation"),f.each(function(b,c){var d=a(c),f=d.parents(".form-group").first();f.hasClass("warning")&&(f.removeClass("warning").addClass("error"),e++)}),f.trigger("validationLostFocus.validation"),e?(c.options.preventSubmit&&b.preventDefault(),d.addClass("error"),a.isFunction(c.options.submitError)&&c.options.submitError(d,b,f.jqBootstrapValidation("collectErrors",!0))):(d.removeClass("error"),a.isFunction(c.options.submitSuccess)&&c.options.submitSuccess(d,b))}),this.each(function(){var b=a(this),e=b.parents(".form-group").first(),h=e.find(".help-block").first(),i=b.parents("form").first(),j=[];if(!h.length&&c.options.autoAdd&&c.options.autoAdd.helpBlocks&&(h=a('<div class="help-block" />'),e.find(".controls").append(h),d.push(h[0])),c.options.sniffHtml){var k="";if(void 0!==b.attr("pattern")&&(k="Not in the expected format<!-- data-validation-pattern-message to override -->",b.data("validationPatternMessage")&&(k=b.data("validationPatternMessage")),b.data("validationPatternMessage",k),b.data("validationPatternRegex",b.attr("pattern"))),void 0!==b.attr("max")||void 0!==b.attr("aria-valuemax")){var l=void 0!==b.attr("max")?b.attr("max"):b.attr("aria-valuemax");k="Too high: Maximum of '"+l+"'<!-- data-validation-max-message to override -->",b.data("validationMaxMessage")&&(k=b.data("validationMaxMessage")),b.data("validationMaxMessage",k),b.data("validationMaxMax",l)}if(void 0!==b.attr("min")||void 0!==b.attr("aria-valuemin")){
var m=void 0!==b.attr("min")?b.attr("min"):b.attr("aria-valuemin");k="Too low: Minimum of '"+m+"'<!-- data-validation-min-message to override -->",b.data("validationMinMessage")&&(k=b.data("validationMinMessage")),b.data("validationMinMessage",k),b.data("validationMinMin",m)}void 0!==b.attr("maxlength")&&(k="Too long: Maximum of '"+b.attr("maxlength")+"' characters<!-- data-validation-maxlength-message to override -->",b.data("validationMaxlengthMessage")&&(k=b.data("validationMaxlengthMessage")),b.data("validationMaxlengthMessage",k),b.data("validationMaxlengthMaxlength",b.attr("maxlength"))),void 0!==b.attr("minlength")&&(k="Too short: Minimum of '"+b.attr("minlength")+"' characters<!-- data-validation-minlength-message to override -->",b.data("validationMinlengthMessage")&&(k=b.data("validationMinlengthMessage")),b.data("validationMinlengthMessage",k),b.data("validationMinlengthMinlength",b.attr("minlength"))),(void 0!==b.attr("required")||void 0!==b.attr("aria-required"))&&(k=c.builtInValidators.required.message,b.data("validationRequiredMessage")&&(k=b.data("validationRequiredMessage")),b.data("validationRequiredMessage",k)),void 0!==b.attr("type")&&"number"===b.attr("type").toLowerCase()&&(k=c.builtInValidators.number.message,b.data("validationNumberMessage")&&(k=b.data("validationNumberMessage")),b.data("validationNumberMessage",k)),void 0!==b.attr("type")&&"email"===b.attr("type").toLowerCase()&&(k="Not a valid email address<!-- data-validator-validemail-message to override -->",b.data("validationValidemailMessage")?k=b.data("validationValidemailMessage"):b.data("validationEmailMessage")&&(k=b.data("validationEmailMessage")),b.data("validationValidemailMessage",k)),void 0!==b.attr("minchecked")&&(k="Not enough options checked; Minimum of '"+b.attr("minchecked")+"' required<!-- data-validation-minchecked-message to override -->",b.data("validationMincheckedMessage")&&(k=b.data("validationMincheckedMessage")),b.data("validationMincheckedMessage",k),b.data("validationMincheckedMinchecked",b.attr("minchecked"))),void 0!==b.attr("maxchecked")&&(k="Too many options checked; Maximum of '"+b.attr("maxchecked")+"' required<!-- data-validation-maxchecked-message to override -->",b.data("validationMaxcheckedMessage")&&(k=b.data("validationMaxcheckedMessage")),b.data("validationMaxcheckedMessage",k),b.data("validationMaxcheckedMaxchecked",b.attr("maxchecked")))}void 0!==b.data("validation")&&(j=b.data("validation").split(",")),a.each(b.data(),function(a,b){var c=a.replace(/([A-Z])/g,",$1").split(",");"validation"===c[0]&&c[1]&&j.push(c[1])});var n=j,o=[];do a.each(j,function(a,b){j[a]=f(b)}),j=a.unique(j),o=[],a.each(n,function(d,e){if(void 0!==b.data("validation"+e+"Shortcut"))a.each(b.data("validation"+e+"Shortcut").split(","),function(a,b){o.push(b)});else if(c.builtInValidators[e.toLowerCase()]){var g=c.builtInValidators[e.toLowerCase()];"shortcut"===g.type.toLowerCase()&&a.each(g.shortcut.split(","),function(a,b){b=f(b),o.push(b),j.push(b)})}}),n=o;while(n.length>0);var p={};a.each(j,function(d,e){var g=b.data("validation"+e+"Message"),h=void 0!==g,i=!1;if(g=g?g:"'"+e+"' validation failed <!-- Add attribute 'data-validation-"+e.toLowerCase()+"-message' to input to change this message -->",a.each(c.validatorTypes,function(c,d){void 0===p[c]&&(p[c]=[]),i||void 0===b.data("validation"+e+f(d.name))||(p[c].push(a.extend(!0,{name:f(d.name),message:g},d.init(b,e))),i=!0)}),!i&&c.builtInValidators[e.toLowerCase()]){var j=a.extend(!0,{},c.builtInValidators[e.toLowerCase()]);h&&(j.message=g);var k=j.type.toLowerCase();"shortcut"===k?i=!0:a.each(c.validatorTypes,function(c,d){void 0===p[c]&&(p[c]=[]),i||k!==c.toLowerCase()||(b.data("validation"+e+f(d.name),j[d.name.toLowerCase()]),p[k].push(a.extend(j,d.init(b,e))),i=!0)})}i||a.error("Cannot find validation info for '"+e+"'")}),h.data("original-contents",h.data("original-contents")?h.data("original-contents"):h.html()),h.data("original-role",h.data("original-role")?h.data("original-role"):h.attr("role")),e.data("original-classes",e.data("original-clases")?e.data("original-classes"):e.attr("class")),b.data("original-aria-invalid",b.data("original-aria-invalid")?b.data("original-aria-invalid"):b.attr("aria-invalid")),b.bind("validation.validation",function(d,e){var f=g(b),h=[];return a.each(p,function(d,g){(f||f.length||e&&e.includeEmpty||c.validatorTypes[d].blockSubmit&&e&&e.submitting)&&a.each(g,function(a,e){c.validatorTypes[d].validate(b,f,e)&&h.push(e.message)})}),h}),b.bind("getValidators.validation",function(){return p}),b.bind("submit.validation",function(){return b.triggerHandler("change.validation",{submitting:!0})}),b.bind(["keyup","focus","blur","click","keydown","keypress","change"].join(".validation ")+".validation",function(d,f){var j=g(b),k=[];e.find("input,textarea,select").each(function(c,d){var e=k.length;if(a.each(a(d).triggerHandler("validation.validation",f),function(a,b){k.push(b)}),k.length>e)a(d).attr("aria-invalid","true");else{var g=b.data("original-aria-invalid");a(d).attr("aria-invalid",void 0!==g?g:!1)}}),i.find("input,select,textarea").not(b).not('[name="'+b.attr("name")+'"]').trigger("validationLostFocus.validation"),k=a.unique(k.sort()),k.length?(e.removeClass("success error").addClass("warning"),c.options.semanticallyStrict&&1===k.length?h.html(k[0]+(c.options.prependExistingHelpBlock?h.data("original-contents"):"")):h.html('<ul role="alert"><li>'+k.join("</li><li>")+"</li></ul>"+(c.options.prependExistingHelpBlock?h.data("original-contents"):""))):(e.removeClass("warning error success"),j.length>0&&e.addClass("success"),h.html(h.data("original-contents"))),"blur"===d.type&&e.removeClass("success")}),b.bind("validationLostFocus.validation",function(){e.removeClass("success")})})},destroy:function(){return this.each(function(){var b=a(this),c=b.parents(".form-group").first(),e=c.find(".help-block").first();b.unbind(".validation"),e.html(e.data("original-contents")),c.attr("class",c.data("original-classes")),b.attr("aria-invalid",b.data("original-aria-invalid")),e.attr("role",b.data("original-role")),d.indexOf(e[0])>-1&&e.remove()})},collectErrors:function(b){var c={};return this.each(function(b,d){var e=a(d),f=e.attr("name"),g=e.triggerHandler("validation.validation",{includeEmpty:!0});c[f]=a.extend(!0,g,c[f])}),a.each(c,function(a,b){0===b.length&&delete c[a]}),c},hasErrors:function(){var b=[];return this.each(function(c,d){b=b.concat(a(d).triggerHandler("getValidators.validation")?a(d).triggerHandler("validation.validation",{submitting:!0}):[])}),b.length>0},override:function(b){e=a.extend(!0,e,b)}},validatorTypes:{callback:{name:"callback",init:function(a,b){return{validatorName:b,callback:a.data("validation"+b+"Callback"),lastValue:a.val(),lastValid:!0,lastFinished:!0}},validate:function(a,b,d){if(d.lastValue===b&&d.lastFinished)return!d.lastValid;if(d.lastFinished===!0){d.lastValue=b,d.lastValid=!0,d.lastFinished=!1;var e=d,f=a;c(d.callback,window,a,b,function(a){e.lastValue===a.value&&(e.lastValid=a.valid,a.message&&(e.message=a.message),e.lastFinished=!0,f.data("validation"+e.validatorName+"Message",e.message),setTimeout(function(){f.trigger("change.validation")},1))})}return!1}},ajax:{name:"ajax",init:function(a,b){return{validatorName:b,url:a.data("validation"+b+"Ajax"),lastValue:a.val(),lastValid:!0,lastFinished:!0}},validate:function(b,c,d){return""+d.lastValue==""+c&&d.lastFinished===!0?d.lastValid===!1:(d.lastFinished===!0&&(d.lastValue=c,d.lastValid=!0,d.lastFinished=!1,a.ajax({url:d.url,data:"value="+c+"&field="+b.attr("name"),dataType:"json",success:function(a){""+d.lastValue==""+a.value&&(d.lastValid=!!a.valid,a.message&&(d.message=a.message),d.lastFinished=!0,b.data("validation"+d.validatorName+"Message",d.message),setTimeout(function(){b.trigger("change.validation")},1))},failure:function(){d.lastValid=!0,d.message="ajax call failed",d.lastFinished=!0,b.data("validation"+d.validatorName+"Message",d.message),setTimeout(function(){b.trigger("change.validation")},1)}})),!1)}},regex:{name:"regex",init:function(a,c){return{regex:b(a.data("validation"+c+"Regex"))}},validate:function(a,b,c){return!c.regex.test(b)&&!c.negative||c.regex.test(b)&&c.negative}},required:{name:"required",init:function(a,b){return{}},validate:function(a,b,c){return!(0!==b.length||c.negative)||!!(b.length>0&&c.negative)},blockSubmit:!0},match:{name:"match",init:function(a,b){var c=a.parents("form").first().find('[name="'+a.data("validation"+b+"Match")+'"]').first();return c.bind("validation.validation",function(){a.trigger("change.validation",{submitting:!0})}),{element:c}},validate:function(a,b,c){return b!==c.element.val()&&!c.negative||b===c.element.val()&&c.negative},blockSubmit:!0},max:{name:"max",init:function(a,b){return{max:a.data("validation"+b+"Max")}},validate:function(a,b,c){return parseFloat(b,10)>parseFloat(c.max,10)&&!c.negative||parseFloat(b,10)<=parseFloat(c.max,10)&&c.negative}},min:{name:"min",init:function(a,b){return{min:a.data("validation"+b+"Min")}},validate:function(a,b,c){return parseFloat(b)<parseFloat(c.min)&&!c.negative||parseFloat(b)>=parseFloat(c.min)&&c.negative}},maxlength:{name:"maxlength",init:function(a,b){return{maxlength:a.data("validation"+b+"Maxlength")}},validate:function(a,b,c){return b.length>c.maxlength&&!c.negative||b.length<=c.maxlength&&c.negative}},minlength:{name:"minlength",init:function(a,b){return{minlength:a.data("validation"+b+"Minlength")}},validate:function(a,b,c){return b.length<c.minlength&&!c.negative||b.length>=c.minlength&&c.negative}},maxchecked:{name:"maxchecked",init:function(a,b){var c=a.parents("form").first().find('[name="'+a.attr("name")+'"]');return c.bind("click.validation",function(){a.trigger("change.validation",{includeEmpty:!0})}),{maxchecked:a.data("validation"+b+"Maxchecked"),elements:c}},validate:function(a,b,c){return c.elements.filter(":checked").length>c.maxchecked&&!c.negative||c.elements.filter(":checked").length<=c.maxchecked&&c.negative},blockSubmit:!0},minchecked:{name:"minchecked",init:function(a,b){var c=a.parents("form").first().find('[name="'+a.attr("name")+'"]');return c.bind("click.validation",function(){a.trigger("change.validation",{includeEmpty:!0})}),{minchecked:a.data("validation"+b+"Minchecked"),elements:c}},validate:function(a,b,c){return c.elements.filter(":checked").length<c.minchecked&&!c.negative||c.elements.filter(":checked").length>=c.minchecked&&c.negative},blockSubmit:!0}},builtInValidators:{email:{name:"Email",type:"shortcut",shortcut:"validemail"},validemail:{name:"Validemail",type:"regex",regex:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}",message:"Not a valid email address<!-- data-validator-validemail-message to override -->"},passwordagain:{name:"Passwordagain",type:"match",match:"password",message:"Does not match the given password<!-- data-validator-paswordagain-message to override -->"},positive:{name:"Positive",type:"shortcut",shortcut:"number,positivenumber"},negative:{name:"Negative",type:"shortcut",shortcut:"number,negativenumber"},number:{name:"Number",type:"regex",regex:"([+-]?\\d+(\\.\\d*)?([eE][+-]?[0-9]+)?)?",message:"Must be a number<!-- data-validator-number-message to override -->"},integer:{name:"Integer",type:"regex",regex:"[+-]?\\d+",message:"No decimal places allowed<!-- data-validator-integer-message to override -->"},positivenumber:{name:"Positivenumber",type:"min",min:0,message:"Must be a positive number<!-- data-validator-positivenumber-message to override -->"},negativenumber:{name:"Negativenumber",type:"max",max:0,message:"Must be a negative number<!-- data-validator-negativenumber-message to override -->"},required:{name:"Required",type:"required",message:"This is required<!-- data-validator-required-message to override -->"},checkone:{name:"Checkone",type:"minchecked",minchecked:1,message:"Check at least one option<!-- data-validation-checkone-message to override -->"}}},f=function(a){return a.toLowerCase().replace(/(^|\s)([a-z])/g,function(a,b,c){return b+c.toUpperCase()})},g=function(b){var c=b.val(),d=b.attr("type");return"checkbox"===d&&(c=b.is(":checked")?c:""),"radio"===d&&(c=a('input[name="'+b.attr("name")+'"]:checked').length>0?c:""),c};a.fn.jqBootstrapValidation=function(b){return e.methods[b]?e.methods[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery.jqBootstrapValidation"),null):e.methods.init.apply(this,arguments)},a.jqBootstrapValidation=function(b){a(":input").not("[type=image],[type=submit]").jqBootstrapValidation.apply(this,arguments)}}(jQuery),angular.module("deitel.controllers",["nvd3","ngSanitize","ui.select"]).controller("TwoCtrl",["$window","$timeout","$location","$scope","$routeParams","$filter","$log","$sampleservice","$burl","$base",function(a,b,c,d,e,f,g,h,i,j){console.log("begin OneCtrl ...."),d.startDate=new Date(2014,0,1),d.endDate=new Date(2014,12,1),d.ftype={},d.ftype.itemArray=[{id:1,name:"매매"},{id:2,name:"전세"}],d.ftype.selectedItem=d.ftype.itemArray[0],d.fmetric={},d.fmetric.itemArray=[{id:0,name:"거래량",unit:"건"},{id:1,name:"평당가격",unit:"천만원"}],d.fmetric.selectedItem=d.fmetric.itemArray[1],d.farea={},d.farea.itemArray=[{id:1,name:"서울",latlng:[37.53800253054263,127.01608766689583],zoom:5},{id:2,name:"경기",latlng:[37.53800253054263,127.01608766689583],zoom:3}],d.farea.selectedItem=d.farea.itemArray[0],d.map=L.map("_map",{crs:L.Proj.CRS.TMS.Daum,continuousWorld:!0,worldCopyJump:!1,zoomControl:!0}).setView([37.53800253054263,127.01608766689583],5),d.map.doubleClickZoom.disable(),d.map.scrollWheelZoom.disable(),L.Proj.TileLayer.TMS.provider("DaumMap.Satellite").addTo(d.map),L.Proj.TileLayer.TMS.provider("DaumMap.Hybrid").addTo(d.map),d.schoolmap=L.map("_schoolmap",{crs:L.Proj.CRS.TMS.Daum,continuousWorld:!0,worldCopyJump:!1,zoomControl:!0}).setView([37.53800253054263,127.01608766689583],5),d.schoolmap.doubleClickZoom.disable(),d.schoolmap.scrollWheelZoom.disable(),L.Proj.TileLayer.TMS.provider("DaumMap.Satellite").addTo(d.schoolmap),L.Proj.TileLayer.TMS.provider("DaumMap.Hybrid").addTo(d.schoolmap),d.gasungbimap=L.map("_gasungbimap",{crs:L.Proj.CRS.TMS.Daum,continuousWorld:!0,worldCopyJump:!1,zoomControl:!0}).setView([37.53800253054263,127.01608766689583],5),d.gasungbimap.doubleClickZoom.disable(),d.gasungbimap.scrollWheelZoom.disable(),L.Proj.TileLayer.TMS.provider("DaumMap.Satellite").addTo(d.gasungbimap),L.Proj.TileLayer.TMS.provider("DaumMap.Hybrid").addTo(d.gasungbimap),d.focusmap=L.map("_focusmap",{crs:L.Proj.CRS.TMS.Daum,continuousWorld:!0,worldCopyJump:!1,zoomControl:!0}).setView([37.53800253054263,127.01608766689583],5),d.focusmap.doubleClickZoom.disable(),d.focusmap.scrollWheelZoom.disable(),L.Proj.TileLayer.TMS.provider("DaumMap.Street").addTo(d.focusmap),d.drawStart=function(){console.log("------> drawStart ");var a=h.listMainMap([],d.farea.selectedItem.id+"_"+d.ftype.selectedItem.id);a.then(function(a){g.log("----$scope.listMainMap in sampleCtrl -----"),g.log(a),b(function(){d.mainmapdata=a,d.drawMainMap(),d.getSchoolData(),d.getGasungbiMap()},300)})},d.mainmapmarkerlst=[],d.drawMainMap=function(){d.mainmapmarkerlst.forEach(function(a){d.map.removeLayer(a)}),d.map.setView(d.farea.selectedItem.latlng,d.farea.selectedItem.zoom);var a={radius:15,opacity:.72,duration:200,lng:function(a){return a.lng},lat:function(a){return a.lat},value:function(a){var b=d3.mean(a.map(function(a){return a.o.value.split(":")[d.fmetric.selectedItem.id]}));return b},valueFloor:void 0,valueCeil:void 0,onclick:function(a){var c=d3.mean(a,function(a){return a.o.lng}),e=d3.mean(a,function(a){return a.o.lat});console.log(c+":"+e),d.focusmap.setView([e,c],9),e=Math.round(100*e)/100,c=Math.round(100*c)/100;var f=d.rolledmapdata.filter(function(a){return parseFloat(a.key)==parseFloat(e)})[0].values.filter(function(a){return parseFloat(a.key)==parseFloat(c)});try{d.drawDetailMap2(f[0].values)}catch(g){console.log("plz center move..")}b(function(){$("html, body").animate({scrollTop:$("#focusmap").offset().top},500)},500)}},c=L.hexbinLayer(a).addTo(d.map);c.colorScale().range(["#ffeda0","#feb24c","#fc4e2a","#bd0026","#800026"]),c.data(d.mainmapdata),d.mainmapmarkerlst.push(c),d.rolledmapdata=d3.nest().key(function(a){return Math.round(100*a.lat)/100}).key(function(a){return Math.round(100*a.lng)/100}).entries(d.mainmapdata),console.log(d.rolledmapdata)},d.schoolmapmarkerlst=[],d.drawSchoolGradeMap=function(a){console.log("$scope.drawSchoolGradeMap--->"),d.schoolmapmarkerlst.forEach(function(a){d.schoolmap.removeLayer(a)}),d.schoolmap.setView(d.farea.selectedItem.latlng,d.farea.selectedItem.zoom);var c={radius:15,opacity:.72,duration:200,lng:function(a){return a.lng},lat:function(a){return a.lat},value:function(a){var b=d3.mean(a.map(function(a){return a.o.rn}));return b},valueFloor:void 0,valueCeil:void 0,onclick:function(a){var c=d3.mean(a,function(a){return a.o.lng}),e=d3.mean(a,function(a){return a.o.lat});console.log(c+":"+e),d.focusmap.setView([e,c],9),e=Math.round(100*e)/100,c=Math.round(100*c)/100;var f=d.rolledmapdata.filter(function(a){return parseFloat(a.key)==parseFloat(e)})[0].values.filter(function(a){return parseFloat(a.key)==parseFloat(c)});try{d.drawDetailMap2(f[0].values)}catch(g){console.log("plz center move..")}b(function(){$("html, body").animate({scrollTop:$("#focusmap").offset().top},500)},500)}},e=L.hexbinLayer(c).addTo(d.schoolmap);e.colorScale().range(["#800026","#bd0026","#fc4e2a","#feb24c","#ffeda0"]),d.schoolmapmarkerlst.push(e),e.data(a)},d.gasungbimapmarkerlst=[],d.getGasungbiMap=function(){console.log("------> getGasungbiMap ");var a=h.listGasungbiMap([],d.farea.selectedItem.id+"_"+d.ftype.selectedItem.id);a.then(function(a){g.log("----$scope.listGasungbiMap in OneCtrl -----"),b(function(){d.drawGasungbiMap(a)},300)})},d.drawGasungbiMap=function(a){d.gasungbimapmarkerlst.forEach(function(a){d.gasungbimap.removeLayer(a)}),d.gasungbimap.setView(d.farea.selectedItem.latlng,d.farea.selectedItem.zoom),console.log("$scope.drawGasungbiMap --> "),console.log(a);var c=d3.extent(a.filter(function(a){return"apt"==a.typef}),function(a){return a.rn}),e=d3.extent(a.filter(function(a){return"sch"==a.typef}),function(a){return a.rn}),f=d3.scale.linear().domain(c).range([1,100]),g=d3.scale.linear().domain(e).range([1,100]),h={radius:15,opacity:.72,duration:200,lng:function(a){return a.lng},lat:function(a){return a.lat},value:function(a){var b=d3.mean(a.filter(function(a){return"apt"==a.o.typef}).map(function(a){return f(a.o.rn)})),c=d3.mean(a.filter(function(a){return"sch"==a.o.typef}).map(function(a){return g(a.o.rn)}));return(_.isUndefined(b)?1:b)+(_.isUndefined(c)?1:c)},valueFloor:void 0,valueCeil:void 0,onclick:function(a){var c=d3.mean(a,function(a){return a.o.lng}),e=d3.mean(a,function(a){return a.o.lat});console.log(c+":"+e),d.focusmap.setView([e,c],9),e=Math.round(100*e)/100,c=Math.round(100*c)/100;var f=d.rolledmapdata.filter(function(a){return parseFloat(a.key)==parseFloat(e)})[0].values.filter(function(a){return parseFloat(a.key)==parseFloat(c)});try{d.drawDetailMap2(f[0].values)}catch(g){console.log("plz center move..")}b(function(){$("html, body").animate({scrollTop:$("#focusmap").offset().top},500)},500)}},i=L.hexbinLayer(h).addTo(d.gasungbimap);i.colorScale().range(["#800026","#bd0026","#fc4e2a","#feb24c","#ffeda0"]),d.gasungbimapmarkerlst.push(i),i.data(a)},d.detailmarkerlst2=[],d.drawDetailMap2=function(a){d.detailmarkerlst2.forEach(function(a){d.focusmap.removeLayer(a)});var b=new L.FeatureGroup,c=L.Icon.Label.extend({options:{iconUrl:"views/s.png",shadowUrl:null,iconSize:new L.Point(24,24),iconAnchor:new L.Point(0,1),labelAnchor:new L.Point(26,0),wrapperAnchor:new L.Point(12,13),labelClassName:"sweet-deal-label"}});a.forEach(function(a){var e='<table class="table table-striped table-hover" style="color:#000"><thead><tr class="info" style="color:#000"><td>아파트명</td><td>'+d.fmetric.selectedItem.name+'</td></tr></thead><tbody><tr><td><a href="#" onclick="drawChart(\''+a.series+"/"+a.si_series+"/"+a.gu_series+"/"+a.avrprice+"')\">"+a.aptnm+")</a></td><td>"+Math.round(a.value.split(":")[d.fmetric.selectedItem.id])+"</td></tr></tbody></table>";b.addLayer(new L.Marker(new L.LatLng(a.lat,a.lng),{icon:new c({labelText:a.aptnm})}).bindPopup(e))}),d.detailmarkerlst2.push(b),d.focusmap.addLayer(b)},d.options={chart:{type:"multiBarChart",height:650,margin:{top:20,right:20,bottom:60,left:65},x:function(a){return new Date(a[0].substr(0,4),a[0].substr(4,2),a[0].substr(6,2)).getTime()},y:function(a){return parseFloat(a[1])},color:d3.scale.category10().range(),transitionDuration:300,stacked:!1,duration:500,xAxis:{axisLabel:"기간",tickFormat:function(a){return d3.time.format("%Y%m%d")(new Date(a))},showMaxMin:!0,staggerLabels:!0},yAxis:{axisLabel:"거래량(건)",tickFormat:function(a){return d3.format("d")(a)},showMaxMin:!0,axisLabelDistance:-20}}},a.drawChart=function(c){var e=function(a,b){return new Date(a.split(":")[0].substr(0,4)+"/"+a.split(":")[0].substr(4,2)+"/01")-new Date(b.split(":")[0].substr(0,4)+"/"+b.split(":")[0].substr(4,2)+"/01")},f=c.split("/")[0].split(","),g=c.split("/")[1].split(","),h=c.split("/")[2].split(","),i=c.split("/")[3].split(",");a.drawAreaChart(i),g.sort(e),h.sort(e);for(var j={},k=moment(new Date(parseInt(g[0].split(":")[0].substr(0,4)),parseInt(g[0].split(":")[0].substr(4,2))-1,1)),l=0;l<g.length;l++)j[k.format("YYYYMMDD")]={si:0,gu:0,my:0},k.add(1,"month");for(var l=0;l<g.length;l++)j[g[l].split(":")[0]+"01"].si=g[l].split(":")[d.fmetric.selectedItem.id+1];for(var l=0;l<h.length;l++)j[h[l].split(":")[0]+"01"].gu=h[l].split(":")[d.fmetric.selectedItem.id+1];for(var l=0;l<f.length;l++)j[f[l].split(":")[0]+"01"].my=f[l].split(":")[d.fmetric.selectedItem.id+1];var c=[],m=[],n=[],o=[];Object.keys(j).map(function(a){m.push([a,j[a].my]),n.push([a,j[a].si]),o.push([a,j[a].gu])}),d.$apply(function(){d.options.chart.yAxis.axisLabel=d.fmetric.selectedItem.name+"("+d.fmetric.selectedItem.unit+")",d.data=[{key:"아파트",values:m},{key:"시평균",values:n},{key:"구평균",values:o}],console.log(d.data)}),b(function(){d.api.update(),d.api.refresh(),console.log("updated... but not.."),$("html, body").animate({scrollTop:$("#bchart").offset().top},500)},500)},d.options2=_.clone(d.options),a.drawAreaChart=function(a){console.log("$window.drawAreaChart -----> "),console.log(a),1==d.fmetric.selectedItem.id&&(d.options2.chart.yAxis.axisLabel="평형별 가격(원)");var c=d3.nest().key(function(a){return a.split(":")[0]}).key(function(a){return a.split(":")[1]}).entries(a);console.log(c);for(var e={},f=moment(d.startDate),g=0;12>g;g++)e[f.format("YYYYMMDD")]=0,f.add(1,"month");d.$apply(function(){d.adata=c.map(function(a){var b=_.clone(e),c=a.values,f=[];return Object.keys(b).map(function(a){var b=c.filter(function(b){return a==b.key+"01"})[0],e=0;e=b?b.values[0].split(":")[d.fmetric.selectedItem.id+2]:0,f.push([a,e])}),{key:a.key,values:f}})}),b(function(){d.aapi.update(),d.aapi.refresh()},1500)};var k={type:"FeatureCollection",features:[],properties:{fields:{category:{name:"badcategory",lookup:{1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"}}},attribution:"PIZZASTUDIO 2015 Inc."}},l="badcategory",m=30;d.metadata=_.clone(k.properties),d.defineFeature=function(a,b){var c=a.properties[l],d=a.properties[l],e="marker category-"+c+" icon-"+d,f=L.divIcon({className:e,iconSize:null});return L.marker(b,{icon:f})},d.defineFeaturePopup=function(a,b){var c=a.properties,d='<table class="table table-striped table-hover" style="color:#000"><thead style="color:#fff;"><tr><td>학교명</td><td>주소</td><td>순위</td></tr></thead><tbody><tr><td class="success" style="cursor:pointer;text-decoration: underline;">'+c.name+'</td><td class="danger">'+c.addr+'</td><td class="waring">'+c.rank+"</td></tr></tbody></table>";b.bindPopup(d,{offset:L.point(1,-2),maxWidth:700})},d.defineClusterIcon=function(a){var b=a.getAllChildMarkers(),c=b.length,e=1,f=m-2*e-(10>c?12:100>c?8:1e3>c?4:0),g=2*(f+e),h=d3.nest().key(function(a){return a.feature.properties[l]}).entries(b,d3.map),i=d.bakeThePie({data:h,valueFunc:function(a){return a.values.length},legendFunc:function(a){var b=0,c=0;return a.forEach(function(a){b+=a.values.filter(function(a){return a.feature.properties.tci>=.3}).length,c+=a.values.length}),b/c*100},strokeWidth:1,outerRadius:f,innerRadius:f-10,pieClass:"cluster-pie",pieLabel:c,pieLabelClass:"marker-cluster-pie-label",pathClassFunc:function(a){return"category-"+a.data.key},pathTitleFunc:function(a){return console.log("")}}),j=new L.DivIcon({html:i,className:"marker-cluster",iconSize:new L.Point(g,g)});return j},d.bakeThePie=function(a){if(!a.data||!a.valueFunc)return"";var b=a.data,c=a.valueFunc,e=a.legendFunc,f=a.outerRadius?a.outerRadius:28,g=a.innerRadius?a.innerRadius:f-10,h=a.strokeWidth?a.strokeWidth:1,i=a.pathClassFunc?a.pathClassFunc:function(){return""},j=a.pathTitleFunc?a.pathTitleFunc:function(){return""},k=a.pieClass?a.pieClass:"marker-cluster-pie",l=a.pieLabel?a.pieLabel:d3.sum(b,c),m=a.pieLabelClass?a.pieLabelClass:"marker-cluster-pie-label",n=f+h,o=2*n,p=o,q=d3.layout.pie(),r=d3.svg.arc().innerRadius(g).outerRadius(f),s=document.createElementNS(d3.ns.prefix.svg,"svg"),t=d3.select(s).data([b]).attr("class",k).attr("width",o).attr("height",p),u=t.selectAll("g.arc").data(q.value(c)).enter().append("svg:g").attr("class","arc").attr("transform","translate("+n+","+n+")");return u.append("svg:path").attr("class",i).attr("stroke-width",h).attr("d",r).append("svg:title").text(j),e(b)>1?(t.append("circle").attr("r",g).attr("cx",n).attr("cy",n).attr("fill","#4d4d4d"),t.append("text").attr("x",n).attr("y",n).attr("class",m).attr("text-anchor","middle").attr("dy",".3em").attr("fill","white").text(l)):t.append("text").attr("x",n).attr("y",n).attr("class",m).attr("text-anchor","middle").attr("dy",".3em").text(l),d.serializeXmlNode(s)},d.serializeXmlNode=function(a){return"undefined"!=typeof window.XMLSerializer?(new window.XMLSerializer).serializeToString(a):"undefined"!=typeof a.xml?a.xml:""},d.getSchoolData=function(){console.log("------> drawSchoolMap ");var a=h.listSchoolMap([],d.farea.selectedItem.id);a.then(function(a){g.log("----$scope.getSchoolData in OneCtrl -----"),b(function(){d.drawSchoolMap(a),d.drawSchoolGradeMap(a)},300)})},d.markersref={c:{}},d.drawSchoolMap=function(a){console.log("--  begin $scope.drawSchoolMap ----> "),_.isUndefined(d.markersref.c.cluster)||_.isUndefined(d.markersref.c.markers)||d.markersref.c.cluster.removeLayer(d.markersref.c.markers);d.cellgeojson=_.clone(k),d.rnscale=function(a){return 101>a?"5":a>=101&&301>a?"4":a>=301&&1001>a?"3":a>=1001&&2001>a?"2":a>=2001?"1":void 0},d.cellgeojson.features=a.map(function(a){return{geometry:{type:"Point",coordinates:[a.lng,a.lat]},type:"Feature",properties:{badcategory:d.rnscale(a.rn),name:a.name,addr:a.addr,rank:a.rn}}}),console.log(d.rnscale(1)),console.log(d.rnscale(324)),d.markers=L.geoJson(d.cellgeojson,{pointToLayer:d.defineFeature,onEachFeature:d.defineFeaturePopup}),d.markerclusters=L.markerClusterGroup({maxClusterRadius:2*m,iconCreateFunction:d.defineClusterIcon}),d.markerclusters.addTo(d.focusmap),d.markerclusters.addLayer(d.markers),d.markersref.c.cluster=d.markerclusters,d.markersref.c.markers=d.markers,d.focusmap.attributionControl.addAttribution(d.metadata.attribution)};var n=!1;d.focusmap.on("dragend",function(a){n||b(function(){var a=d.focusmap.getCenter(),b=Math.round(100*a.lat)/100,c=Math.round(100*a.lng)/100;console.log(b+"/"+c);var e=d.rolledmapdata.filter(function(a){return parseFloat(a.key)==b})[0].values.filter(function(a){return parseFloat(a.key)==c});try{d.drawDetailMap2(e[0].values)}catch(f){console.log("plz center move..")}},500)})}]),angular.module("deitel.services",[]).factory("$burl",function(a,b,c,d){return{get:function(a){return a}}}).factory("$base",function(a,b,c){return this.url="",{set:function(a){this.url=a},getUrl:function(){return this.url},query:function(a,c,d,e,f){e=e||function(){},f=f||function(){};var g={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},h=_.isUndefined(a)?"":$.param(a);console.log("-------- query ---------"),console.log(h),b({method:d,data:h,headers:g,url:c}).success(function(b){e(a,b)}).error(function(b){f(a)})},get:function(b,c){var d="POST",e=this,f=a.defer(),g=this.url+"/list"+(_.isUndefined(c)?"":c);return console.log("get method url is "+g),console.log("suffix is "+c),e.query(b,g,d,function(a,b){f.resolve(b)},function(a){}),f.promise},view:function(b,c){var d="GET",e=this,f=a.defer(),g=this.url+"/view"+(_.isUndefined(c)?"":c);return e.query(b,g,d,function(a,b){f.resolve(b)},function(a){}),f.promise},add:function(b,c){var d="POST",e=this,f=a.defer(),g=this.url+"/add"+(_.isUndefined(c)?"":c);return e.query(b,g,d,function(a,b){f.resolve(b)},function(a){}),f.promise},edit:function(b,c){var d="POST",e=this,f=a.defer(),g=this.url+"/edit"+(_.isUndefined(c)?"":c);return e.query(b,g,d,function(a,b){f.resolve(b)},function(a){}),f.promise},"delete":function(b,c){var d="POST",e=this,f=a.defer(),g=this.url+"/delete"+(_.isUndefined(c)?"":c);return e.query(b,g,d,function(a,b){f.resolve(b)},function(a){}),f.promise}}}).factory("$sampleservice",function(a,b,c,d,e){var f=Object.create(d);return f.set(e.get("/data")),console.log("after creation $groupservice url is "+f.getUrl()),f.listMainMap=function(b,c){var d="GET",f=this,g=a.defer(),h=e.get("/data")+"/jj01_"+c+".json";return f.query(b,h,d,function(a,b){console.log(f.keyPrefix+" get success "),console.log(b),console.log("--------------------------"),g.resolve(b)},function(a){console.log(f.keyPrefix+" get failure error q is "+a)}),g.promise},f.listSchoolMap=function(b,c){var d="GET",f=this,g=a.defer(),h=e.get("/data")+"/jj04_"+c+".json";return f.query(b,h,d,function(a,b){console.log(f.keyPrefix+" get success "),console.log(b),console.log("--------------------------"),g.resolve(b)},function(a){console.log(f.keyPrefix+" get failure error q is "+a)}),g.promise},f.listGasungbiMap=function(b,c){var d="GET",f=this,g=a.defer(),h=e.get("/data")+"/jj05_"+c+".json";return f.query(b,h,d,function(a,b){console.log(f.keyPrefix+" get success "),console.log(b),console.log("--------------------------"),g.resolve(b)},function(a){console.log(f.keyPrefix+" get failure error q is "+a)}),g.promise},f}),angular.module("deitel.directives",[]).factory("d3Service",["$document","$q","$rootScope",function(a,b,c){function d(){c.$apply(function(){e.resolve(window.d3)})}var e=b.defer(),f=a[0].createElement("script");f.type="text/javascript",f.async=!0,f.src="/static/assets/vendor/d3.js",f.onreadystatechange=function(){"complete"==this.readyState&&d()},f.onload=d;var g=a[0].getElementsByTagName("body")[0];return g.appendChild(f),{d3:function(){return e.promise}}}]).directive("googleMap",["$window",function(a){return function(b,c,d){c[0].offsetWidth;angular.element(c).prepend('<style type="text/css"> .map-canvas, #map-canvas{width:100%;height:100%; border: 1px solid #333335;margin-bottom:20px;display: block;} </style>'),angular.element(c).prepend('<div class=".map-canvas" id="map-canvas"></div>');var e,f=10,g=new google.maps.LatLng(37.522423877485004,127.0109950529785);a.innerHeight;c.height($(window).height());var h={};console.log(" --------- googleMap in mapboard directive ----------"),console.log(b.$eval(d.googleMap)),h=d.googleMap.length>0?b.$eval(d.googleMap):{zoom:f,center:g,scrollwheel:!0,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},e=new google.maps.Map(c.find("div")[0],h),h.onLoad&&h.onLoad(e)}}]),angular.module("deitel",["ngRoute","ngSanitize","deitel.directives","deitel.services","deitel.controllers"]).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){a.when("/",{controller:"TwoCtrl",templateUrl:"/views/two.html"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]);